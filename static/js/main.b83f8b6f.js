/*! For license information please see main.b83f8b6f.js.LICENSE.txt */
(()=>{var e={579:(e,t,n)=>{"use strict";e.exports=n(2799)},2799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},4027:function(e,t){!function(e){"use strict";class t{constructor(e,t){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=t,this.nowDrawingDensity=this.createdDensity,this.render=e}setDensity(e){this.createdDensity=e,this.nowDrawingDensity=e}setDrawingDensity(e){this.nowDrawingDensity=e}setPosition(e){this.state.position=e}setAngle(e){this.state.angle=e}setArea(e){this.state.area=e}setHardDrawingAngle(e){this.state.hardDrawingAngle=e}setHardAngle(e){this.state.hardAngle=e,this.state.hardDrawingAngle=e}setOrientation(e){this.orientation=e}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class n extends t{constructor(e,t,n){super(e,n),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=t}draw(e){const t=this.render.getContext(),n=this.render.convertToGlobal(this.state.position),r=this.render.getRect().pageWidth,a=this.render.getRect().height;t.save(),t.translate(n.x,n.y),t.beginPath();for(let i of this.state.area)null!==i&&(i=this.render.convertToGlobal(i),t.lineTo(i.x-n.x,i.y-n.y));t.rotate(this.state.angle),t.clip(),this.isLoad?t.drawImage(this.image,0,0,r,a):this.drawLoader(t,{x:0,y:0},r,a),t.restore()}simpleDraw(e){const t=this.render.getRect(),n=this.render.getContext(),r=t.pageWidth,a=t.height,i=1===e?t.left+t.pageWidth:t.left,o=t.top;this.isLoad?n.drawImage(this.image,i,o,r,a):this.drawLoader(n,{x:i,y:o},r,a)}drawLoader(e,t,n,r){e.beginPath(),e.strokeStyle="rgb(200, 200, 200)",e.fillStyle="rgb(255, 255, 255)",e.lineWidth=1,e.rect(t.x+1,t.y+1,n-1,r-1),e.stroke(),e.fill();const a={x:t.x+n/2,y:t.y+r/2};e.beginPath(),e.lineWidth=10,e.arc(a.x,a.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),e.stroke(),e.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class r{constructor(e,t){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=t,this.app=e,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let e=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([e]),e++);for(let t=e;t<this.pages.length;t+=2)t<this.pages.length-1?this.landscapeSpread.push([t,t+1]):(this.landscapeSpread.push([t]),this.pages[t].setDensity("hard"))}getSpread(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(e){const t=this.getSpread();for(let n=0;n<t.length;n++)if(e===t[n][0]||e===t[n][1])return n;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(e){if(e>=0&&e<this.pages.length)return this.pages[e];throw new Error("Invalid page number")}nextBy(e){const t=this.pages.indexOf(e);return t<this.pages.length-1?this.pages[t+1]:null}prevBy(e){const t=this.pages.indexOf(e);return t>0?this.pages[t-1]:null}getFlippingPage(e){const t=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===e?this.pages[t].newTemporaryCopy():this.pages[t-1];{const n=0===e?this.getSpread()[t+1]:this.getSpread()[t-1];return 1===n.length||0===e?this.pages[n[0]]:this.pages[n[1]]}}getBottomPage(e){const t=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===e?this.pages[t+1]:this.pages[t-1];{const n=0===e?this.getSpread()[t+1]:this.getSpread()[t-1];return 1===n.length?this.pages[n[0]]:0===e?this.pages[n[1]]:this.pages[n[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e&&(e=this.currentPageIndex),e<0||e>=this.pages.length)return;const t=this.getSpreadIndexByPage(e);null!==t&&(this.currentSpreadIndex=t,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(e){if(!(e>=0&&e<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=e}showSpread(){const e=this.getSpread()[this.currentSpreadIndex];2===e.length?(this.render.setLeftPage(this.pages[e[0]]),this.render.setRightPage(this.pages[e[1]])):"landscape"===this.render.getOrientation()&&e[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[e[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[e[0]])),this.currentPageIndex=e[0],this.app.updatePageIndex(this.currentPageIndex)}}class a extends r{constructor(e,t,n){super(e,t),this.imagesHref=n}load(){for(const e of this.imagesHref){const t=new n(this.render,e,"soft");t.load(),this.pages.push(t)}this.createSpread()}}class i{static GetDistanceBetweenTwoPoint(e,t){return null===e||null===t?1/0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static GetSegmentLength(e){return i.GetDistanceBetweenTwoPoint(e[0],e[1])}static GetAngleBetweenTwoLine(e,t){const n=e[0].y-e[1].y,r=t[0].y-t[1].y,a=e[1].x-e[0].x,i=t[1].x-t[0].x;return Math.acos((n*r+a*i)/(Math.sqrt(n*n+a*a)*Math.sqrt(r*r+i*i)))}static PointInRect(e,t){return null===t?null:t.x>=e.left&&t.x<=e.width+e.left&&t.y>=e.top&&t.y<=e.top+e.height?t:null}static GetRotatedPoint(e,t,n){return{x:e.x*Math.cos(n)+e.y*Math.sin(n)+t.x,y:e.y*Math.cos(n)-e.x*Math.sin(n)+t.y}}static LimitPointToCircle(e,t,n){if(i.GetDistanceBetweenTwoPoint(e,n)<=t)return n;const r=e.x,a=e.y,o=n.x,l=n.y;let s=Math.sqrt(Math.pow(t,2)*Math.pow(r-o,2)/(Math.pow(r-o,2)+Math.pow(a-l,2)))+r;n.x<0&&(s*=-1);let c=(s-r)*(a-l)/(r-o)+a;return r-o+a===0&&(c=t),{x:s,y:c}}static GetIntersectBetweenTwoSegment(e,t,n){return i.PointInRect(e,i.GetIntersectBeetwenTwoLine(t,n))}static GetIntersectBeetwenTwoLine(e,t){const n=e[0].y-e[1].y,r=t[0].y-t[1].y,a=e[1].x-e[0].x,i=t[1].x-t[0].x,o=e[0].x*e[1].y-e[1].x*e[0].y,l=t[0].x*t[1].y-t[1].x*t[0].y,s=n*l-r*o,c=a*l-i*o,u=-(o*i-l*a)/(n*i-r*a),d=-(n*l-r*o)/(n*i-r*a);if(isFinite(u)&&isFinite(d))return{x:u,y:d};if(Math.abs(s-c)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y),a=Math.max(n,r),i=[e];function o(e,t,n,r,a){return t>e?e+a*(n/r):t<e?e-a*(n/r):e}for(let l=1;l<=a;l+=1)i.push({x:o(e.x,t.x,n,a,l),y:o(e.y,t.y,r,a,l)});return i}}class o extends t{constructor(e,t,n){super(e,n),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=t,this.element.classList.add("stf__item"),this.element.classList.add("--"+n)}newTemporaryCopy(){return"hard"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new o(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(e){const t=e||this.nowDrawingDensity,n=this.render.convertToGlobal(this.state.position),r=this.render.getRect().pageWidth,a=this.render.getRect().height;this.element.classList.remove("--simple");const i="\n            display: block;\n            z-index: ".concat(this.element.style.zIndex,";\n            left: 0;\n            top: 0;\n            width: ").concat(r,"px;\n            height: ").concat(a,"px;\n        ");"hard"===t?this.drawHard(i):this.drawSoft(n,i)}drawHard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=this.render.getRect().left+this.render.getRect().width/2,n=this.state.hardDrawingAngle,r=e+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?"transform-origin: ".concat(this.render.getRect().pageWidth,"px 0; \n                   transform: translate3d(0, 0, 0) rotateY(").concat(n,"deg);"):"transform-origin: 0 0; \n                   transform: translate3d(".concat(t,"px, 0, 0) rotateY(").concat(n,"deg);"));this.element.style.cssText=r}drawSoft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="polygon( ";for(const a of this.state.area)if(null!==a){let e=1===this.render.getDirection()?{x:-a.x+this.state.position.x,y:a.y-this.state.position.y}:{x:a.x-this.state.position.x,y:a.y-this.state.position.y};e=i.GetRotatedPoint(e,{x:0,y:0},this.state.angle),n+=e.x+"px "+e.y+"px, "}n=n.slice(0,-2),n+=")";const r=t+"transform-origin: 0 0; clip-path: ".concat(n,"; -webkit-clip-path: ").concat(n,";")+(this.render.isSafari()&&0===this.state.angle?"transform: translate(".concat(e.x,"px, ").concat(e.y,"px);"):"transform: translate3d(".concat(e.x,"px, ").concat(e.y,"px, 0) rotate(").concat(this.state.angle,"rad);"));this.element.style.cssText=r}simpleDraw(e){const t=this.render.getRect(),n=t.pageWidth,r=t.height,a=1===e?t.left+t.pageWidth:t.left,i=t.top;this.element.classList.add("--simple"),this.element.style.cssText="\n            position: absolute; \n            display: block; \n            height: ".concat(r,"px; \n            left: ").concat(a,"px; \n            top: ").concat(i,"px; \n            width: ").concat(n,"px; \n            z-index: ").concat(this.render.getSettings().startZIndex+1,";")}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(e){super.setOrientation(e),this.element.classList.remove("--left","--right"),this.element.classList.add(1===e?"--right":"--left")}setDrawingDensity(e){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+e),super.setDrawingDensity(e)}}class l extends r{constructor(e,t,n,r){super(e,t),this.element=n,this.pagesElement=r}load(){for(const e of this.pagesElement){const t=new o(this.render,e,"hard"===e.dataset.density?"hard":"soft");t.load(),this.pages.push(t)}this.createSpread()}}class s{constructor(e,t,n,r){this.direction=e,this.corner=t,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(n,10),this.pageHeight=parseInt(r,10)}calc(e){try{return this.position=this.calcAngleAndPosition(e),this.calculateIntersectPoint(this.position),!0}catch(e){return!1}}getFlippingClipArea(){const e=[];let t=!1;return e.push(this.rect.topLeft),e.push(this.topIntersectPoint),null===this.sideIntersectPoint?t=!0:(e.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(t=!1)),e.push(this.bottomIntersectPoint),(t||"bottom"===this.corner)&&e.push(this.rect.bottomLeft),e}getBottomClipArea(){const e=[];return e.push(this.topIntersectPoint),"top"===this.corner?e.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&e.push({x:this.pageWidth,y:0}),e.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?i.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&e.push(this.sideIntersectPoint):"top"===this.corner&&e.push({x:this.pageWidth,y:this.pageHeight}),e.push(this.bottomIntersectPoint),e.push(this.topIntersectPoint),e}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const e=i.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?e:Math.PI-e}calcAngleAndPosition(e){let t=e;if(this.updateAngleAndGeometry(t),t="top"===this.corner?this.checkPositionAtCenterLine(t,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(t,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(t.x-this.pageWidth)<1&&Math.abs(t.y)<1)throw new Error("Point is too small");return t}updateAngleAndGeometry(e){this.angle=this.calculateAngle(e),this.rect=this.getPageRect(e)}calculateAngle(e){const t=this.pageWidth-e.x+1,n="bottom"===this.corner?this.pageHeight-e.y:e.y;let r=2*Math.acos(t/Math.sqrt(n*n+t*t));n<0&&(r=-r);const a=Math.PI-r;if(!isFinite(r)||a>=0&&a<.003)throw new Error("The G point is too small");return"bottom"===this.corner&&(r=-r),r}getPageRect(e){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],e):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],e)}getRectFromBasePoint(e,t){return{topLeft:this.getRotatedPoint(e[0],t),topRight:this.getRotatedPoint(e[1],t),bottomLeft:this.getRotatedPoint(e[2],t),bottomRight:this.getRotatedPoint(e[3],t)}}getRotatedPoint(e,t){return{x:e.x*Math.cos(this.angle)+e.y*Math.sin(this.angle)+t.x,y:e.y*Math.cos(this.angle)-e.x*Math.sin(this.angle)+t.y}}calculateIntersectPoint(e){const t={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};"top"===this.corner?(this.topIntersectPoint=i.GetIntersectBetweenTwoSegment(t,[e,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=i.GetIntersectBetweenTwoSegment(t,[e,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=i.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=i.GetIntersectBetweenTwoSegment(t,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=i.GetIntersectBetweenTwoSegment(t,[e,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=i.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(e,t,n){let r=e;const a=i.LimitPointToCircle(t,this.pageWidth,r);r!==a&&(r=a,this.updateAngleAndGeometry(r));const o=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let l=this.rect.bottomRight,s=this.rect.topLeft;if("bottom"===this.corner&&(l=this.rect.topRight,s=this.rect.bottomLeft),l.x<=0){const e=i.LimitPointToCircle(n,o,s);e!==r&&(r=e,this.updateAngleAndGeometry(r))}return r}getSegmentToShadowLine(){const e=this.getShadowStartPoint();return[e,e!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class c{constructor(e,t){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=e,this.app=t}fold(e){this.setState("user_fold"),null===this.calc&&this.start(e),this.do(this.render.convertToPage(e))}flip(e){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(e))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(e))return;const t=this.getBoundsRect();this.setState("flipping");const n=t.height/10,r="bottom"===this.calc.getCorner()?t.height-n:n,a="bottom"===this.calc.getCorner()?t.height:0;this.calc.calc({x:t.pageWidth-n,y:r}),this.animateFlippingTo({x:t.pageWidth-n,y:r},{x:-t.pageWidth,y:a},!0)}start(e){this.reset();const t=this.render.convertToBook(e),n=this.getBoundsRect(),r=this.getDirectionByPoint(t),a=t.y>=n.height/2?"bottom":"top";if(!this.checkDirection(r))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(r),this.bottomPage=this.app.getPageCollection().getBottomPage(r),"landscape"===this.render.getOrientation())if(1===r){const e=this.app.getPageCollection().nextBy(this.flippingPage);null!==e&&this.flippingPage.getDensity()!==e.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),e.setDrawingDensity("hard"))}else{const e=this.app.getPageCollection().prevBy(this.flippingPage);null!==e&&this.flippingPage.getDensity()!==e.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),e.setDrawingDensity("hard"))}return this.render.setDirection(r),this.calc=new s(r,a,n.pageWidth.toString(10),n.height.toString(10)),!0}catch(e){return!1}}do(e){if(null!==this.calc&&this.calc.calc(e)){const e=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*e)/100):this.flippingPage.setHardAngle(-90*(200-2*e)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),e,this.calc.getDirection())}}flipToPage(e,t){const n=this.app.getPageCollection().getCurrentSpreadIndex(),r=this.app.getPageCollection().getSpreadIndexByPage(e);try{r>n&&(this.app.getPageCollection().setCurrentSpreadIndex(r-1),this.flipNext(t)),r<n&&(this.app.getPageCollection().setCurrentSpreadIndex(r+1),this.flipPrev(t))}catch(e){}}flipNext(e){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===e?1:this.render.getRect().height-2})}flipPrev(e){this.flip({x:10,y:"top"===e?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const e=this.calc.getPosition(),t=this.getBoundsRect(),n="bottom"===this.calc.getCorner()?t.height:0;e.x<=0?this.animateFlippingTo(e,{x:-t.pageWidth,y:n},!0):this.animateFlippingTo(e,{x:t.pageWidth,y:n},!1)}showCorner(e){if(!this.checkState("read","fold_corner"))return;const t=this.getBoundsRect(),n=t.pageWidth;if(this.isPointOnCorners(e))if(null===this.calc){if(!this.start(e))return;this.setState("fold_corner"),this.calc.calc({x:n-1,y:1});const r=50,a="bottom"===this.calc.getCorner()?t.height-1:1,i="bottom"===this.calc.getCorner()?t.height-r:r;this.animateFlippingTo({x:n-1,y:a},{x:n-r,y:i},!1,!1)}else this.do(this.render.convertToPage(e));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=i.GetCordsFromTwoPoint(e,t),o=[];for(const i of a)o.push(()=>this.do(i));const l=this.getAnimationDuration(a.length);this.render.startAnimation(o,l,()=>{this.calc&&(n&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),r&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(e){this.state!==e&&(this.app.updateState(e),this.state=e)}getDirectionByPoint(e){const t=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(e.x-t.pageWidth<=t.width/5)return 1}else if(e.x<t.width/2)return 1;return 0}getAnimationDuration(e){const t=this.app.getSettings().flippingTime;return e>=1e3?t:e/1e3*t}checkDirection(e){return 0===e?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const r of t)if(this.state===r)return!0;return!1}isPointOnCorners(e){const t=this.getBoundsRect(),n=t.pageWidth,r=Math.sqrt(Math.pow(n,2)+Math.pow(t.height,2))/5,a=this.render.convertToBook(e);return a.x>0&&a.y>0&&a.x<t.width&&a.y<t.height&&(a.x<r||a.x>t.width-r)&&(a.y<r||a.y>t.height-r)}}class u{constructor(e,t){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=t,this.app=e;const n=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==n.exec(window.navigator.userAgent)}render(e){if(null!==this.animation){const t=Math.round((e-this.animation.startedAt)/this.animation.durationFrame);t<this.animation.frames.length?this.animation.frames[t]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=e,this.drawFrame()}start(){this.update();const e=t=>{this.render(t),requestAnimationFrame(e)};requestAnimationFrame(e)}startAnimation(e,t,n){this.finishAnimation(),this.animation={frames:e,duration:t,durationFrame:t/e.length,onAnimateEnd:n,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const e=this.calculateBoundsRect();this.orientation!==e&&(this.orientation=e,this.app.updateOrientation(e))}calculateBoundsRect(){let e="landscape";const t=this.getBlockWidth(),n=t/2,r=this.getBlockHeight()/2,a=this.setting.width/this.setting.height;let i=this.setting.width,o=this.setting.height,l=n-i;return"stretch"===this.setting.size?(t<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(e="portrait"),i="portrait"===e?this.getBlockWidth():this.getBlockWidth()/2,i>this.setting.maxWidth&&(i=this.setting.maxWidth),o=i/a,o>this.getBlockHeight()&&(o=this.getBlockHeight(),i=o*a),l="portrait"===e?n-i/2-i:n-i):t<2*i&&this.app.getSettings().usePortrait&&(e="portrait",l=n-i/2-i),this.boundsRect={left:l,top:r-o/2,width:2*i,height:o,pageWidth:i},e}setShadowData(e,t,n,r){if(!this.app.getSettings().drawShadow)return;const a=100*this.getSettings().maxShadowOpacity;this.shadow={pos:e,angle:t,width:3*this.getRect().pageWidth/4*n/100,opacity:(100-n)*a/100/100,direction:r,progress:2*n}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(e){this.pageRect=e}setDirection(e){this.direction=e}setRightPage(e){null!==e&&e.setOrientation(1),this.rightPage=e}setLeftPage(e){null!==e&&e.setOrientation(0),this.leftPage=e}setBottomPage(e){null!==e&&e.setOrientation(1===this.direction?0:1),this.bottomPage=e}setFlippingPage(e){null!==e&&e.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1),this.flippingPage=e}convertToBook(e){const t=this.getRect();return{x:e.x-t.left,y:e.y-t.top}}isSafari(){return this.safari}convertToPage(e,t){t||(t=this.direction);const n=this.getRect();return{x:0===t?e.x-n.left-n.width/2:n.width/2-e.x+n.left,y:e.y-n.top}}convertToGlobal(e,t){if(t||(t=this.direction),null==e)return null;const n=this.getRect();return{x:0===t?e.x+n.left+n.width/2:n.width/2-e.x+n.left,y:e.y+n.top}}convertRectToGlobal(e,t){return t||(t=this.direction),{topLeft:this.convertToGlobal(e.topLeft,t),topRight:this.convertToGlobal(e.topRight,t),bottomLeft:this.convertToGlobal(e.bottomLeft,t),bottomRight:this.convertToGlobal(e.bottomRight,t)}}}class d extends u{constructor(e,t,n){super(e,t),this.canvas=n,this.ctx=n.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const e=this.getRect();"portrait"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(e.left+e.pageWidth,e.top,e.width,e.height),this.ctx.clip())}drawBookShadow(){const e=this.getRect();this.ctx.save(),this.ctx.beginPath();const t=e.width/20;this.ctx.rect(e.left,e.top,e.width,e.height);const n={x:e.left+e.width/2-t/2,y:0};this.ctx.translate(n.x,n.y);const r=this.ctx.createLinearGradient(0,0,t,0);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),r.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),r.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),r.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),r.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=r,this.ctx.fillRect(0,0,t,2*e.height),this.ctx.restore()}drawOuterShadow(){const e=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(e.left,e.top,e.width,e.height);const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(t.x,t.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const n=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),n.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),n.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,this.shadow.width,2*e.height),this.ctx.restore()}drawInnerShadow(){const e=this.getRect();this.ctx.save(),this.ctx.beginPath();const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),n=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(n.topLeft.x,n.topLeft.y),this.ctx.lineTo(n.topRight.x,n.topRight.y),this.ctx.lineTo(n.bottomRight.x,n.bottomRight.y),this.ctx.lineTo(n.bottomLeft.x,n.bottomLeft.y),this.ctx.translate(t.x,t.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const r=3*this.shadow.width/4,a=this.ctx.createLinearGradient(0,0,r,0);0===this.shadow.direction?(this.ctx.translate(-r,-100),a.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),a.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),a.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),a.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),a.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),a.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),a.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),a.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=a,this.ctx.fillRect(0,0,r,2*e.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class h{constructor(e,t,n){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=e=>{if(this.checkTarget(e.target)){const t=this.getMousePos(e.clientX,e.clientY);this.app.startUserTouch(t),e.preventDefault()}},this.onTouchStart=e=>{if(this.checkTarget(e.target)&&e.changedTouches.length>0){const t=e.changedTouches[0],n=this.getMousePos(t.clientX,t.clientY);this.touchPoint={point:n,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(n)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||e.preventDefault()}},this.onMouseUp=e=>{const t=this.getMousePos(e.clientX,e.clientY);this.app.userStop(t)},this.onMouseMove=e=>{const t=this.getMousePos(e.clientX,e.clientY);this.app.userMove(t,!1)},this.onTouchMove=e=>{if(e.changedTouches.length>0){const t=e.changedTouches[0],n=this.getMousePos(t.clientX,t.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-n.x)>10||"read"!==this.app.getState())&&e.cancelable&&this.app.userMove(n,!0),"read"!==this.app.getState()&&e.preventDefault()):this.app.userMove(n,!0)}},this.onTouchEnd=e=>{if(e.changedTouches.length>0){const t=e.changedTouches[0],n=this.getMousePos(t.clientX,t.clientY);let r=!1;if(null!==this.touchPoint){const e=n.x-this.touchPoint.point.x,t=Math.abs(n.y-this.touchPoint.point.y);Math.abs(e)>this.swipeDistance&&t<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(e>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),r=!0),this.touchPoint=null}this.app.userStop(n,r)}},this.parentElement=e,e.classList.add("stf__parent"),e.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=e.querySelector(".stf__wrapper"),this.app=t;const r=this.app.getSettings().usePortrait?1:2;e.style.minWidth=n.minWidth*r+"px",e.style.minHeight=n.minHeight+"px","fixed"===n.size&&(e.style.minWidth=n.width*r+"px",e.style.minHeight=n.height+"px"),n.autoSize&&(e.style.width="100%",e.style.maxWidth=2*n.maxWidth+"px"),e.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=n.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(e){this.wrapper.classList.remove("--portrait","--landscape"),"portrait"===e?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(e,t){const n=this.distElement.getBoundingClientRect();return{x:e-n.left,y:t-n.top}}checkTarget(e){return!this.app.getSettings().clickEventForward||!["a","button"].includes(e.tagName.toLowerCase())}}class p extends h{constructor(e,t,n,r){super(e,t,n),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=e.querySelector(".stf__block"),this.items=r;for(const a of r)this.distElement.appendChild(a);this.setHandlers()}clear(){for(const e of this.items)this.parentElement.appendChild(e)}updateItems(e){this.removeHandlers(),this.distElement.innerHTML="";for(const t of e)this.distElement.appendChild(t);this.items=e,this.setHandlers()}update(){this.app.getRender().update()}}class f extends h{constructor(e,t,n){super(e,t,n),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=e.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const e=getComputedStyle(this.canvas),t=parseInt(e.getPropertyValue("width"),10),n=parseInt(e.getPropertyValue("height"),10);this.canvas.width=t,this.canvas.height=n}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class m extends u{constructor(e,t,n){super(e,t),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=n,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>'),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const e=this.getRect(),t=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let n=(100-t)*(2.5*e.pageWidth)/100+20;n>e.pageWidth&&(n=e.pageWidth);let r="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+5).toString(10),";\n            width: ").concat(n,"px;\n            height: ").concat(e.height,"px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity*t/100,") 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ").concat(e.left+e.width/2,"px;\n            transform-origin: 0 0;\n        ");r+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=r}drawHardOuterShadow(){const e=this.getRect();let t=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*e.pageWidth)/100+20;t>e.pageWidth&&(t=e.pageWidth);let n="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+4).toString(10),";\n            width: ").concat(t,"px;\n            height: ").concat(e.height,"px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%, rgba(0, 0, 0, 0) 100%);\n            left: ").concat(e.left+e.width/2,"px;\n            transform-origin: 0 0;\n        ");n+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=n}drawInnerShadow(){const e=this.getRect(),t=3*this.shadow.width/4,n=0===this.getDirection()?t:0,r=0===this.getDirection()?"to left":"to right",a=this.convertToGlobal(this.shadow.pos),o=this.shadow.angle+3*Math.PI/2,l=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let s="polygon( ";for(const u of l){let e=1===this.getDirection()?{x:-u.x+this.shadow.pos.x,y:u.y-this.shadow.pos.y}:{x:u.x-this.shadow.pos.x,y:u.y-this.shadow.pos.y};e=i.GetRotatedPoint(e,{x:n,y:100},o),s+=e.x+"px "+e.y+"px, "}s=s.slice(0,-2),s+=")";const c="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(t,"px;\n            height: ").concat(2*e.height,"px;\n            background: linear-gradient(").concat(r,",\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ").concat(n,"px 100px;\n            transform: translate3d(").concat(a.x-n,"px, ").concat(a.y-100,"px, 0) rotate(").concat(o,"rad);\n            clip-path: ").concat(s,";\n            -webkit-clip-path: ").concat(s,";\n        ");this.innerShadow.style.cssText=c}drawOuterShadow(){const e=this.getRect(),t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),n=this.shadow.angle+3*Math.PI/2,r=1===this.getDirection()?this.shadow.width:0,a=0===this.getDirection()?"to right":"to left",o=[{x:0,y:0},{x:e.pageWidth,y:0},{x:e.pageWidth,y:e.height},{x:0,y:e.height}];let l="polygon( ";for(const c of o)if(null!==c){let e=1===this.getDirection()?{x:-c.x+this.shadow.pos.x,y:c.y-this.shadow.pos.y}:{x:c.x-this.shadow.pos.x,y:c.y-this.shadow.pos.y};e=i.GetRotatedPoint(e,{x:r,y:100},n),l+=e.x+"px "+e.y+"px, "}l=l.slice(0,-2),l+=")";const s="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(this.shadow.width,"px;\n            height: ").concat(2*e.height,"px;\n            background: linear-gradient(").concat(a,", rgba(0, 0, 0, ").concat(this.shadow.opacity,"), rgba(0, 0, 0, 0));\n            transform-origin: ").concat(r,"px 100px;\n            transform: translate3d(").concat(t.x-r,"px, ").concat(t.y-100,"px, 0) rotate(").concat(n,"rad);\n            clip-path: ").concat(l,";\n            -webkit-clip-path: ").concat(l,";\n        ");this.outerShadow.style.cssText=s}drawLeftPage(){"portrait"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const e=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;"portrait"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(e))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&("soft"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const e of this.app.getPageCollection().getPages())e!==this.leftPage&&e!==this.rightPage&&e!==this.flippingPage&&e!==this.bottomPage&&(e.getElement().style.cssText="display: none"),e.getTemporaryCopy()!==this.flippingPage&&e.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class g{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(e){const t=this._default;if(Object.assign(t,e),"stretch"!==t.size&&"fixed"!==t.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(t.width<=0||t.height<=0)throw new Error("Invalid width or height");if(t.flippingTime<=0)throw new Error("Invalid flipping time");return"stretch"===t.size?(t.minWidth<=0&&(t.minWidth=100),t.maxWidth<t.minWidth&&(t.maxWidth=2e3),t.minHeight<=0&&(t.minHeight=100),t.maxHeight<t.minHeight&&(t.maxHeight=2e3)):(t.minWidth=t.width,t.maxWidth=t.width,t.minHeight=t.height,t.maxHeight=t.height),t}}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}"),e.PageFlip=class extends class{constructor(){this.events=new Map}on(e,t){return this.events.has(e)?this.events.get(e).push(t):this.events.set(e,[t]),this}off(e){this.events.delete(e)}trigger(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.events.has(e))for(const r of this.events.get(e))r({data:n,object:t})}}{constructor(e,t){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new g).getSettings(t),this.block=e}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(e){this.ui=new f(this.block,this,this.setting);const t=this.ui.getCanvas();this.render=new d(this,this.setting,t),this.flipController=new c(this.render,this),this.pages=new a(this,this.render,e),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(e){this.ui=new p(this.block,this,this.setting,e),this.render=new m(this,this.setting,this.ui.getDistElement()),this.flipController=new c(this.render,this),this.pages=new l(this,this.render,this.ui.getDistElement(),e),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(e){const t=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new a(this,this.render,e),this.pages.load(),this.pages.show(t),this.trigger("update",this,{page:t,mode:this.render.getOrientation()})}updateFromHtml(e){const t=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new l(this,this.render,this.ui.getDistElement(),e),this.pages.load(),this.ui.updateItems(e),this.render.reload(),this.pages.show(t),this.trigger("update",this,{page:t,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(e){this.pages.show(e)}flipNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipNext(e)}flipPrev(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipPrev(e)}flip(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";this.flipController.flipToPage(e,t)}updateState(e){this.trigger("changeState",this,e)}updatePageIndex(e){this.trigger("flip",this,e)}updateOrientation(e){this.ui.setOrientationStyle(e),this.update(),this.trigger("changeOrientation",this,e)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(e){return this.pages.getPage(e)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(e){this.mousePosition=e,this.isUserTouch=!0,this.isUserMove=!1}userMove(e,t){this.isUserTouch||t||!this.setting.showPageCorners?this.isUserTouch&&i.GetDistanceBetweenTwoPoint(this.mousePosition,e)>5&&(this.isUserMove=!0,this.flipController.fold(e)):this.flipController.showCorner(e)}userStop(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isUserTouch&&(this.isUserTouch=!1,t||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(e)))}},Object.defineProperty(e,"__esModule",{value:!0})}(t)},4288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var S=w.prototype=new b;S.constructor=w,g(S,v.prototype),S.isPureReactComponent=!0;var E=Array.isArray;function k(){}var x={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function C(e,t,r){var a=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==a?a:null,props:r}}function P(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,i,o){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s,c,u=!1;if(null===e)u=!0;else switch(l){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return T((u=e._init)(e._payload),t,a,i,o)}}if(u)return o=o(e),u=""===i?"."+R(e,0):i,E(o)?(a="",null!=u&&(a=u.replace(_,"$&/")+"/"),T(o,t,a,"",function(e){return e})):null!=o&&(P(o)&&(s=o,c=a+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+u,o=C(s.type,c,s.props)),t.push(o)),1;u=0;var d,p=""===i?".":i+":";if(E(e))for(var m=0;m<e.length;m++)u+=T(i=e[m],t,a,l=p+R(i,m),o);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=T(i=i.value,t,a,l=p+R(i,m++),o);else if("object"===l){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(k,k):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function N(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",function(e){return t.call(n,e,a++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},L={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!P(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=L,t.Component=v,t.Fragment=a,t.Profiler=o,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return x.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),a=e.key;if(null!=t)for(i in void 0!==t.key&&(a=""+t.key),t)!A.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];r.children=o}return C(e.type,a,r)},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},t.createElement=function(e,t,n){var r,a={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)A.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var l=Array(o),s=0;s<o;s++)l[s]=arguments[s+2];a.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===a[r]&&(a[r]=o[r]);return C(e,i,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.T,n={};x.T=n;try{var r=e(),a=x.S;null!==a&&a(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(k,D)}catch(i){D(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),x.T=t}},t.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},t.use=function(e){return x.H.use(e)},t.useActionState=function(e,t,n){return x.H.useActionState(e,t,n)},t.useCallback=function(e,t){return x.H.useCallback(e,t)},t.useContext=function(e){return x.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return x.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return x.H.useEffect(e,t)},t.useEffectEvent=function(e){return x.H.useEffectEvent(e)},t.useId=function(){return x.H.useId()},t.useImperativeHandle=function(e,t,n){return x.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.H.useMemo(e,t)},t.useOptimistic=function(e,t){return x.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return x.H.useReducer(e,t,n)},t.useRef=function(e){return x.H.useRef(e)},t.useState=function(e){return x.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.H.useTransition()},t.version="19.2.3"},4391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4705:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>i})},5043:(e,t,n)=>{"use strict";e.exports=n(4288)},5896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var l=2*(r+1)-1,s=e[l],c=l+1,u=e[c];if(0>i(s,n))c<a&&0>i(u,s)?(e[r]=u,e[c]=n,r=c):(e[r]=s,e[l]=n,r=l);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function S(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(g=!1,S(e),!m)if(null!==r(c))m=!0,x||(x=!0,k());else{var t=r(u);null!==t&&O(E,t.startTime-e)}}var k,x=!1,A=-1,C=5,P=-1;function _(){return!!y||!(t.unstable_now()-P<C)}function R(){if(y=!1,x){var e=t.unstable_now();P=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(A),A=-1),f=!0;var i=p;try{t:{for(S(e),h=r(c);null!==h&&!(h.expirationTime>e&&_());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var l=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof l){h.callback=l,S(e),n=!0;break t}h===r(c)&&a(c),S(e)}else a(c);h=r(c)}if(null!==h)n=!0;else{var s=r(u);null!==s&&O(E,s.startTime-e),n=!1}}break e}finally{h=null,p=i,f=!1}n=void 0}}finally{n?k():x=!1}}}if("function"===typeof w)k=function(){w(R)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,N=T.port2;T.port1.onmessage=R,k=function(){N.postMessage(null)}}else k=function(){v(R,0)};function O(e,n){A=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:l=i+l,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(A),A=-1):g=!0,O(E,i-o))):(e.sortIndex=l,n(c,e),m||f||(m=!0,x||(x=!0,k()))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},6672:(e,t,n)=>{"use strict";var r=n(5043);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=s.T,n=o.p;try{if(s.T=null,o.p=2,e)return e()}finally{s.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),a="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:i}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},t.useFormStatus=function(){return s.H.useHostTransitionStatus()},t.version="19.2.3"},7004:(e,t,n)=>{"use strict";var r=n(8853),a=n(5043),i=n(7950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(s(e)!==e)throw Error(o(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var p=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var P=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var _=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var R=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var N=Symbol.for("react.client.reference");function O(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===N?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case x:return"SuspenseList";case P:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case S:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return O(e(t))}catch(n){}}return null}var D=Array.isArray,L=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},j=[],z=-1;function H(e){return{current:e}}function F(e){0>z||(e.current=j[z],j[z]=null,z--)}function G(e,t){z++,j[z]=e.current,e.current=t}var B,W,U=H(null),V=H(null),K=H(null),q=H(null);function Y(e,t){switch(G(K,t),G(V,e),G(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(U),G(U,e)}function Q(){F(U),F(V),F(K)}function $(e){null!==e.memoizedState&&G(q,e);var t=U.current,n=vd(t,e.type);t!==n&&(G(V,e),G(U,n))}function X(e){V.current===e&&(F(U),F(V)),q.current===e&&(F(q),uh._currentValue=I)}function Z(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",W=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+W}var J=!1;function ee(e,t){if(!e||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(l){if(l&&r&&"string"===typeof l.stack)return[l.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),o=i[0],l=i[1];if(o&&l){var s=o.split("\n"),c=l.split("\n");for(a=r=0;r<s.length&&!s[r].includes("DetermineComponentFrameRoot");)r++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(r===s.length||a===c.length)for(r=s.length-1,a=c.length-1;1<=r&&0<=a&&s[r]!==c[a];)a--;for(;1<=r&&0<=a;r--,a--)if(s[r]!==c[a]){if(1!==r||1!==a)do{if(r--,0>--a||s[r]!==c[a]){var u="\n"+s[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=a);break}}}finally{J=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Z(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return e.child!==t&&null!==t?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Z("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ae=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,oe=r.unstable_shouldYield,le=r.unstable_requestPaint,se=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,pe=r.unstable_LowPriority,fe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Se(e)/Ee|0)|0},Se=Math.log,Ee=Math.LN2;var ke=256,xe=262144,Ae=4194304;function Ce(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Pe(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var l=134217727&r;return 0!==l?0!==(r=l&~i)?a=Ce(r):0!==(o&=l)?a=Ce(o):n||0!==(n=l&~e)&&(a=Ce(n)):0!==(l=r&~i)?a=Ce(l):0!==o?a=Ce(o):n||0!==(n=r&~e)&&(a=Ce(n)),0===a?0:0!==t&&t!==a&&0===(t&i)&&((i=a&-a)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:a}function _e(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Re(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=Ae;return 0===(62914560&(Ae<<=1))&&(Ae=4194304),e}function Ne(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Oe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Le(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Me(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Ie(n))&(e.suspendedLanes|t))?0:n}function Ie(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function je(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function ze(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function He(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}var Fe=Math.random().toString(36).slice(2),Ge="__reactFiber$"+Fe,Be="__reactProps$"+Fe,We="__reactContainer$"+Fe,Ue="__reactEvents$"+Fe,Ve="__reactListeners$"+Fe,Ke="__reactHandles$"+Fe,qe="__reactResources$"+Fe,Ye="__reactMarker$"+Fe;function Qe(e){delete e[Ge],delete e[Be],delete e[Ue],delete e[Ve],delete e[Ke]}function $e(e){var t=e[Ge];if(t)return t;for(var n=e.parentNode;n;){if(t=n[We]||n[Ge]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Id(e);null!==e;){if(n=e[Ge])return n;e=Id(e)}return t}n=(e=n).parentNode}return null}function Xe(e){if(e=e[Ge]||e[We]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Je(e){var t=e[qe];return t||(t=e[qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ye]=!0}var tt=new Set,nt={};function rt(e,t){at(e,t),at(e+"Capture",t)}function at(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},lt={};function st(e,t,n){if(a=t,re.call(lt,a)||!re.call(ot,a)&&(it.test(a)?lt[a]=!0:(ot[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,a,i,o,l){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?wt(e,o,dt(t)):null!=n?wt(e,o,dt(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!==typeof a&&"symbol"!==typeof a),null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.name=""+dt(l):e.removeAttribute("name")}function bt(e,t,n,r,a,i,o,l){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:a)&&"symbol"!==typeof r&&!!r,e.checked=l?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o),pt(e)}function wt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function St(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function Et(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(D(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),pt(e)}function xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var At=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||At.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Pt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Ct(e,a,r)}else for(var i in t)t.hasOwnProperty(i)&&Ct(e,i,t[i])}function _t(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ot(){}var Dt=null;function Lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,It=null;function jt(e){var t=Xe(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[Be]||null;if(!a)throw Error(o(90));vt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ft(r)}break e;case"textarea":Et(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&St(e,!!n.multiple,t,!1)}}}var zt=!1;function Ht(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Mt||null!==It)&&(Jc(),Mt&&(t=Mt,e=It,It=Mt=null,jt(t),e)))for(t=0;t<e.length;t++)jt(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Be]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Gt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Gt)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(Xh){Bt=!1}var Ut=null,Vt=null,Kt=null;function qt(){if(Kt)return Kt;var e,t,n=Vt,r=n.length,a="value"in Ut?Ut.value:Ut.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Kt=a.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Qt(){return!0}function $t(){return!1}function Xt(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Qt:$t,this.isPropagationStopped=$t,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qt)},persist:function(){},isPersistent:Qt}),t}var Zt,Jt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Xt(tn),rn=p({},tn,{view:0,detail:0}),an=Xt(rn),on=p({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Zt=e.screenX-en.screenX,Jt=e.screenY-en.screenY):Jt=Zt=0,en=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),ln=Xt(on),sn=Xt(p({},on,{dataTransfer:0})),cn=Xt(p({},rn,{relatedTarget:0})),un=Xt(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Xt(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Xt(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=Xt(p({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Xt(p({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=Xt(p({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),Sn=Xt(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),En=Xt(p({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kn=Xt(p({},tn,{newState:0,oldState:0})),xn=[9,13,27,32],An=Gt&&"CompositionEvent"in window,Cn=null;Gt&&"documentMode"in document&&(Cn=document.documentMode);var Pn=Gt&&"TextEvent"in window&&!Cn,_n=Gt&&(!An||Cn&&8<Cn&&11>=Cn),Rn=String.fromCharCode(32),Tn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function On(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var Ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ln[e.type]:"textarea"===t}function In(e,t,n,r){Mt?It?It.push(r):It=[r]:Mt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jn=null,zn=null;function Hn(e){Qu(e,0)}function Fn(e){if(ft(Ze(e)))return e}function Gn(e,t){if("change"===e)return t}var Bn=!1;if(Gt){var Wn;if(Gt){var Un="oninput"in document;if(!Un){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),Un="function"===typeof Vn.oninput}Wn=Un}else Wn=!1;Bn=Wn&&(!document.documentMode||9<document.documentMode)}function Kn(){jn&&(jn.detachEvent("onpropertychange",qn),zn=jn=null)}function qn(e){if("value"===e.propertyName&&Fn(zn)){var t=[];In(t,zn,e,Lt(e)),Ht(Hn,t)}}function Yn(e,t,n){"focusin"===e?(Kn(),zn=n,(jn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Kn()}function Qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(zn)}function $n(e,t){if("click"===e)return Fn(t)}function Xn(e,t){if("input"===e||"change"===e)return Fn(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!re.call(t,a)||!Zn(e[a],t[a]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Gt&&"documentMode"in document&&11>=document.documentMode,or=null,lr=null,sr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==or||or!==mt(r)||("selectionStart"in(r=or)&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Jn(sr,r)||(sr=r,0<(r=rd(lr,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},pr={},fr={};function mr(e){if(pr[e])return pr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return pr[e]=n[t];return e}Gt&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),br=mr("transitionrun"),wr=mr("transitionstart"),Sr=mr("transitioncancel"),Er=mr("transitionend"),kr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){kr.set(e,t),rt(t,[e])}xr.push("scrollEnd");var Cr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Pr=[],_r=0,Rr=0;function Tr(){for(var e=_r,t=Rr=_r=0;t<e;){var n=Pr[t];Pr[t++]=null;var r=Pr[t];Pr[t++]=null;var a=Pr[t];Pr[t++]=null;var i=Pr[t];if(Pr[t++]=null,null!==r&&null!==a){var o=r.pending;null===o?a.next=a:(a.next=o.next,o.next=a),r.pending=a}0!==i&&Lr(n,a,i)}}function Nr(e,t,n,r){Pr[_r++]=e,Pr[_r++]=t,Pr[_r++]=n,Pr[_r++]=r,Rr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Or(e,t,n,r){return Nr(e,t,n,r),Mr(e)}function Dr(e,t){return Nr(e,null,null,t),Mr(e)}function Lr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-we(n),null===(r=(e=i.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),i):null}function Mr(e){if(50<Uc)throw Uc=0,Vc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ir={};function jr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(e,t,n,r){return new jr(e,t,n,r)}function Hr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=zr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Gr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,a,i){var l=0;if(r=e,"function"===typeof e)Hr(e)&&(l=1);else if("string"===typeof e)l=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case P:return(e=zr(31,n,t,a)).elementType=P,e.lanes=i,e;case y:return Wr(n.children,a,i,t);case v:l=8,a|=24;break;case b:return(e=zr(12,n,t,2|a)).elementType=b,e.lanes=i,e;case k:return(e=zr(13,n,t,a)).elementType=k,e.lanes=i,e;case x:return(e=zr(19,n,t,a)).elementType=x,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:l=10;break e;case w:l=9;break e;case E:l=11;break e;case A:l=14;break e;case C:l=16,r=null;break e}l=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=zr(l,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Wr(e,t,n,r){return(e=zr(7,e,r,t)).lanes=n,e}function Ur(e,t,n){return(e=zr(6,e,null,t)).lanes=n,e}function Vr(e){var t=zr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=zr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=new WeakMap;function Yr(e,t){if("object"===typeof e&&null!==e){var n=qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},qr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Qr=[],$r=0,Xr=null,Zr=0,Jr=[],ea=0,ta=null,na=1,ra="";function aa(e,t){Qr[$r++]=Zr,Qr[$r++]=Xr,Xr=e,Zr=t}function ia(e,t,n){Jr[ea++]=na,Jr[ea++]=ra,Jr[ea++]=ta,ta=e;var r=na;e=ra;var a=32-we(r)-1;r&=~(1<<a),n+=1;var i=32-we(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,na=1<<32-we(t)+a|n<<a|r,ra=i+e}else na=1<<i|n<<a|r,ra=e}function oa(e){null!==e.return&&(aa(e,1),ia(e,1,0))}function la(e){for(;e===Xr;)Xr=Qr[--$r],Qr[$r]=null,Zr=Qr[--$r],Qr[$r]=null;for(;e===ta;)ta=Jr[--ea],Jr[ea]=null,ra=Jr[--ea],Jr[ea]=null,na=Jr[--ea],Jr[ea]=null}function sa(e,t){Jr[ea++]=na,Jr[ea++]=ra,Jr[ea++]=ta,na=t.id,ra=t.overflow,ta=e}var ca=null,ua=null,da=!1,ha=null,pa=!1,fa=Error(o(519));function ma(e){throw Sa(Yr(Error(o(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),fa}function ga(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ge]=e,t[Be]=r,n){case"dialog":$u("cancel",t),$u("close",t);break;case"iframe":case"object":case"embed":$u("load",t);break;case"video":case"audio":for(n=0;n<qu.length;n++)$u(qu[n],t);break;case"source":$u("error",t);break;case"img":case"image":case"link":$u("error",t),$u("load",t);break;case"details":$u("toggle",t);break;case"input":$u("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":$u("invalid",t);break;case"textarea":$u("invalid",t),kt(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&($u("beforetoggle",t),$u("toggle",t)),null!=r.onScroll&&$u("scroll",t),null!=r.onScrollEnd&&$u("scrollend",t),null!=r.onClick&&(t.onclick=Ot),t=!0):t=!1,t||ma(e,!0)}function ya(e){for(ca=e.return;ca;)switch(ca.tag){case 5:case 31:case 13:return void(pa=!1);case 27:case 3:return void(pa=!0);default:ca=ca.return}}function va(e){if(e!==ca)return!1;if(!da)return ya(e),da=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bd(e.type,e.memoizedProps)),t=!t),t&&ua&&ma(e),ya(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ua=Md(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));ua=Md(e)}else 27===n?(n=ua,Cd(e.type)?(e=Ld,Ld=null,ua=e):ua=n):ua=ca?Dd(e.stateNode.nextSibling):null;return!0}function ba(){ua=ca=null,da=!1}function wa(){var e=ha;return null!==e&&(null===Tc?Tc=e:Tc.push.apply(Tc,e),ha=null),e}function Sa(e){null===ha?ha=[e]:ha.push(e)}var Ea=H(null),ka=null,xa=null;function Aa(e,t,n){G(Ea,t._currentValue),t._currentValue=n}function Ca(e){e._currentValue=Ea.current,F(Ea)}function Pa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var l=a.child;i=i.firstContext;e:for(;null!==i;){var s=i;i=a;for(var c=0;c<t.length;c++)if(s.context===t[c]){i.lanes|=n,null!==(s=i.alternate)&&(s.lanes|=n),Pa(i.return,n,e),r||(l=null);break e}i=s.next}}else if(18===a.tag){if(null===(l=a.return))throw Error(o(341));l.lanes|=n,null!==(i=l.alternate)&&(i.lanes|=n),Pa(l,n,e),l=null}else l=a.child;if(null!==l)l.return=a;else for(l=a;null!==l;){if(l===e){l=null;break}if(null!==(a=l.sibling)){a.return=l.return,l=a;break}l=l.return}a=l}}function Ra(e,t,n,r){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(0!==(524288&a.flags))i=!0;else if(0!==(262144&a.flags))break;if(10===a.tag){var l=a.alternate;if(null===l)throw Error(o(387));if(null!==(l=l.memoizedProps)){var s=a.type;Zn(a.pendingProps.value,l.value)||(null!==e?e.push(s):e=[s])}}else if(a===q.current){if(null===(l=a.alternate))throw Error(o(387));l.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}a=a.return}null!==e&&_a(t,e,n,r),t.flags|=262144}function Ta(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Na(e){ka=e,xa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Oa(e){return La(ka,e)}function Da(e,t){return null===ka&&Na(e),La(e,t)}function La(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===xa){if(null===e)throw Error(o(308));xa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xa=xa.next=t;return n}var Ma="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ia=r.unstable_scheduleCallback,ja=r.unstable_NormalPriority,za={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ha(){return{controller:new Ma,data:new Map,refCount:0}}function Fa(e){e.refCount--,0===e.refCount&&Ia(ja,function(){e.controller.abort()})}var Ga=null,Ba=0,Wa=0,Ua=null;function Va(){if(0===--Ba&&null!==Ga){null!==Ua&&(Ua.status="fulfilled");var e=Ga;Ga=null,Wa=0,Ua=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ka=L.S;L.S=function(e,t){Dc=se(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ga){var n=Ga=[];Ba=0,Wa=Bu(),Ua={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ba++,t.then(Va,Va)}(0,t),null!==Ka&&Ka(e,t)};var qa=H(null);function Ya(){var e=qa.current;return null!==e?e:fc.pooledCache}function Qa(e,t){G(qa,null===t?qa.current:t.pool)}function $a(){var e=Ya();return null===e?null:{parent:za._currentValue,pool:e}}var Xa=Error(o(460)),Za=Error(o(474)),Ja=Error(o(542)),ei={then:function(){}};function ti(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ni(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ot,Ot),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ot,Ot);else{if(null!==(e=fc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e}throw ai=t,Xa}}function ri(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ai=t,Xa;throw t}}var ai=null;function ii(){if(null===ai)throw Error(o(459));var e=ai;return ai=null,e}function oi(e){if(e===Xa||e===Ja)throw Error(o(483))}var li=null,si=0;function ci(e){var t=si;return si+=1,null===li&&(li=[]),ni(li,e,t)}function ui(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function di(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ur(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===C&&ri(i)===t.type)?(ui(t=a(t,n.props),n),t.return=e,t):(ui(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Wr(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ur(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return ui(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case C:return h(e,t=ri(t),n)}if(D(t)||T(t))return(t=Wr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ci(t),n);if(t.$$typeof===S)return h(e,Da(e,t),n);di(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==a?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===a?c(e,t,n,r):null;case g:return n.key===a?u(e,t,n,r):null;case C:return p(e,t,n=ri(n),r)}if(D(n)||T(n))return null!==a?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,ci(n),r);if(n.$$typeof===S)return p(e,t,Da(e,n),r);di(e,n)}return null}function f(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case C:return f(e,t,n,r=ri(r),a)}if(D(r)||T(r))return d(t,e=e.get(n)||null,r,a,null);if("function"===typeof r.then)return f(e,t,n,ci(r),a);if(r.$$typeof===S)return f(e,t,n,Da(t,r),a);di(t,r)}return null}function v(s,c,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===y){if(7===c.tag){n(s,c.sibling),(d=a(c,u.props.children)).return=s,s=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===C&&ri(b)===c.type){n(s,c.sibling),ui(d=a(c,u.props),u),d.return=s,s=d;break e}n(s,c);break}t(s,c),c=c.sibling}u.type===y?((d=Wr(u.props.children,s.mode,d,u.key)).return=s,s=d):(ui(d=Br(u.type,u.key,u.props,null,s.mode,d),u),d.return=s,s=d)}return l(s);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(s,c.sibling),(d=a(c,u.children||[])).return=s,s=d;break e}n(s,c);break}t(s,c),c=c.sibling}(d=Kr(u,s.mode,d)).return=s,s=d}return l(s);case C:return v(s,c,u=ri(u),d)}if(D(u))return function(a,o,l,s){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<l.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(a,d,l[m],s);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(a,d),o=i(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===l.length)return n(a,d),da&&aa(a,m),c;if(null===d){for(;m<l.length;m++)null!==(d=h(a,l[m],s))&&(o=i(d,o,m),null===u?c=d:u.sibling=d,u=d);return da&&aa(a,m),c}for(d=r(d);m<l.length;m++)null!==(g=f(d,a,m,l[m],s))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=i(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),da&&aa(a,m),c}(s,c,u,d);if(T(u)){if("function"!==typeof(b=T(u)))throw Error(o(150));return function(a,l,s,c){if(null==s)throw Error(o(151));for(var u=null,d=null,m=l,g=l=0,y=null,v=s.next();null!==m&&!v.done;g++,v=s.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(a,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(a,m),l=i(b,l,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(a,m),da&&aa(a,g),u;if(null===m){for(;!v.done;g++,v=s.next())null!==(v=h(a,v.value,c))&&(l=i(v,l,g),null===d?u=v:d.sibling=v,d=v);return da&&aa(a,g),u}for(m=r(m);!v.done;g++,v=s.next())null!==(v=f(m,a,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),l=i(v,l,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),da&&aa(a,g),u}(s,c,u=b.call(u),d)}if("function"===typeof u.then)return v(s,c,ci(u),d);if(u.$$typeof===S)return v(s,c,Da(s,u),d);di(s,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(s,c.sibling),(d=a(c,u)).return=s,s=d):(n(s,c),(d=Ur(u,s.mode,d)).return=s,s=d),l(s)):n(s,c)}return function(e,t,n,r){try{si=0;var a=v(e,t,n,r);return li=null,a}catch(o){if(o===Xa||o===Ja)throw o;var i=zr(29,o,null,e.mode);return i.lanes=r,i.return=e,i}}}var pi=hi(!0),fi=hi(!1),mi=!1;function gi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Mr(e),Lr(e,null,n),t}return Nr(e,r,t,n),Mr(e)}function wi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Le(e,n)}}function Si(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ei=!1;function ki(){if(Ei){if(null!==Ua)throw Ua}}function xi(e,t,n,r){Ei=!1;var a=e.updateQueue;mi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var s=l,c=s.next;s.next=null,null===o?i=c:o.next=c,o=s;var u=e.alternate;null!==u&&((l=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===l?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=s))}if(null!==i){var d=a.baseState;for(o=0,u=c=s=null,l=i;;){var h=-536870913&l.lane,f=h!==l.lane;if(f?(gc&h)===h:(r&h)===h){0!==h&&h===Wa&&(Ei=!0),null!==u&&(u=u.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var m=e,g=l;h=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(y,d,h):m)||void 0===h)break e;d=p({},d,h);break e;case 2:mi=!0}}null!==(h=l.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=a.callbacks)?a.callbacks=[h]:f.push(h))}else f={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(c=u=f,s=d):u=u.next=f,o|=h;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(f=l).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}null===u&&(s=d),a.baseState=s,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null===i&&(a.shared.lanes=0),xc|=o,e.lanes=o,e.memoizedState=d}}function Ai(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Ci(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ai(n[e],t)}var Pi=H(null),_i=H(0);function Ri(e,t){G(_i,e=Ec),G(Pi,t),Ec=e|t.baseLanes}function Ti(){G(_i,Ec),G(Pi,Pi.current)}function Ni(){Ec=_i.current,F(Pi),F(_i)}var Oi=H(null),Di=null;function Li(e){var t=e.alternate;G(Hi,1&Hi.current),G(Oi,e),null===Di&&(null===t||null!==Pi.current||null!==t.memoizedState)&&(Di=e)}function Mi(e){G(Hi,Hi.current),G(Oi,e),null===Di&&(Di=e)}function Ii(e){22===e.tag?(G(Hi,Hi.current),G(Oi,e),null===Di&&(Di=e)):ji()}function ji(){G(Hi,Hi.current),G(Oi,Oi.current)}function zi(e){F(Oi),Di===e&&(Di=null),F(Hi)}var Hi=H(0);function Fi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Nd(n)||Od(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gi=0,Bi=null,Wi=null,Ui=null,Vi=!1,Ki=!1,qi=!1,Yi=0,Qi=0,$i=null,Xi=0;function Zi(){throw Error(o(321))}function Ji(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function eo(e,t,n,r,a,i){return Gi=i,Bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?gl:yl,qi=!1,i=n(r,a),qi=!1,Ki&&(i=no(t,n,r,a)),to(e),i}function to(e){L.H=ml;var t=null!==Wi&&null!==Wi.next;if(Gi=0,Ui=Wi=Bi=null,Vi=!1,Qi=0,$i=null,t)throw Error(o(300));null===e||Dl||null!==(e=e.dependencies)&&Ta(e)&&(Dl=!0)}function no(e,t,n,r){Bi=e;var a=0;do{if(Ki&&($i=null),Qi=0,Ki=!1,25<=a)throw Error(o(301));if(a+=1,Ui=Wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}L.H=vl,i=t(n,r)}while(Ki);return i}function ro(){var e=L.H,t=e.useState()[0];return t="function"===typeof t.then?co(t):t,e=e.useState()[0],(null!==Wi?Wi.memoizedState:null)!==e&&(Bi.flags|=1024),t}function ao(){var e=0!==Yi;return Yi=0,e}function io(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oo(e){if(Vi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Vi=!1}Gi=0,Ui=Wi=Bi=null,Ki=!1,Qi=Yi=0,$i=null}function lo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ui?Bi.memoizedState=Ui=e:Ui=Ui.next=e,Ui}function so(){if(null===Wi){var e=Bi.alternate;e=null!==e?e.memoizedState:null}else e=Wi.next;var t=null===Ui?Bi.memoizedState:Ui.next;if(null!==t)Ui=t,Wi=e;else{if(null===e){if(null===Bi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Wi=e).memoizedState,baseState:Wi.baseState,baseQueue:Wi.baseQueue,queue:Wi.queue,next:null},null===Ui?Bi.memoizedState=Ui=e:Ui=Ui.next=e}return Ui}function co(e){var t=Qi;return Qi+=1,null===$i&&($i=[]),e=ni($i,e,t),t=Bi,null===(null===Ui?t.memoizedState:Ui.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?gl:yl),e}function uo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return co(e);if(e.$$typeof===S)return Oa(e)}throw Error(o(438,String(e)))}function ho(e){var t=null,n=Bi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Bi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Bi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=_;return t.index++,n}function po(e,t){return"function"===typeof t?t(e):t}function fo(e){return mo(so(),Wi,e)}function mo(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var a=e.baseQueue,i=r.pending;if(null!==i){if(null!==a){var l=a.next;a.next=i.next,i.next=l}t.baseQueue=a=i,r.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var s=l=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(Gi&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Wa&&(d=!0);else{if((Gi&p)===p){u=u.next,p===Wa&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(s=c=h,l=i):c=c.next=h,Bi.lanes|=p,xc|=p}h=u.action,qi&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(s=c=p,l=i):c=c.next=p,Bi.lanes|=h,xc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?l=i:c.next=s,!Zn(i,e.memoizedState)&&(Dl=!0,d&&null!==(n=Ua)))throw n;e.memoizedState=i,e.baseState=l,e.baseQueue=c,r.lastRenderedState=i}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function go(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var l=a=a.next;do{i=e(i,l.action),l=l.next}while(l!==a);Zn(i,t.memoizedState)||(Dl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function yo(e,t,n){var r=Bi,a=so(),i=da;if(i){if(void 0===n)throw Error(o(407));n=n()}else n=t();var l=!Zn((Wi||a).memoizedState,n);if(l&&(a.memoizedState=n,Dl=!0),a=a.queue,Bo(wo.bind(null,r,a,e),[e]),a.getSnapshot!==t||l||null!==Ui&&1&Ui.memoizedState.tag){if(r.flags|=2048,jo(9,{destroy:void 0},bo.bind(null,r,a,n,t),null),null===fc)throw Error(o(349));i||0!==(127&Gi)||vo(r,t,n)}return n}function vo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bo(e,t,n,r){t.value=n,t.getSnapshot=r,So(t)&&Eo(e)}function wo(e,t,n){return n(function(){So(t)&&Eo(e)})}function So(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(r){return!0}}function Eo(e){var t=Dr(e,2);null!==t&&Yc(t,e,2)}function ko(e){var t=lo();if("function"===typeof e){var n=e;if(e=n(),qi){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:e},t}function xo(e,t,n,r){return e.baseState=n,mo(e,Wi,"function"===typeof r?r:po)}function Ao(e,t,n,r,a){if(hl(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==L.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,Co(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Co(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var i=L.T,o={};L.T=o;try{var l=n(a,r),s=L.S;null!==s&&s(o,l),Po(e,t,l)}catch(c){Ro(e,t,c)}finally{null!==i&&null!==o.types&&(i.types=o.types),L.T=i}}else try{Po(e,t,i=n(a,r))}catch(u){Ro(e,t,u)}}function Po(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){_o(e,t,n)},function(n){return Ro(e,t,n)}):_o(e,t,n)}function _o(e,t,n){t.status="fulfilled",t.value=n,To(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Co(e,n)))}function Ro(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,To(t),t=t.next}while(t!==r)}e.action=null}function To(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function No(e,t){return t}function Oo(e,t){if(da){var n=fc.formState;if(null!==n){e:{var r=Bi;if(da){if(ua){t:{for(var a=ua,i=pa;8!==a.nodeType;){if(!i){a=null;break t}if(null===(a=Dd(a.nextSibling))){a=null;break t}}a="F!"===(i=a.data)||"F"===i?a:null}if(a){ua=Dd(a.nextSibling),r="F!"===a.data;break e}}ma(r)}r=!1}r&&(t=n[0])}}return(n=lo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},n.queue=r,n=cl.bind(null,Bi,r),r.dispatch=n,r=ko(!1),i=dl.bind(null,Bi,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=lo()).queue=a,n=Ao.bind(null,Bi,a,i,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function Do(e){return Lo(so(),Wi,e)}function Lo(e,t,n){if(t=mo(e,t,No)[0],e=fo(po)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=co(t)}catch(o){if(o===Xa)throw Ja;throw o}else r=t;var a=(t=so()).queue,i=a.dispatch;return n!==t.memoizedState&&(Bi.flags|=2048,jo(9,{destroy:void 0},Mo.bind(null,a,n),null)),[r,i,e]}function Mo(e,t){e.action=t}function Io(e){var t=so(),n=Wi;if(null!==n)return Lo(t,n,e);so(),t=t.memoizedState;var r=(n=so()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function jo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Bi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return so().memoizedState}function Ho(e,t,n,r){var a=lo();Bi.flags|=e,a.memoizedState=jo(1|t,{destroy:void 0},n,void 0===r?null:r)}function Fo(e,t,n,r){var a=so();r=void 0===r?null:r;var i=a.memoizedState.inst;null!==Wi&&null!==r&&Ji(r,Wi.memoizedState.deps)?a.memoizedState=jo(t,i,n,r):(Bi.flags|=e,a.memoizedState=jo(1|t,i,n,r))}function Go(e,t){Ho(8390656,8,e,t)}function Bo(e,t){Fo(2048,8,e,t)}function Wo(e){var t=so().memoizedState;return function(e){Bi.flags|=4;var t=Bi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Bi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Uo(e,t){return Fo(4,2,e,t)}function Vo(e,t){return Fo(4,4,e,t)}function Ko(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function qo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,Ko.bind(null,t,e),n)}function Yo(){}function Qo(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ji(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ji(t,r[1]))return r[0];if(r=e(),qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Xo(e,t,n){return void 0===n||0!==(1073741824&Gi)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=qc(),Bi.lanes|=e,xc|=e,n)}function Zo(e,t,n,r){return Zn(n,t)?n:null!==Pi.current?(e=Xo(e,n,r),Zn(e,t)||(Dl=!0),e):0===(42&Gi)||0!==(1073741824&Gi)&&0===(261930&gc)?(Dl=!0,e.memoizedState=n):(e=qc(),Bi.lanes|=e,xc|=e,t)}function Jo(e,t,n,r,a){var i=M.p;M.p=0!==i&&8>i?i:8;var o=L.T,l={};L.T=l,dl(e,!1,t,n);try{var s=a(),c=L.S;if(null!==c&&c(l,s),null!==s&&"object"===typeof s&&"function"===typeof s.then)ul(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(s,r),Kc());else ul(e,t,r,Kc())}catch(u){ul(e,t,{then:function(){},status:"rejected",reason:u},Kc())}finally{M.p=i,null!==o&&null!==l.types&&(o.types=l.types),L.T=o}}function el(){}function tl(e,t,n,r){if(5!==e.tag)throw Error(o(476));var a=nl(e).queue;Jo(e,a,t,I,null===n?el:function(){return rl(e),n(r)})}function nl(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:I},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function rl(e){var t=nl(e);null===t.next&&(t=e.alternate.memoizedState),ul(e,t.next.queue,{},Kc())}function al(){return Oa(uh)}function il(){return so().memoizedState}function ol(){return so().memoizedState}function ll(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Kc(),r=bi(t,e=vi(n),n);return null!==r&&(Yc(r,t,n),wi(r,t,n)),t={cache:Ha()},void(e.payload=t)}t=t.return}}function sl(e,t,n){var r=Kc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hl(e)?pl(t,n):null!==(n=Or(e,t,n,r))&&(Yc(n,e,r),fl(n,t,r))}function cl(e,t,n){ul(e,t,n,Kc())}function ul(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hl(e))pl(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,Zn(l,o))return Nr(e,t,a,0),null===fc&&Tr(),!1}catch(s){}if(null!==(n=Or(e,t,a,r)))return Yc(n,e,r),fl(n,t,r),!0}return!1}function dl(e,t,n,r){if(r={lane:2,revertLane:Bu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},hl(e)){if(t)throw Error(o(479))}else null!==(t=Or(e,n,r,2))&&Yc(t,e,2)}function hl(e){var t=e.alternate;return e===Bi||null!==t&&t===Bi}function pl(e,t){Ki=Vi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fl(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Le(e,n)}}var ml={readContext:Oa,use:uo,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useLayoutEffect:Zi,useInsertionEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useSyncExternalStore:Zi,useId:Zi,useHostTransitionStatus:Zi,useFormState:Zi,useActionState:Zi,useOptimistic:Zi,useMemoCache:Zi,useCacheRefresh:Zi};ml.useEffectEvent=Zi;var gl={readContext:Oa,use:uo,useCallback:function(e,t){return lo().memoizedState=[e,void 0===t?null:t],e},useContext:Oa,useEffect:Go,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ho(4194308,4,e,t)},useInsertionEffect:function(e,t){Ho(4,2,e,t)},useMemo:function(e,t){var n=lo();t=void 0===t?null:t;var r=e();if(qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=lo();if(void 0!==n){var a=n(t);if(qi){be(!0);try{n(t)}finally{be(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=sl.bind(null,Bi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},lo().memoizedState=e},useState:function(e){var t=(e=ko(e)).queue,n=cl.bind(null,Bi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yo,useDeferredValue:function(e,t){return Xo(lo(),e,t)},useTransition:function(){var e=ko(!1);return e=Jo.bind(null,Bi,e.queue,!0,!1),lo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Bi,a=lo();if(da){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===fc)throw Error(o(349));0!==(127&gc)||vo(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Go(wo.bind(null,r,i,e),[e]),r.flags|=2048,jo(9,{destroy:void 0},bo.bind(null,r,i,n,t),null),n},useId:function(){var e=lo(),t=fc.identifierPrefix;if(da){var n=ra;t="_"+t+"R_"+(n=(na&~(1<<32-we(na)-1)).toString(32)+n),0<(n=Yi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Xi++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:al,useFormState:Oo,useActionState:Oo,useOptimistic:function(e){var t=lo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=dl.bind(null,Bi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ho,useCacheRefresh:function(){return lo().memoizedState=ll.bind(null,Bi)},useEffectEvent:function(e){var t=lo(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(o(440));return n.impl.apply(void 0,arguments)}}},yl={readContext:Oa,use:uo,useCallback:Qo,useContext:Oa,useEffect:Bo,useImperativeHandle:qo,useInsertionEffect:Uo,useLayoutEffect:Vo,useMemo:$o,useReducer:fo,useRef:zo,useState:function(){return fo(po)},useDebugValue:Yo,useDeferredValue:function(e,t){return Zo(so(),Wi.memoizedState,e,t)},useTransition:function(){var e=fo(po)[0],t=so().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:il,useHostTransitionStatus:al,useFormState:Do,useActionState:Do,useOptimistic:function(e,t){return xo(so(),0,e,t)},useMemoCache:ho,useCacheRefresh:ol};yl.useEffectEvent=Wo;var vl={readContext:Oa,use:uo,useCallback:Qo,useContext:Oa,useEffect:Bo,useImperativeHandle:qo,useInsertionEffect:Uo,useLayoutEffect:Vo,useMemo:$o,useReducer:go,useRef:zo,useState:function(){return go(po)},useDebugValue:Yo,useDeferredValue:function(e,t){var n=so();return null===Wi?Xo(n,e,t):Zo(n,Wi.memoizedState,e,t)},useTransition:function(){var e=go(po)[0],t=so().memoizedState;return["boolean"===typeof e?e:co(e),t]},useSyncExternalStore:yo,useId:il,useHostTransitionStatus:al,useFormState:Io,useActionState:Io,useOptimistic:function(e,t){var n=so();return null!==Wi?xo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ho,useCacheRefresh:ol};function bl(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vl.useEffectEvent=Wo;var wl={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kc(),a=vi(r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=bi(e,a,r))&&(Yc(t,e,r),wi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kc(),a=vi(r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=bi(e,a,r))&&(Yc(t,e,r),wi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kc(),r=vi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=bi(e,r,n))&&(Yc(t,e,n),wi(t,e,n))}};function Sl(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(a,i))}function El(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wl.enqueueReplaceState(t,t.state,null)}function kl(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=p({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}function xl(e){Cr(e)}function Al(e){console.error(e)}function Cl(e){Cr(e)}function Pl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function _l(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Rl(e,t,n){return(n=vi(n)).tag=3,n.payload={element:null},n.callback=function(){Pl(e,t)},n}function Tl(e){return(e=vi(e)).tag=3,e}function Nl(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"===typeof a){var i=r.value;e.payload=function(){return a(i)},e.callback=function(){_l(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){_l(t,n,r),"function"!==typeof a&&(null===Ic?Ic=new Set([this]):Ic.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ol=Error(o(461)),Dl=!1;function Ll(e,t,n,r){t.child=null===e?fi(t,null,n,r):pi(t,e.child,n,r)}function Ml(e,t,n,r,a){n=n.render;var i=t.ref;if("ref"in r){var o={};for(var l in r)"ref"!==l&&(o[l]=r[l])}else o=r;return Na(t),r=eo(e,t,n,o,i,a),l=ao(),null===e||Dl?(da&&l&&oa(t),t.flags|=1,Ll(e,t,r,a),t.child):(io(e,t,a),as(e,t,a))}function Il(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Hr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,jl(e,t,i,r,a))}if(i=e.child,!is(e,a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(o,r)&&e.ref===t.ref)return as(e,t,a)}return t.flags|=1,(e=Fr(i,r)).ref=t.ref,e.return=t,t.child=e}function jl(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(Jn(i,r)&&e.ref===t.ref){if(Dl=!1,t.pendingProps=r=i,!is(e,a))return t.lanes=e.lanes,as(e,t,a);0!==(131072&e.flags)&&(Dl=!0)}}return Ul(e,t,n,r,a)}function zl(e,t,n,r){var a=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,a=0;null!==r;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~i}else r=0,t.child=null;return Fl(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Fl(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Qa(0,null!==i?i.cachePool:null),null!==i?Ri(t,i):Ti(),Ii(t)}else null!==i?(Qa(0,i.cachePool),Ri(t,i),ji(),t.memoizedState=null):(null!==e&&Qa(0,null),Ti(),ji());return Ll(e,t,a,n),t.child}function Hl(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Fl(e,t,n,r,a){var i=Ya();return i=null===i?null:{parent:za._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Qa(0,null),Ti(),Ii(t),null!==e&&Ra(e,t,r,!0),t.childLanes=a,null}function Gl(e,t){return(t=Jl({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Bl(e,t,n){return pi(t,e.child,null,n),(e=Gl(t,t.pendingProps)).flags|=2,zi(t),t.memoizedState=null,e}function Wl(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ul(e,t,n,r,a){return Na(t),n=eo(e,t,n,r,void 0,a),r=ao(),null===e||Dl?(da&&r&&oa(t),t.flags|=1,Ll(e,t,n,a),t.child):(io(e,t,a),as(e,t,a))}function Vl(e,t,n,r,a,i){return Na(t),t.updateQueue=null,n=no(t,r,n,a),to(e),r=ao(),null===e||Dl?(da&&r&&oa(t),t.flags|=1,Ll(e,t,n,i),t.child):(io(e,t,i),as(e,t,i))}function Kl(e,t,n,r,a){if(Na(t),null===t.stateNode){var i=Ir,o=n.contextType;"object"===typeof o&&null!==o&&(i=Oa(o)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=wl,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},gi(t),o=n.contextType,i.context="object"===typeof o&&null!==o?Oa(o):Ir,i.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(bl(t,n,o,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&wl.enqueueReplaceState(i,i.state,null),xi(t,r,i,a),ki(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var l=t.memoizedProps,s=kl(n,l);i.props=s;var c=i.context,u=n.contextType;o=Ir,"object"===typeof u&&null!==u&&(o=Oa(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,l=t.pendingProps!==l,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l||c!==o)&&El(t,i,r,o),mi=!1;var h=t.memoizedState;i.state=h,xi(t,r,i,a),ki(),c=t.memoizedState,l||h!==c||mi?("function"===typeof d&&(bl(t,n,d,r),c=t.memoizedState),(s=mi||Sl(t,n,s,r,h,c,o))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=o,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,yi(e,t),u=kl(n,o=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,s=Ir,"object"===typeof c&&null!==c&&(s=Oa(c)),(c="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==s)&&El(t,i,r,s),mi=!1,h=t.memoizedState,i.state=h,xi(t,r,i,a),ki();var p=t.memoizedState;o!==d||h!==p||mi||null!==e&&null!==e.dependencies&&Ta(e.dependencies)?("function"===typeof l&&(bl(t,n,l,r),p=t.memoizedState),(u=mi||Sl(t,n,u,r,h,p,s)||null!==e&&null!==e.dependencies&&Ta(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,s),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=s,r=u):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Wl(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=pi(t,e.child,null,a),t.child=pi(t,null,n,a)):Ll(e,t,n,a),t.memoizedState=i.state,e=t.child):e=as(e,t,a),e}function ql(e,t,n,r){return ba(),t.flags|=256,Ll(e,t,n,r),t.child}var Yl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ql(e){return{baseLanes:e,cachePool:$a()}}function $l(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Pc),e}function Xl(e,t,n){var r,a=t.pendingProps,i=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Hi.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(da){if(i?Li(t):ji(),(e=ua)?null!==(e=null!==(e=Td(e,pa))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Vr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ma(t);return Od(e)?t.lanes=32:t.lanes=536870912,null}var s=a.children;return a=a.fallback,i?(ji(),s=Jl({mode:"hidden",children:s},i=t.mode),a=Wr(a,i,n,null),s.return=t,a.return=t,s.sibling=a,t.child=s,(a=t.child).memoizedState=Ql(n),a.childLanes=$l(e,r,n),t.memoizedState=Yl,Hl(null,a)):(Li(t),Zl(t,s))}var c=e.memoizedState;if(null!==c&&null!==(s=c.dehydrated)){if(l)256&t.flags?(Li(t),t.flags&=-257,t=es(e,t,n)):null!==t.memoizedState?(ji(),t.child=e.child,t.flags|=128,t=null):(ji(),s=a.fallback,i=t.mode,a=Jl({mode:"visible",children:a.children},i),(s=Wr(s,i,n,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,pi(t,e.child,null,n),(a=t.child).memoizedState=Ql(n),a.childLanes=$l(e,r,n),t.memoizedState=Yl,t=Hl(null,a));else if(Li(t),Od(s)){if(r=s.nextSibling&&s.nextSibling.dataset)var u=r.dgst;r=u,(a=Error(o(419))).stack="",a.digest=r,Sa({value:a,source:null,stack:null}),t=es(e,t,n)}else if(Dl||Ra(e,t,n,!1),r=0!==(n&e.childLanes),Dl||r){if(null!==(r=fc)&&(0!==(a=Me(r,n))&&a!==c.retryLane))throw c.retryLane=a,Dr(e,a),Yc(r,e,a),Ol;Nd(s)||ou(),t=es(e,t,n)}else Nd(s)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ua=Dd(s.nextSibling),ca=t,da=!0,ha=null,pa=!1,null!==e&&sa(t,e),(t=Zl(t,a.children)).flags|=4096);return t}return i?(ji(),s=a.fallback,i=t.mode,u=(c=e.child).sibling,(a=Fr(c,{mode:"hidden",children:a.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?s=Fr(u,s):(s=Wr(s,i,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,Hl(null,a),a=t.child,null===(s=e.child.memoizedState)?s=Ql(n):(null!==(i=s.cachePool)?(c=za._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=$a(),s={baseLanes:s.baseLanes|n,cachePool:i}),a.memoizedState=s,a.childLanes=$l(e,r,n),t.memoizedState=Yl,Hl(e.child,a)):(Li(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zl(e,t){return(t=Jl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Jl(e,t){return(e=zr(22,e,null,t)).lanes=0,e}function es(e,t,n){return pi(t,e.child,null,n),(e=Zl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ts(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Pa(e.return,t,n)}function ns(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.treeForkCount=i)}function rs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;r=r.children;var o=Hi.current,l=0!==(2&o);if(l?(o=1&o|2,t.flags|=128):o&=1,G(Hi,o),Ll(e,t,r,n),r=da?Zr:0,!l&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ts(e,n,t);else if(19===e.tag)ts(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Fi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),ns(t,!1,a,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Fi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}ns(t,!0,n,null,i,r);break;case"together":ns(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),xc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ra(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function is(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ta(e))}function os(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Dl=!0;else{if(!is(e,n)&&0===(128&t.flags))return Dl=!1,function(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),Aa(0,za,e.memoizedState.cache),ba();break;case 27:case 5:$(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:Aa(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Mi(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Li(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Xl(e,t,n):(Li(t),null!==(e=as(e,t,n))?e.sibling:null);Li(t);break;case 19:var a=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ra(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return rs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(Hi,Hi.current),r)break;return null;case 22:return t.lanes=0,zl(e,t,n,t.pendingProps);case 24:Aa(0,za,e.memoizedState.cache)}return as(e,t,n)}(e,t,n);Dl=0!==(131072&e.flags)}else Dl=!1,da&&0!==(1048576&t.flags)&&ia(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ri(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var a=e.$$typeof;if(a===E){t.tag=11,t=Ml(null,t,e,r,n);break e}if(a===A){t.tag=14,t=Il(null,t,e,r,n);break e}}throw t=O(e)||e,Error(o(306,t,""))}Hr(e)?(r=kl(e,r),t.tag=1,t=Kl(null,t,e,r,n)):(t.tag=0,t=Ul(null,t,e,r,n))}return t;case 0:return Ul(e,t,t.type,t.pendingProps,n);case 1:return Kl(e,t,r=t.type,a=kl(r,t.pendingProps),n);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var i=t.memoizedState;a=i.element,yi(e,t),xi(t,r,null,n);var l=t.memoizedState;if(r=l.cache,Aa(0,za,r),r!==i.cache&&_a(t,[za],n,!0),ki(),r=l.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=ql(e,t,r,n);break e}if(r!==a){Sa(a=Yr(Error(o(424)),t)),t=ql(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ua=Dd(e.firstChild),ca=t,da=!0,ha=null,pa=!0,n=fi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ba(),r===a){t=as(e,t,n);break e}Ll(e,t,r,n)}t=t.child}return t;case 26:return Wl(e,t),null===e?(n=Vd(t.type,null,t.pendingProps,null))?t.memoizedState=n:da||(n=t.type,e=t.pendingProps,(r=gd(K.current).createElement(n))[Ge]=t,r[Be]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Vd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&da&&(r=t.stateNode=jd(t.type,t.pendingProps,K.current),ca=t,pa=!0,a=ua,Cd(t.type)?(Ld=a,ua=Dd(r.firstChild)):ua=a),Ll(e,t,t.pendingProps.children,n),Wl(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&da&&((a=r=ua)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===i)return e}if(null===(e=Dd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,pa))?(t.stateNode=r,ca=t,ua=Dd(r.firstChild),pa=!1,a=!0):a=!1),a||ma(t)),$(t),a=t.type,i=t.pendingProps,l=null!==e?e.memoizedProps:null,r=i.children,bd(a,i)?r=null:null!==l&&bd(a,l)&&(t.flags|=32),null!==t.memoizedState&&(a=eo(e,t,ro,null,null,n),uh._currentValue=a),Wl(e,t),Ll(e,t,r,n),t.child;case 6:return null===e&&da&&((e=n=ua)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}(n,t.pendingProps,pa))?(t.stateNode=n,ca=t,ua=null,e=!0):e=!1),e||ma(t)),null;case 13:return Xl(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pi(t,null,r,n):Ll(e,t,r,n),t.child;case 11:return Ml(e,t,t.type,t.pendingProps,n);case 7:return Ll(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ll(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Aa(0,t.type,r.value),Ll(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Na(t),r=r(a=Oa(a)),t.flags|=1,Ll(e,t,r,n),t.child;case 14:return Il(e,t,t.type,t.pendingProps,n);case 15:return jl(e,t,t.type,t.pendingProps,n);case 19:return rs(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,a=0!==(128&t.flags);if(t.flags&=-129,null===e){if(da){if("hidden"===r.mode)return e=Gl(t,r),t.lanes=536870912,Hl(null,e);if(Mi(t),(e=ua)?null!==(e=null!==(e=Td(e,pa))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ta?{id:na,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},(n=Vr(e)).return=t,t.child=n,ca=t,ua=null):e=null,null===e)throw ma(t);return t.lanes=536870912,null}return Gl(t,r)}var i=e.memoizedState;if(null!==i){var l=i.dehydrated;if(Mi(t),a)if(256&t.flags)t.flags&=-257,t=Bl(e,t,n);else{if(null===t.memoizedState)throw Error(o(558));t.child=e.child,t.flags|=128,t=null}else if(Dl||Ra(e,t,n,!1),a=0!==(n&e.childLanes),Dl||a){if(null!==(r=fc)&&0!==(l=Me(r,n))&&l!==i.retryLane)throw i.retryLane=l,Dr(e,l),Yc(r,e,l),Ol;ou(),t=Bl(e,t,n)}else e=i.treeContext,ua=Dd(l.nextSibling),ca=t,da=!0,ha=null,pa=!1,null!==e&&sa(t,e),(t=Gl(t,r)).flags|=4096;return t}return(e=Fr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return zl(e,t,n,t.pendingProps);case 24:return Na(t),r=Oa(za),null===e?(null===(a=Ya())&&(a=fc,i=Ha(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:r,cache:a},gi(t),Aa(0,za,a)):(0!==(e.lanes&n)&&(yi(e,t),xi(t,null,null,n),ki()),a=e.memoizedState,i=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),Aa(0,za,r)):(r=i.cache,Aa(0,za,r),r!==a.cache&&_a(t,[za],n,!0))),Ll(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ls(e){e.flags|=4}function ss(e,t,n,r,a){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&a)===a)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw ai=ei,Za;e.flags|=8192}}else e.flags&=-16777217}function cs(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ah(t)){if(!ru())throw ai=ei,Za;e.flags|=8192}}function us(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Te():536870912,e.lanes|=t,_c|=t)}function ds(e,t){if(!da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ps(e,t,n){var r=t.pendingProps;switch(la(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hs(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ca(za),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(va(t)?ls(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,wa())),hs(t),null;case 26:var a=t.type,i=t.memoizedState;return null===e?(ls(t),null!==i?(hs(t),cs(t,i)):(hs(t),ss(t,a,0,0,n))):i?i!==e.memoizedState?(ls(t),hs(t),cs(t,i)):(hs(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ls(t),hs(t),ss(t,a,0,0,n)),null;case 27:if(X(t),n=K.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ls(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return hs(t),null}e=U.current,va(t)?ga(t):(e=jd(a,r,n),t.stateNode=e,ls(t))}return hs(t),null;case 5:if(X(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ls(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return hs(t),null}if(i=U.current,va(t))ga(t);else{var l=gd(K.current);switch(i){case 1:i=l.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=l.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=l.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=l.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(i=l.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?l.createElement("select",{is:r.is}):l.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?l.createElement(a,{is:r.is}):l.createElement(a)}}i[Ge]=t,i[Be]=r;e:for(l=t.child;null!==l;){if(5===l.tag||6===l.tag)i.appendChild(l.stateNode);else if(4!==l.tag&&27!==l.tag&&null!==l.child){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;null===l.sibling;){if(null===l.return||l.return===t)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}t.stateNode=i;e:switch(hd(i,a,r),a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ls(t)}}return hs(t),ss(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ls(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=K.current,va(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ca))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Ge]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||ma(t,!0)}else(e=gd(e).createTextNode(r))[Ge]=t,t.stateNode=e}return hs(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=va(t),null!==n){if(null===e){if(!r)throw Error(o(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(557));e[Ge]=t}else ba(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hs(t),e=!1}else n=wa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(zi(t),t):(zi(t),null);if(0!==(128&t.flags))throw Error(o(558))}return hs(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=va(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[Ge]=t}else ba(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hs(t),a=!1}else a=wa(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(zi(t),t):(zi(t),null)}return zi(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),us(t,t.updateQueue),hs(t),null);case 4:return Q(),null===e&&Ju(t.stateNode.containerInfo),hs(t),null;case 10:return Ca(t.type),hs(t),null;case 19:if(F(Hi),null===(r=t.memoizedState))return hs(t),null;if(a=0!==(128&t.flags),null===(i=r.rendering))if(a)ds(r,!1);else{if(0!==kc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Fi(e))){for(t.flags|=128,ds(r,!1),e=i.updateQueue,t.updateQueue=e,us(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Gr(n,e),n=n.sibling;return G(Hi,1&Hi.current|2),da&&aa(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&se()>Lc&&(t.flags|=128,a=!0,ds(r,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=Fi(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,us(t,e),ds(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!da)return hs(t),null}else 2*se()-r.renderingStartTime>Lc&&536870912!==n&&(t.flags|=128,a=!0,ds(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=se(),e.sibling=null,n=Hi.current,G(Hi,a?1&n|2:1&n),da&&aa(t,r.treeForkCount),e):(hs(t),null);case 22:case 23:return zi(t),Ni(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hs(t),6&t.subtreeFlags&&(t.flags|=8192)):hs(t),null!==(n=t.updateQueue)&&us(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&F(qa),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ca(za),hs(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function fs(e,t){switch(la(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ca(za),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 31:if(null!==t.memoizedState){if(zi(t),null===t.alternate)throw Error(o(340));ba()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(zi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ba()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return F(Hi),null;case 4:return Q(),null;case 10:return Ca(t.type),null;case 22:case 23:return zi(t),Ni(),null!==e&&F(qa),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ca(za),null;default:return null}}function ms(e,t){switch(la(t),t.tag){case 3:Ca(za),Q();break;case 26:case 27:case 5:X(t);break;case 4:Q();break;case 31:null!==t.memoizedState&&zi(t);break;case 13:zi(t);break;case 19:F(Hi);break;case 10:Ca(t.type);break;case 22:case 23:zi(t),Ni(),null!==e&&F(qa);break;case 24:Ca(za)}}function gs(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var i=n.create,o=n.inst;r=i(),o.destroy=r}n=n.next}while(n!==a)}}catch(l){ku(t,t.return,l)}}function ys(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var i=a.next;r=i;do{if((r.tag&e)===e){var o=r.inst,l=o.destroy;if(void 0!==l){o.destroy=void 0,a=t;var s=n,c=l;try{c()}catch(u){ku(a,s,u)}}}r=r.next}while(r!==i)}}catch(u){ku(t,t.return,u)}}function vs(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ci(t,n)}catch(r){ku(e,e.return,r)}}}function bs(e,t,n){n.props=kl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ku(e,t,r)}}function ws(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(a){ku(e,t,a)}}function Ss(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(a){ku(e,t,a)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){ku(e,t,i)}else n.current=null}function Es(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){ku(e,e.return,a)}}function ks(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,l=null,s=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||ud(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":i=f;break;case"name":a=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":l=f;break;case"defaultValue":s=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:f!==h&&ud(e,t,p,f,r,h)}}return void vt(e,l,s,c,u,d,i,a);case"select":for(i in f=l=s=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(i)||ud(e,t,i,null,r,c)}for(a in r)if(i=r[a],c=n[a],r.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":p=i;break;case"defaultValue":s=i;break;case"multiple":l=i;default:i!==c&&ud(e,t,a,i,r,c)}return t=s,n=l,r=f,void(null!=p?St(e,!!n,p,!1):!!r!==!!n&&(null!=t?St(e,!!n,t,!0):St(e,!!n,n?[]:"",!1)));case"textarea":for(s in f=p=null,n)if(a=n[s],n.hasOwnProperty(s)&&null!=a&&!r.hasOwnProperty(s))switch(s){case"value":case"children":break;default:ud(e,t,s,null,r,a)}for(l in r)if(a=r[l],i=n[l],r.hasOwnProperty(l)&&(null!=a||null!=i))switch(l){case"value":p=a;break;case"defaultValue":f=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(o(91));break;default:a!==i&&ud(e,t,l,a,r,i)}return void Et(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ud(e,t,m,null,r,p);for(c in r)if(p=r[c],f=n[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else ud(e,t,c,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&ud(e,t,g,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:ud(e,t,u,p,r,f)}return;default:if(_t(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&dd(e,t,y,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||dd(e,t,d,p,r,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&ud(e,t,v,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||ud(e,t,h,p,r,f)}(r,e.type,n,t),r[Be]=t}catch(a){ku(e,e.return,a)}}function xs(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cd(e.type)||4===e.tag}function As(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ot));else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Cs(e,t,n),e=e.sibling;null!==e;)Cs(e,t,n),e=e.sibling}function Ps(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Ps(e,t,n),e=e.sibling;null!==e;)Ps(e,t,n),e=e.sibling}function _s(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);hd(t,r,n),t[Ge]=e,t[Be]=n}catch(i){ku(e,e.return,i)}}var Rs=!1,Ts=!1,Ns=!1,Os="function"===typeof WeakSet?WeakSet:Set,Ds=null;function Ls(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ys(e,n),4&r&&gs(5,n);break;case 1:if(Ys(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){ku(n,n.return,o)}else{var a=kl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){ku(n,n.return,l)}}64&r&&vs(n),512&r&&ws(n,n.return);break;case 3:if(Ys(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ci(e,t)}catch(o){ku(n,n.return,o)}}break;case 27:null===t&&4&r&&_s(n);case 26:case 5:Ys(e,n),null===t&&4&r&&Es(n),512&r&&ws(n,n.return);break;case 12:Ys(e,n);break;case 31:Ys(e,n),4&r&&Fs(e,n);break;case 13:Ys(e,n),4&r&&Gs(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Rs)){t=null!==t&&null!==t.memoizedState||Ts,a=Rs;var i=Ts;Rs=r,(Ts=t)&&!i?$s(e,n,0!==(8772&n.subtreeFlags)):Ys(e,n),Rs=a,Ts=i}break;case 30:break;default:Ys(e,n)}}function Ms(e){var t=e.alternate;null!==t&&(e.alternate=null,Ms(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Is=null,js=!1;function zs(e,t,n){for(n=n.child;null!==n;)Hs(e,t,n),n=n.sibling}function Hs(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(i){}switch(n.tag){case 26:Ts||Ss(n,t),zs(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ts||Ss(n,t);var r=Is,a=js;Cd(n.type)&&(Is=n.stateNode,js=!1),zs(e,t,n),zd(n.stateNode),Is=r,js=a;break;case 5:Ts||Ss(n,t);case 6:if(r=Is,a=js,Is=null,zs(e,t,n),js=a,null!==(Is=r))if(js)try{(9===Is.nodeType?Is.body:"HTML"===Is.nodeName?Is.ownerDocument.body:Is).removeChild(n.stateNode)}catch(o){ku(n,t,o)}else try{Is.removeChild(n.stateNode)}catch(o){ku(n,t,o)}break;case 18:null!==Is&&(js?(Pd(9===(e=Is).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Uh(e)):Pd(Is,n.stateNode));break;case 4:r=Is,a=js,Is=n.stateNode.containerInfo,js=!0,zs(e,t,n),Is=r,js=a;break;case 0:case 11:case 14:case 15:ys(2,n,t),Ts||ys(4,n,t),zs(e,t,n);break;case 1:Ts||(Ss(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bs(n,t,r)),zs(e,t,n);break;case 21:zs(e,t,n);break;case 22:Ts=(r=Ts)||null!==n.memoizedState,zs(e,t,n),Ts=r;break;default:zs(e,t,n)}}function Fs(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Uh(e)}catch(n){ku(t,t.return,n)}}}function Gs(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Uh(e)}catch(n){ku(t,t.return,n)}}function Bs(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Os),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Os),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=_u.bind(null,e,t);t.then(r,r)}})}function Ws(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],i=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 27:if(Cd(s.type)){Is=s.stateNode,js=!1;break e}break;case 5:Is=s.stateNode,js=!1;break e;case 3:case 4:Is=s.stateNode.containerInfo,js=!0;break e}s=s.return}if(null===Is)throw Error(o(160));Hs(i,l,a),Is=null,js=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Vs(t,e),t=t.sibling}var Us=null;function Vs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ws(t,e),Ks(e),4&r&&(ys(3,e,e.return),gs(3,e),ys(5,e,e.return));break;case 1:Ws(t,e),Ks(e),512&r&&(Ts||null===n||Ss(n,n.return)),64&r&&Rs&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=Us;if(Ws(t,e),Ks(e),512&r&&(Ts||null===n||Ss(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Ye]||i[Ge]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),hd(i,r,n),i[Ge]=e,et(i),r=i;break e;case"link":var l=nh("link","href",a).get(r+(n.href||""));if(l)for(var s=0;s<l.length;s++)if((i=l[s]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){l.splice(s,1);break t}hd(i=a.createElement(r),r,n),a.head.appendChild(i);break;case"meta":if(l=nh("meta","content",a).get(r+(n.content||"")))for(s=0;s<l.length;s++)if((i=l[s]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){l.splice(s,1);break t}hd(i=a.createElement(r),r,n),a.head.appendChild(i);break;default:throw Error(o(468,r))}i[Ge]=e,et(i),r=i}e.stateNode=r}else rh(a,e.type,e.stateNode);else e.stateNode=Xd(a,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?rh(a,e.type,e.stateNode):Xd(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ks(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ws(t,e),Ks(e),512&r&&(Ts||null===n||Ss(n,n.return)),null!==n&&4&r&&ks(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ws(t,e),Ks(e),512&r&&(Ts||null===n||Ss(n,n.return)),32&e.flags){a=e.stateNode;try{xt(a,"")}catch(m){ku(e,e.return,m)}}4&r&&null!=e.stateNode&&ks(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(Ns=!0);break;case 6:if(Ws(t,e),Ks(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){ku(e,e.return,m)}}break;case 3:if(th=null,a=Us,Us=Gd(t.containerInfo),Ws(t,e),Us=a,Ks(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Uh(t.containerInfo)}catch(m){ku(e,e.return,m)}Ns&&(Ns=!1,qs(e));break;case 4:r=Us,Us=Gd(e.stateNode.containerInfo),Ws(t,e),Ks(e),Us=r;break;case 12:default:Ws(t,e),Ks(e);break;case 31:case 19:Ws(t,e),Ks(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Bs(e,r)));break;case 13:Ws(t,e),Ks(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Oc=se()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Bs(e,r)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Rs,d=Ts;if(Rs=u||a,Ts=d||c,Ws(t,e),Ts=d,Rs=u,Ks(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||Rs||Ts||Qs(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,a)"function"===typeof(l=i.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{s=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;s.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){ku(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(m){ku(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var f=c.stateNode;a?_d(f,!0):_d(c.stateNode,!1)}catch(m){ku(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Bs(e,n))));case 30:case 21:}}function Ks(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(xs(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var a=n.stateNode;Ps(e,As(e),a);break;case 5:var i=n.stateNode;32&n.flags&&(xt(i,""),n.flags&=-33),Ps(e,As(e),i);break;case 3:case 4:var l=n.stateNode.containerInfo;Cs(e,As(e),l);break;default:throw Error(o(161))}}catch(s){ku(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function qs(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;qs(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ys(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ls(e,t.alternate,t),t=t.sibling}function Qs(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ys(4,t,t.return),Qs(t);break;case 1:Ss(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bs(t,t.return,n),Qs(t);break;case 27:zd(t.stateNode);case 26:case 5:Ss(t,t.return),Qs(t);break;case 22:null===t.memoizedState&&Qs(t);break;default:Qs(t)}e=e.sibling}}function $s(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:$s(a,i,n),gs(4,i);break;case 1:if($s(a,i,n),"function"===typeof(a=(r=i).stateNode).componentDidMount)try{a.componentDidMount()}catch(c){ku(r,r.return,c)}if(null!==(a=(r=i).updateQueue)){var l=r.stateNode;try{var s=a.shared.hiddenCallbacks;if(null!==s)for(a.shared.hiddenCallbacks=null,a=0;a<s.length;a++)Ai(s[a],l)}catch(c){ku(r,r.return,c)}}n&&64&o&&vs(i),ws(i,i.return);break;case 27:_s(i);case 26:case 5:$s(a,i,n),n&&null===r&&4&o&&Es(i),ws(i,i.return);break;case 12:$s(a,i,n);break;case 31:$s(a,i,n),n&&4&o&&Fs(a,i);break;case 13:$s(a,i,n),n&&4&o&&Gs(a,i);break;case 22:null===i.memoizedState&&$s(a,i,n),ws(i,i.return);break;case 30:break;default:$s(a,i,n)}t=t.sibling}}function Xs(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Fa(n))}function Zs(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Fa(e))}function Js(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Js(e,t,n,r),2048&a&&gs(9,t);break;case 1:case 31:case 13:default:Js(e,t,n,r);break;case 3:Js(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Fa(e)));break;case 12:if(2048&a){Js(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,l=i.onPostCommit;"function"===typeof l&&l(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(s){ku(t,t.return,s)}}else Js(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Js(e,t,n,r):nc(e,t):2&i._visibility?Js(e,t,n,r):(i._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&a&&Xs(o,t);break;case 24:Js(e,t,n,r),2048&a&&Zs(t.alternate,t)}}function tc(e,t,n,r,a){for(a=a&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,o=t,l=n,s=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:tc(i,o,l,s,a),gs(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?tc(i,o,l,s,a):nc(i,o):(u._visibility|=2,tc(i,o,l,s,a)),a&&2048&c&&Xs(o.alternate,o);break;case 24:tc(i,o,l,s,a),a&&2048&c&&Zs(o.alternate,o);break;default:tc(i,o,l,s,a)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:nc(n,r),2048&a&&Xs(r.alternate,r);break;case 24:nc(n,r),2048&a&&Zs(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ac(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ic(e,t,n),e=e.sibling}function ic(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var a=Kd(r.href),i=t.querySelector(qd(a));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=Yd(r),(a=Hd.get(a))&&Jd(r,a),et(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=oh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Us,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Us;Us=Gd(e.stateNode.containerInfo),ac(e,t,n),Us=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ac(e,t,n),rc=r):ac(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ds=r,uc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)sc(e),e=e.sibling}function sc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&ys(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):lc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ds=r,uc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ys(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Ds;){var n=Ds;switch(n.tag){case 0:case 11:case 15:ys(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Fa(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ds=r;else e:for(n=e;null!==Ds;){var a=(r=Ds).sibling,i=r.return;if(Ms(r),r===n){Ds=null;break e}if(null!==a){a.return=i,Ds=a;break e}Ds=i}}}var dc={getCacheForType:function(e){var t=Oa(za),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Oa(za).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,pc=0,fc=null,mc=null,gc=0,yc=0,vc=null,bc=!1,wc=!1,Sc=!1,Ec=0,kc=0,xc=0,Ac=0,Cc=0,Pc=0,_c=0,Rc=null,Tc=null,Nc=!1,Oc=0,Dc=0,Lc=1/0,Mc=null,Ic=null,jc=0,zc=null,Hc=null,Fc=0,Gc=0,Bc=null,Wc=null,Uc=0,Vc=null;function Kc(){return 0!==(2&pc)&&0!==gc?gc&-gc:null!==L.T?Bu():ze()}function qc(){if(0===Pc)if(0===(536870912&gc)||da){var e=xe;0===(3932160&(xe<<=1))&&(xe=262144),Pc=e}else Pc=536870912;return null!==(e=Oi.current)&&(e.flags|=32),Pc}function Yc(e,t,n){(e!==fc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(tu(e,0),Zc(e,gc,Pc,!1)),Oe(e,n),0!==(2&pc)&&e===fc||(e===fc&&(0===(2&pc)&&(Ac|=n),4===kc&&Zc(e,gc,Pc,!1)),Mu(e))}function Qc(e,t,n){if(0!==(6&pc))throw Error(o(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||_e(e,t),a=r?function(e,t){var n=pc;pc|=2;var r=au(),a=iu();fc!==e||gc!==t?(Mc=null,Lc=se()+500,tu(e,t)):wc=_e(e,t);e:for(;;)try{if(0!==yc&&null!==mc){t=mc;var i=vc;t:switch(yc){case 1:yc=0,vc=null,hu(e,t,i,1);break;case 2:case 9:if(ti(i)){yc=0,vc=null,du(t);break}t=function(){2!==yc&&9!==yc||fc!==e||(yc=7),Mu(e)},i.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ti(i)?(yc=0,vc=null,du(t)):(yc=0,vc=null,hu(e,t,i,7));break;case 5:var l=null;switch(mc.tag){case 26:l=mc.memoizedState;case 5:case 27:var s=mc;if(l?ah(l):s.stateNode.complete){yc=0,vc=null;var c=s.sibling;if(null!==c)mc=c;else{var u=s.return;null!==u?(mc=u,pu(u)):mc=null}break t}}yc=0,vc=null,hu(e,t,i,5);break;case 6:yc=0,vc=null,hu(e,t,i,6);break;case 8:eu(),kc=6;break e;default:throw Error(o(462))}}cu();break}catch(d){nu(e,d)}return xa=ka=null,L.H=r,L.A=a,pc=n,null!==mc?0:(fc=null,gc=0,Tr(),kc)}(e,t):lu(e,t,!0),i=r;;){if(0===a){wc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!i||Xc(n)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var s=e;a=Rc;var c=s.current.memoizedState.isDehydrated;if(c&&(tu(s,l).flags|=256),2!==(l=lu(s,l,!1))){if(Sc&&!c){s.errorRecoveryDisabledLanes|=i,Ac|=i,a=4;break e}i=Tc,Tc=a,null!==i&&(null===Tc?Tc=i:Tc.push.apply(Tc,i))}a=l}if(i=!1,2!==a)continue}}if(1===a){tu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,i=a){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Pc,!bc);break e;case 2:Tc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(a=Oc+300-se())){if(Zc(r,t,Pc,!bc),0!==Pe(r,0,!0))break e;Fc=t,r.timeoutHandle=Sd($c.bind(null,r,n,Tc,Mc,Nc,t,Pc,Ac,_c,bc,i,"Throttled",-0,0),a)}else $c(r,n,Tc,Mc,Nc,t,Pc,Ac,_c,bc,i,null,-0,0)}break}a=lu(e,t,!1),i=!1}Mu(e)}function $c(e,t,n,r,a,i,o,l,s,c,u,d,h,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ic(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ot});var f=(62914560&i)===i?Oc-se():(4194048&i)===i?Dc-se():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&sh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ih&&(ih=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],i=a.transferSize,o=a.initiatorType,l=a.duration;if(i&&l&&pd(o)){for(o=0,l=a.responseEnd,r+=1;r<n.length;r++){var s=n[r],c=s.startTime;if(c>l)break;var u=s.transferSize,d=s.initiatorType;u&&pd(d)&&(o+=u*((s=s.responseEnd)<l?1:(l-c)/(s-c)))}if(--r,t+=8*(i+o)/(a.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var a=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ih?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}(d,f)))return Fc=i,e.cancelPendingCommit=f(mu.bind(null,e,t,i,n,r,a,o,l,s,u,d,null,h,p)),void Zc(e,i,o,!c)}mu(e,t,i,n,r,a,o,l,s)}function Xc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Zn(i(),a))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Cc,t&=~Ac,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var i=31-we(a),o=1<<i;r[i]=-1,a&=~o}0!==n&&De(e,n,t)}function Jc(){return 0!==(6&pc)||(Iu(0,!1),!1)}function eu(){if(null!==mc){if(0===yc)var e=mc.return;else xa=ka=null,oo(e=mc),li=null,si=0,e=mc;for(;null!==e;)ms(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Ed(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Fc=0,eu(),fc=e,mc=n=Fr(e.current,null),gc=t,yc=0,vc=null,bc=!1,wc=_e(e,t),Sc=!1,_c=Pc=Cc=Ac=xc=kc=0,Tc=Rc=null,Nc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-we(r),i=1<<a;t|=e[a],r&=~i}return Ec=t,Tr(),n}function nu(e,t){Bi=null,L.H=ml,t===Xa||t===Ja?(t=ii(),yc=3):t===Za?(t=ii(),yc=4):yc=t===Ol?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===mc&&(kc=1,Pl(e,Yr(t,e.current)))}function ru(){var e=Oi.current;return null===e||((4194048&gc)===gc?null===Di:((62914560&gc)===gc||0!==(536870912&gc))&&e===Di)}function au(){var e=L.H;return L.H=ml,null===e?ml:e}function iu(){var e=L.A;return L.A=dc,e}function ou(){kc=4,bc||(4194048&gc)!==gc&&null!==Oi.current||(wc=!0),0===(134217727&xc)&&0===(134217727&Ac)||null===fc||Zc(fc,gc,Pc,!1)}function lu(e,t,n){var r=pc;pc|=2;var a=au(),i=iu();fc===e&&gc===t||(Mc=null,tu(e,t)),t=!1;var o=kc;e:for(;;)try{if(0!==yc&&null!==mc){var l=mc,s=vc;switch(yc){case 8:eu(),o=6;break e;case 3:case 2:case 9:case 6:null===Oi.current&&(t=!0);var c=yc;if(yc=0,vc=null,hu(e,l,s,c),n&&wc){o=0;break e}break;default:c=yc,yc=0,vc=null,hu(e,l,s,c)}}su(),o=kc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,xa=ka=null,pc=r,L.H=a,L.A=i,null===mc&&(fc=null,gc=0,Tr()),o}function su(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!oe();)uu(mc)}function uu(e){var t=os(e.alternate,e,Ec);e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Vl(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Vl(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:oo(t);default:ms(n,t),t=os(n,t=mc=Gr(t,Ec),Ec)}e.memoizedProps=e.pendingProps,null===t?pu(e):mc=t}function hu(e,t,n,r){xa=ka=null,oo(t),li=null,si=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ra(t,n,a,!0),null!==(n=Oi.current)){switch(n.tag){case 31:case 13:return null===Di?ou():null===n.alternate&&0===kc&&(kc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),xu(e,r,a)),!1;case 22:return n.flags|=65536,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),xu(e,r,a)),!1}throw Error(o(435,n.tag))}return xu(e,r,a),ou(),!1}if(da)return null!==(t=Oi.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==fa&&Sa(Yr(e=Error(o(422),{cause:r}),n))):(r!==fa&&Sa(Yr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=Yr(r,n),Si(e,a=Rl(e.stateNode,r,a)),4!==kc&&(kc=2)),!1;var i=Error(o(520),{cause:r});if(i=Yr(i,n),null===Rc?Rc=[i]:Rc.push(i),4!==kc&&(kc=2),null===t)return!0;r=Yr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,Si(n,e=Rl(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Ic||!Ic.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,Nl(a=Tl(a),e,n,r),Si(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,gc))return kc=1,Pl(e,Yr(n,e.current)),void(mc=null)}catch(i){if(null!==a)throw mc=a,i;return kc=1,Pl(e,Yr(n,e.current)),void(mc=null)}32768&t.flags?(da||1===r?e=!0:wc||0!==(536870912&gc)?e=!1:(bc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Oi.current)&&13===r.tag&&(r.flags|=16384))),fu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void fu(t,bc);e=t.return;var n=ps(t.alternate,t,Ec);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===kc&&(kc=5)}function fu(e,t){do{var n=fs(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);kc=6,mc=null}function mu(e,t,n,r,a,i,l,s,c){e.cancelPendingCommit=null;do{wu()}while(0!==jc);if(0!==(6&pc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,a,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,s=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-we(n),d=1<<u;l[u]=0,s[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&De(e,r,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,n,i|=Rr,l,s,c),e===fc&&(mc=fc=null,gc=0),Hc=t,zc=e,Fc=n,Gc=i,Bc=a,Wc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ae(he,function(){return Su(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=L.T,L.T=null,a=M.p,M.p=2,l=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,fd=bh,ar(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var l=0,s=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==a&&3!==h.nodeType||(s=l+a),h!==i||0!==r&&3!==h.nodeType||(c=l+r),3===h.nodeType&&(l+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===a&&(s=l),p===i&&++d===r&&(c=l),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},bh=!1,Ds=t;null!==Ds;)if(e=(t=Ds).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ds=e;else for(;null!==Ds;){switch(i=(t=Ds).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(a=e[n]).ref.impl=a.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=kl(n.type,a);e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){ku(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Rd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Ds=e;break}Ds=t.return}}(e,t)}finally{pc=l,M.p=a,L.T=r}}jc=1,gu(),yu(),vu()}}function gu(){if(1===jc){jc=0;var e=zc,t=Hc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=L.T,L.T=null;var r=M.p;M.p=2;var a=pc;pc|=4;try{Vs(t,e);var i=md,o=rr(e.containerInfo),l=i.focusedElem,s=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&nr(l.ownerDocument.documentElement,l)){if(null!==s&&ar(l)){var c=s.start,u=s.end;if(void 0===u&&(u=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(u,l.value.length);else{var d=l.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=l.textContent.length,m=Math.min(s.start,f),g=void 0===s.end?m:Math.min(s.end,f);!p.extend&&m>g&&(o=g,g=m,m=o);var y=tr(l,m),v=tr(l,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(d=[],p=l;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof l.focus&&l.focus(),l=0;l<d.length;l++){var w=d[l];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}bh=!!fd,md=fd=null}finally{pc=a,M.p=r,L.T=n}}e.current=t,jc=2}}function yu(){if(2===jc){jc=0;var e=zc,t=Hc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=L.T,L.T=null;var r=M.p;M.p=2;var a=pc;pc|=4;try{Ls(e,t.alternate,t)}finally{pc=a,M.p=r,L.T=n}}jc=3}}function vu(){if(4===jc||3===jc){jc=0,le();var e=zc,t=Hc,n=Fc,r=Wc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?jc=5:(jc=0,Hc=zc=null,bu(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(Ic=null),je(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(s){}if(null!==r){t=L.T,a=M.p,M.p=2,L.T=null;try{for(var i=e.onRecoverableError,o=0;o<r.length;o++){var l=r[o];i(l.value,{componentStack:l.stack})}}finally{L.T=t,M.p=a}}0!==(3&Fc)&&wu(),Mu(e),a=e.pendingLanes,0!==(261930&n)&&0!==(42&a)?e===Vc?Uc++:(Uc=0,Vc=e):Uc=0,Iu(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Fa(t)))}function wu(){return gu(),yu(),vu(),Su()}function Su(){if(5!==jc)return!1;var e=zc,t=Gc;Gc=0;var n=je(Fc),r=L.T,a=M.p;try{M.p=32>n?32:n,L.T=null,n=Bc,Bc=null;var i=zc,l=Fc;if(jc=0,Hc=zc=null,Fc=0,0!==(6&pc))throw Error(o(331));var s=pc;if(pc|=4,sc(i.current),ec(i,i.current,l,n),pc=s,Iu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,i)}catch(c){}return!0}finally{M.p=a,L.T=r,bu(e,t)}}function Eu(e,t,n){t=Yr(n,t),null!==(e=bi(e,t=Rl(e.stateNode,t,2),2))&&(Oe(e,2),Mu(e))}function ku(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ic||!Ic.has(r))){e=Yr(n,e),null!==(r=bi(t,n=Tl(2),2))&&(Nl(n,r,t,e),Oe(r,2),Mu(r));break}}t=t.return}}function xu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(Sc=!0,a.add(n),e=Au.bind(null,e,t,n),t.then(e,e))}function Au(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fc===e&&(gc&n)===n&&(4===kc||3===kc&&(62914560&gc)===gc&&300>se()-Oc?0===(2&pc)&&tu(e,0):Cc|=n,_c===gc&&(_c=0)),Mu(e)}function Cu(e,t){0===t&&(t=Te()),null!==(e=Dr(e,t))&&(Oe(e,t),Mu(e))}function Pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function _u(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cu(e,n)}var Ru=null,Tu=null,Nu=!1,Ou=!1,Du=!1,Lu=0;function Mu(e){e!==Tu&&null===e.next&&(null===Tu?Ru=Tu=e:Tu=Tu.next=e),Ou=!0,Nu||(Nu=!0,xd(function(){0!==(6&pc)?ae(ue,ju):zu()}))}function Iu(e,t){if(!Du&&Ou){Du=!0;do{for(var n=!1,r=Ru;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var i=0;else{var o=r.suspendedLanes,l=r.pingedLanes;i=(1<<31-we(42|e)+1)-1,i=201326741&(i&=a&~(o&~l))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Gu(r,i))}else i=gc,0===(3&(i=Pe(r,r===fc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||_e(r,i)||(n=!0,Gu(r,i));r=r.next}}while(n);Du=!1}}function ju(){zu()}function zu(){Ou=Nu=!1;var e=0;0!==Lu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wd&&(wd=e,!0);return wd=null,!1}()&&(e=Lu);for(var t=se(),n=null,r=Ru;null!==r;){var a=r.next,i=Hu(r,t);0===i?(r.next=null,null===n?Ru=a:n.next=a,null===a&&(Tu=n)):(n=r,(0!==e||0!==(3&i))&&(Ou=!0)),r=a}0!==jc&&5!==jc||Iu(e,!1),0!==Lu&&(Lu=0)}function Hu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-we(i),l=1<<o,s=a[o];-1===s?0!==(l&n)&&0===(l&r)||(a[o]=Re(l,t)):s<=t&&(e.expiredLanes|=l),i&=~l}if(n=gc,n=Pe(e,e===(t=fc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||_e(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),je(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=fe}return r=Fu.bind(null,e),n=ae(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function Fu(e,t){if(0!==jc&&5!==jc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=Pe(e,e===fc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Qc(e,r,t),Hu(e,se()),null!=e.callbackNode&&e.callbackNode===n?Fu.bind(null,e):null)}function Gu(e,t){if(wu())return null;Qc(e,t,!0)}function Bu(){if(0===Lu){var e=Wa;0===e&&(e=ke,0===(261888&(ke<<=1))&&(ke=256)),Lu=e}return Lu}function Wu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Nt(""+e)}function Uu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Vu=0;Vu<xr.length;Vu++){var Ku=xr[Vu];Ar(Ku.toLowerCase(),"on"+(Ku[0].toUpperCase()+Ku.slice(1)))}Ar(gr,"onAnimationEnd"),Ar(yr,"onAnimationIteration"),Ar(vr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(br,"onTransitionRun"),Ar(wr,"onTransitionStart"),Ar(Sr,"onTransitionCancel"),Ar(Er,"onTransitionEnd"),at("onMouseEnter",["mouseout","mouseover"]),at("onMouseLeave",["mouseout","mouseover"]),at("onPointerEnter",["pointerout","pointerover"]),at("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qu));function Qu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],s=l.instance,c=l.currentTarget;if(l=l.listener,s!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=c;try{i(a)}catch(u){Cr(u)}a.currentTarget=null,i=s}else for(o=0;o<r.length;o++){if(s=(l=r[o]).instance,c=l.currentTarget,l=l.listener,s!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=c;try{i(a)}catch(u){Cr(u)}a.currentTarget=null,i=s}}}}function $u(e,t){var n=t[Ue];void 0===n&&(n=t[Ue]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Xu(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Ju(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Xu(t,!1,e),Xu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Xu("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Ch(t)){case 2:var a=wh;break;case 8:a=Sh;break;default:a=Eh}n=a.bind(null,t,n,e),a=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function td(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===a)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===a)return;o=o.return}for(;null!==l;){if(null===(o=$e(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=i=o;continue e}l=l.parentNode}}r=r.return}Ht(function(){var r=i,a=Lt(n),o=[];e:{var l=kr.get(e);if(void 0!==l){var c=nn,u=e;switch(e){case"keypress":if(0===Yt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wn;break;case gr:case yr:case vr:c=un;break;case Er:c=Sn;break;case"scroll":case"scrollend":c=an;break;case"wheel":c=En;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=kn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==l?l+"Capture":null:l;d=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Ft(m,p))&&d.push(nd(m,g,f)),h)break;m=m.return}0<d.length&&(l=new c(l,u,null,n,a),o.push({event:l,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!$e(u)&&!u[We])&&(c||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?$e(u):null)&&(h=s(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=ln,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?l:Ze(c),f=null==u?l:Ze(u),(l=new d(g,m+"leave",c,n,a)).target=h,l.relatedTarget=f,g=null,$e(a)===r&&((d=new d(p,m+"enter",u,n,a)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=ad,m=u,f=0,g=p=c;g;g=d(g))f++;g=0;for(var y=m;y;y=d(y))g++;for(;0<f-g;)p=d(p),f--;for(;0<g-f;)m=d(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){d=p;break e}p=d(p),m=d(m)}d=null}else d=null;null!==c&&id(o,l,c,d,!1),null!==u&&null!==h&&id(o,h,u,d,!0)}if("select"===(c=(l=r?Ze(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var v=Gn;else if(Mn(l))if(Bn)v=Xn;else{v=Qn;var b=Yn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&_t(r.elementType)&&(v=Gn):v=$n;switch(v&&(v=v(e,r))?In(o,v,n,a):(b&&b(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&wt(l,"number",l.value)),b=r?Ze(r):window,e){case"focusin":(Mn(b)||"true"===b.contentEditable)&&(or=b,lr=r,sr=null);break;case"focusout":sr=lr=or=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(o,n,a);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":ur(o,n,a)}var w;if(An)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Dn?Nn(e,n)&&(S="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(S="onCompositionStart");S&&(_n&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==S?"onCompositionEnd"===S&&Dn&&(w=qt()):(Vt="value"in(Ut=a)?Ut.value:Ut.textContent,Dn=!0)),0<(b=rd(r,S)).length&&(S=new hn(S,e,null,n,a),o.push({event:S,listeners:b}),w?S.data=w:null!==(w=On(n))&&(S.data=w))),(w=Pn?function(e,t){switch(e){case"compositionend":return On(t);case"keypress":return 32!==t.which?null:(Tn=!0,Rn);case"textInput":return(e=t.data)===Rn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!An&&Nn(e,t)?(e=qt(),Kt=Vt=Ut=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(S=rd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,a),o.push({event:b,listeners:S}),b.data=w)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var i=Wu((a[Be]||null).action),o=r.submitter;o&&null!==(t=(t=o[Be]||null)?Wu(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var l=new nn("action","action",null,r,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Lu){var e=o?Uu(a,o):new FormData(a);tl(n,{pending:!0,data:e,method:a.method,action:i},null,e)}}else"function"===typeof i&&(l.preventDefault(),e=o?Uu(a,o):new FormData(a),tl(n,{pending:!0,data:e,method:a.method,action:i},i,e))},currentTarget:a}]})}}(o,e,r,n,a)}Qu(o,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=Ft(e,n))&&r.unshift(nd(e,a,i)),null!=(a=Ft(e,t))&&r.push(nd(e,a,i))),3===e.tag)return r;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var l=n,s=l.alternate,c=l.stateNode;if(l=l.tag,null!==s&&s===r)break;5!==l&&26!==l&&27!==l||null===c||(s=c,a?null!=(c=Ft(n,i))&&o.unshift(nd(n,c,s)):a||null!=(c=Ft(n,i))&&o.push(nd(n,c,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var od=/\r\n?/g,ld=/\u0000|\uFFFD/g;function sd(e){return("string"===typeof e?e:""+e).replace(od,"\n").replace(ld,"")}function cd(e,t){return t=sd(t),sd(e)===t}function ud(e,t,n,r,a,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||xt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&xt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Pt(e,r,i);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&ud(e,t,"name",a.name,a,null),ud(e,t,"formEncType",a.formEncType,a,null),ud(e,t,"formMethod",a.formMethod,a,null),ud(e,t,"formTarget",a.formTarget,a,null)):(ud(e,t,"encType",a.encType,a,null),ud(e,t,"method",a.method,a,null),ud(e,t,"target",a.target,a,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Ot);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Nt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":$u("beforetoggle",e),$u("toggle",e),st(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":st(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&st(e,n=Rt.get(n)||n,r)}}function dd(e,t,n,r,a,i){switch(n){case"style":Pt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?xt(e,r):("number"===typeof r||"bigint"===typeof r)&&xt(e,""+r);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ot);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Be]||null)?i[n]:null)&&e.removeEventListener(t,i,a),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):st(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$u("error",e),$u("load",e);var r,a=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var l=n[r];if(null!=l)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ud(e,t,r,l,n,null)}}return i&&ud(e,t,"srcSet",n.srcSet,n,null),void(a&&ud(e,t,"src",n.src,n,null));case"input":$u("invalid",e);var s=r=l=i=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(null!=d)switch(a){case"name":i=d;break;case"type":l=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":s=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:ud(e,t,a,d,n,null)}}return void bt(e,r,s,c,u,l,i,!1);case"select":for(i in $u("invalid",e),a=l=r=null,n)if(n.hasOwnProperty(i)&&null!=(s=n[i]))switch(i){case"value":r=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:ud(e,t,i,s,n,null)}return t=r,n=l,e.multiple=!!a,void(null!=t?St(e,!!a,t,!1):null!=n&&St(e,!!a,n,!0));case"textarea":for(l in $u("invalid",e),r=i=a=null,n)if(n.hasOwnProperty(l)&&null!=(s=n[l]))switch(l){case"value":a=s;break;case"defaultValue":i=s;break;case"children":r=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(o(91));break;default:ud(e,t,l,s,n,null)}return void kt(e,a,i,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!==typeof a&&"symbol"!==typeof a;else ud(e,t,c,a,n,null);return;case"dialog":$u("beforetoggle",e),$u("toggle",e),$u("cancel",e),$u("close",e);break;case"iframe":case"object":$u("load",e);break;case"video":case"audio":for(a=0;a<qu.length;a++)$u(qu[a],e);break;case"image":$u("error",e),$u("load",e);break;case"details":$u("toggle",e);break;case"embed":case"source":case"link":$u("error",e),$u("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ud(e,t,u,a,n,null)}return;default:if(_t(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(a=n[d])&&dd(e,t,d,a,n,void 0));return}}for(s in n)n.hasOwnProperty(s)&&(null!=(a=n[s])&&ud(e,t,s,a,n,null))}function pd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wd=null;var Sd="function"===typeof setTimeout?setTimeout:void 0,Ed="function"===typeof clearTimeout?clearTimeout:void 0,kd="function"===typeof Promise?Promise:void 0,xd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof kd?function(e){return kd.resolve(null).then(e).catch(Ad)}:Sd;function Ad(e){setTimeout(function(){throw e})}function Cd(e){return"head"===e}function Pd(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)||"/&"===n){if(0===r)return e.removeChild(a),void Uh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)zd(e.ownerDocument.documentElement);else if("head"===n){zd(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[Ye]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=o}}else"body"===n&&zd(e.ownerDocument.body);n=a}while(n);Uh(t)}function _d(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Rd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Rd(n),Qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Td(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}function Nd(e){return"$?"===e.data||"$~"===e.data}function Od(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Dd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Ld=null;function Md(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Dd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Id(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function jd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function zd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qe(e)}var Hd=new Map,Fd=new Set;function Gd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Bd=M.d;M.d={f:function(){var e=Bd.f(),t=Jc();return e||t},r:function(e){var t=Xe(e);null!==t&&5===t.tag&&"form"===t.type?rl(t):Bd.r(e)},D:function(e){Bd.D(e),Ud("dns-prefetch",e,null)},C:function(e,t){Bd.C(e,t),Ud("preconnect",e,t)},L:function(e,t,n){Bd.L(e,t,n);var r=Wd;if(r&&e&&t){var a='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(a+='[imagesizes="'+yt(n.imageSizes)+'"]')):a+='[href="'+yt(e)+'"]';var i=a;switch(t){case"style":i=Kd(e);break;case"script":i=Qd(e)}Hd.has(i)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Hd.set(i,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(qd(i))||"script"===t&&r.querySelector($d(i))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Bd.m(e,t);var n=Wd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Qd(e)}if(!Hd.has(i)&&(e=p({rel:"modulepreload",href:e},t),Hd.set(i,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($d(i)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Bd.X(e,t);var n=Wd;if(n&&e){var r=Je(n).hoistableScripts,a=Qd(e),i=r.get(a);i||((i=n.querySelector($d(a)))||(e=p({src:e,async:!0},t),(t=Hd.get(a))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}},S:function(e,t,n){Bd.S(e,t,n);var r=Wd;if(r&&e){var a=Je(r).hoistableStyles,i=Kd(e);t=t||"default";var o=a.get(i);if(!o){var l={loading:0,preload:null};if(o=r.querySelector(qd(i)))l.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Hd.get(i))&&Jd(e,n);var s=o=r.createElement("link");et(s),hd(s,"link",e),s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),s.addEventListener("load",function(){l.loading|=1}),s.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Zd(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:l},a.set(i,o)}}},M:function(e,t){Bd.M(e,t);var n=Wd;if(n&&e){var r=Je(n).hoistableScripts,a=Qd(e),i=r.get(a);i||((i=n.querySelector($d(a)))||(e=p({src:e,async:!0,type:"module"},t),(t=Hd.get(a))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}};var Wd="undefined"===typeof document?null:document;function Ud(e,t,n){var r=Wd;if(r&&"string"===typeof t&&t){var a=yt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"===typeof n&&(a+='[crossorigin="'+n+'"]'),Fd.has(a)||(Fd.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Vd(e,t,n,r){var a,i,l,s,c=(c=K.current)?Gd(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Kd(n.href),(r=(n=Je(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Kd(n.href);var u=Je(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(qd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Hd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Hd.set(e,n),u||(a=c,i=e,l=n,s=d.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?s.loading=1:(i=a.createElement("link"),s.preload=i,i.addEventListener("load",function(){return s.loading|=1}),i.addEventListener("error",function(){return s.loading|=2}),hd(i,"link",l),et(i),a.head.appendChild(i))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Qd(n),(r=(n=Je(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Kd(e){return'href="'+yt(e)+'"'}function qd(e){return'link[rel="stylesheet"]['+e+"]"}function Yd(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Qd(e){return'[src="'+yt(e)+'"]'}function $d(e){return"script[async]"+e}function Xd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var a=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",a),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":a=Kd(n.href);var i=e.querySelector(qd(a));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=Yd(n),(a=Hd.get(a))&&Jd(r,a),et(i=(e.ownerDocument||e).createElement("link"));var l=i;return l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),hd(i,"link",r),t.state.loading|=4,Zd(i,n.precedence,e),t.instance=i;case"script":return i=Qd(n.src),(a=e.querySelector($d(i)))?(t.instance=a,et(a),a):(r=n,(a=Hd.get(i))&&eh(r=p({},n),a),et(a=(e=e.ownerDocument||e).createElement("script")),hd(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,o=0;o<r.length;o++){var l=r[o];if(l.dataset.precedence===t)i=l;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Jd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,a=th=new Map;a.set(n,r)}else(r=(a=th).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[Ye]||i[Ge]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var l=r.get(o);l?l.push(i):r.set(o,[i])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ah(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ih=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)sh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lh=null;function sh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lh=new Map,t.forEach(ch,e),lh=null,oh.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=lh.get(e);if(n)var r=n.get(null);else{n=new Map,lh.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var o=a[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(a=t.instance).getAttribute("data-precedence"),(i=n.get(o)||r)===r&&n.set(null,a),n.set(o,a),this.count++,r=oh.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var uh={$$typeof:S,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function dh(e,t,n,r,a,i,o,l,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function hh(e,t,n,r,a,i,o,l,s,c,u,d){return e=new dh(e,t,n,o,s,c,u,d,l),t=1,!0===i&&(t|=24),i=zr(3,null,null,t),e.current=i,i.stateNode=e,(t=Ha()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},gi(i),e}function ph(e){return e?e=Ir:Ir}function fh(e,t,n,r,a,i){a=ph(a),null===r.context?r.context=a:r.pendingContext=a,(r=vi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=bi(e,r,t))&&(Yc(n,0,t),wi(n,e,t))}function mh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Dr(e,67108864);null!==t&&Yc(t,0,67108864),gh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=Kc(),n=Dr(e,t=Ie(t));null!==n&&Yc(n,0,t),gh(e,t)}}var bh=!0;function wh(e,t,n,r){var a=L.T;L.T=null;var i=M.p;try{M.p=2,Eh(e,t,n,r)}finally{M.p=i,L.T=a}}function Sh(e,t,n,r){var a=L.T;L.T=null;var i=M.p;try{M.p=8,Eh(e,t,n,r)}finally{M.p=i,L.T=a}}function Eh(e,t,n,r){if(bh){var a=kh(r);if(null===a)td(e,t,r,xh,n),Mh(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return _h=Ih(_h,e,t,n,r,a),!0;case"dragenter":return Rh=Ih(Rh,e,t,n,r,a),!0;case"mouseover":return Th=Ih(Th,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Nh.set(i,Ih(Nh.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Oh.set(i,Ih(Oh.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Mh(e,r),4&t&&-1<Lh.indexOf(e)){for(;null!==a;){var i=Xe(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=Ce(i.pendingLanes);if(0!==o){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var s=1<<31-we(o);l.entanglements[1]|=s,o&=~s}Mu(i),0===(6&pc)&&(Lc=se()+500,Iu(0,!1))}}break;case 31:case 13:null!==(l=Dr(i,2))&&Yc(l,0,2),Jc(),gh(i,2)}if(null===(i=kh(r))&&td(e,t,r,xh,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else td(e,t,r,null,n)}}function kh(e){return Ah(e=Lt(e))}var xh=null;function Ah(e){if(xh=null,null!==(e=$e(e))){var t=s(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return xh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Ph=!1,_h=null,Rh=null,Th=null,Nh=new Map,Oh=new Map,Dh=[],Lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mh(e,t){switch(e){case"focusin":case"focusout":_h=null;break;case"dragenter":case"dragleave":Rh=null;break;case"mouseover":case"mouseout":Th=null;break;case"pointerover":case"pointerout":Nh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oh.delete(t.pointerId)}}function Ih(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=Xe(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function jh(e){var t=$e(e.target);if(null!==t){var n=s(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void He(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void He(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=kh(e.nativeEvent);if(null!==n)return null!==(t=Xe(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function Hh(e,t,n){zh(e)&&n.delete(t)}function Fh(){Ph=!1,null!==_h&&zh(_h)&&(_h=null),null!==Rh&&zh(Rh)&&(Rh=null),null!==Th&&zh(Th)&&(Th=null),Nh.forEach(Hh),Oh.forEach(Hh)}function Gh(e,t){e.blockedOn===t&&(e.blockedOn=null,Ph||(Ph=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fh)))}var Bh=null;function Wh(e){Bh!==e&&(Bh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Bh===e&&(Bh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!==typeof r){if(null===Ah(r||n))continue;break}var i=Xe(n);null!==i&&(e.splice(t,3),t-=3,tl(i,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Uh(e){function t(t){return Gh(t,e)}null!==_h&&Gh(_h,e),null!==Rh&&Gh(Rh,e),null!==Th&&Gh(Th,e),Nh.forEach(t),Oh.forEach(t);for(var n=0;n<Dh.length;n++){var r=Dh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Dh.length&&null===(n=Dh[0]).blockedOn;)jh(n),null===n.blockedOn&&Dh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],o=a[Be]||null;if("function"===typeof i)o||Wh(n);else if(o){var l=null;if(i&&i.hasAttribute("formAction")){if(a=i,o=i[Be]||null)l=o.formAction;else if(null!==Ah(a))continue}else l=o.action;"function"===typeof l?n[r+1]=l:(n.splice(r,3),r-=3),Wh(n)}}}function Vh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return a=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==a&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==a&&(a(),a=null)}}}function Kh(e){this._internalRoot=e}function qh(e){this._internalRoot=e}qh.prototype.render=Kh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));fh(t.current,Kc(),e,t,null,null)},qh.prototype.unmount=Kh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fh(e.current,2,null,e,null,null),Jc(),t[We]=null}},qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=ze();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dh.length&&0!==t&&t<Dh[n].priority;n++);Dh.splice(n,0,e),0===n&&jh(e)}};var Yh=a.version;if("19.2.3"!==Yh)throw Error(o(527,Yh,"19.2.3"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return d(a),e;if(i===r)return d(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,c=a.child;c;){if(c===n){l=!0,n=a,r=i;break}if(c===r){l=!0,r=a,n=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===n){l=!0,n=i,r=a;break}if(c===r){l=!0,r=i,n=a;break}c=c.sibling}if(!l)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Qh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{ye=$h.inject(Qh),ve=$h}catch(Zh){}}t.createRoot=function(e,t){if(!l(e))throw Error(o(299));var n=!1,r="",a=xl,i=Al,s=Cl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,a,i,s,Vh),e[We]=t.current,Ju(e),new Kh(t)},t.hydrateRoot=function(e,t,n){if(!l(e))throw Error(o(299));var r=!1,a="",i=xl,s=Al,c=Cl,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(s=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,a,u,i,s,c,Vh)).context=ph(null),n=t.current,(a=vi(r=Ie(r=Kc()))).callback=null,bi(n,a,r),n=r,t.current.lanes=n,Oe(t,n),Mu(t),e[We]=t.current,Ju(e),new qh(t)},t.version="19.2.3"},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(6672)},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,i(n)))}return e}function i(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},8853:(e,t,n)=>{"use strict";e.exports=n(5896)},9379:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(4705);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".c6b250ed.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="fantasy-empires-wars:";n.l=(r,a,i,o)=>{if(e[r])e[r].push(a);else{var l,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=r),e[r]=[a];var h=(t,n)=>{l.onerror=l.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),s&&document.head.appendChild(l)}}})(),n.p="/fantasy-empires-wars/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=i);var o=n.p+n.u(t),l=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,a[1](l)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,i,[o,l,s]=r,c=0;if(o.some(t=>0!==e[t])){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)s(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkfantasy_empires_wars=self.webpackChunkfantasy_empires_wars||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(5043),t=n(4391);const r={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a;const i=new Uint8Array(16);const o=[];for(let n=0;n<256;++n)o.push((n+256).toString(16).slice(1));function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}function s(e,t,n){var r,o,s,c;const u=null!==(r=null!==(o=(e=e||{}).random)&&void 0!==o?o:null===(s=(c=e).rng)||void 0===s?void 0:s.call(c))&&void 0!==r?r:function(){if(!a){if("undefined"===typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(i)}();if(u.length<16)throw new Error("Random bytes length must be >= 16");if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError("UUID byte range ".concat(n,":").concat(n+15," is out of buffer bounds"));for(let e=0;e<16;++e)t[n+e]=u[e];return t}return l(u)}const c=function(e,t,n){return!r.randomUUID||t||e?s(e,t,n):r.randomUUID()},u="Background_backgroundStyle__OP8pZ",d="TopPanel_frameContainer__R11TZ",h="TopPanel_fullSize__EfgIG",p="TopPanel_panelContainer__LjvIl";var f=n(9379);const m=e=>t=>!e(t),g={WARD_HANDS:"Ward-hands",WARRIOR:"Warrior",DWARF:"Dwarf",ORC:"Orc",HALFLING:"Halfling",ELF:"Elf",DARK_ELF:"Dark-Elf",GOLEM:"Golem",GARGOYLE:"Gargoyle",DENDRITE:"Dendrite",UNDEAD:"Undead"},y={BALLISTA:"Ballista",CATAPULT:"Catapult",BATTERING_RAM:"Battering Ram",SIEGE_TOWER:"Siege Tower"},v={FIGHTER:"Fighter",HAMMER_LORD:"Hammer-lord",RANGER:"Ranger",SHADOW_BLADE:"Shadowblade",OGR:"Ogr",PYROMANCER:"Pyromancer",CLERIC:"Cleric",DRUID:"Druid",ENCHANTER:"Enchanter",NECROMANCER:"Necromancer",WARSMITH:"Warsmith"},b=32,w=e=>Object.values(v).includes(e),S=e=>Object.values(y).includes(e),E=e=>Object.values(g).includes(e),k=e=>e===v.PYROMANCER||e===v.DRUID||e===v.ENCHANTER||e===v.CLERIC||e===v.NECROMANCER,x=e=>e===g.GOLEM||e===g.GARGOYLE||e===g.DENDRITE||e===v.WARSMITH,A={NONE:"None",PLAINS:"Plains",MOUNTAINS:"Mountains",GREEN_FOREST:"Green Forest",DARK_FOREST:"Dark Forest",HILLS:"Hills",SWAMP:"Swamp",DESERT:"Desert",VOLCANO:"Volcano",LAVA:"Lava",SUN_SPIRE_PEAKS:"Sunspire Peaks",GOLDEN_PLAINS:"Golden Plains",HEARTWOOD_GROVE:"Heartwood Grove",VERDANT_GLADE:"Verdant Glade",CRISTAL_BASIN:"Crystal Basin",MISTY_GLADES:"Misty Glades",SHADOW_MIRE:"Shadow Mire",BLIGHTED_FEN:"Blighted Fen"},C="lawful",P="neutral",_="chaotic",R="none",T=Object.values(y),N=Object.values(v).filter(k),O=Object.values(v).filter(m(k)),D=[g.WARD_HANDS,v.WARSMITH],L={[A.PLAINS]:{alignment:P,unitsToRecruit:[...D,g.WARRIOR,g.GOLEM,...T,v.FIGHTER,...N],goldPerTurn:{min:650,max:1e3},description:"Wide open fields where wind carries old war songs, and wanderers vanish beneath endless sky."},[A.MOUNTAINS]:{alignment:C,unitsToRecruit:[...D,g.DWARF,g.GARGOYLE,...T,v.HAMMER_LORD,...N],goldPerTurn:{min:900,max:1150},description:"Stone giants forged in ancient upheaval; their frozen peaks guard secrets older than kingdoms."},[A.GREEN_FOREST]:{alignment:C,unitsToRecruit:[...D,g.ELF,g.DENDRITE,...T,v.RANGER,...N],goldPerTurn:{min:800,max:950},description:"Sunlit woods where gentle spirits linger, guiding hunters, wanderers, and the lost."},[A.DARK_FOREST]:{alignment:_,unitsToRecruit:[...D,g.DARK_ELF,g.DENDRITE,...T,v.SHADOW_BLADE,...N],goldPerTurn:{min:800,max:950},description:"A brooding woodland where moonlight falters, and unseen things watch from between twisted boughs."},[A.HILLS]:{alignment:P,unitsToRecruit:[...D,g.HALFLING,g.GARGOYLE,...T,v.FIGHTER,...N],goldPerTurn:{min:500,max:700},description:"Rolling highlands shaped by time and storms, favored by scouts who read stories in every ridge."},[A.SWAMP]:{alignment:_,unitsToRecruit:[...D,g.ORC,g.GOLEM,...T,v.OGR,...N],goldPerTurn:{min:350,max:550},description:"Murk and moss entwine here, where each step sinks into whispers of forgotten, half-drowned tales."},[A.DESERT]:{alignment:P,unitsToRecruit:[...D,g.GOLEM,y.BATTERING_RAM,...O],goldPerTurn:{min:150,max:270},description:"Endless dunes scorched by merciless suns, hiding relics swallowed by empires long fallen."},[A.SUN_SPIRE_PEAKS]:{alignment:C,unitsToRecruit:[...D,g.DWARF,g.GARGOYLE,...T,v.HAMMER_LORD,v.CLERIC],goldPerTurn:{min:1e3,max:1e3},description:"Radiant heights bathed in celestial fire, said to echo with the hymns of the first dawn."},[A.GOLDEN_PLAINS]:{alignment:C,unitsToRecruit:[...D,g.WARRIOR,g.DWARF,g.GOLEM,...T,v.FIGHTER,v.CLERIC,v.DRUID,v.ENCHANTER],goldPerTurn:{min:500,max:600},description:"Grasses shimmer like sun-forged metal, nurturing harvests blessed by the land's ancient warmth."},[A.HEARTWOOD_GROVE]:{alignment:C,unitsToRecruit:[...D,g.ELF,g.DENDRITE,...T,v.RANGER,v.DRUID],goldPerTurn:{min:1e3,max:1e3},description:"The cradle of living forests, where colossal trees whisper the pulse of Orrivane itself."},[A.VERDANT_GLADE]:{alignment:C,unitsToRecruit:[...D,g.ELF,g.DENDRITE,...T,v.RANGER,v.CLERIC,v.DRUID,v.ENCHANTER],goldPerTurn:{min:500,max:600},description:"A lush sanctuary bursting with wild growth, where nature unfurls in joyous, untamed abundance."},[A.CRISTAL_BASIN]:{alignment:P,unitsToRecruit:[...D,g.WARRIOR,g.GOLEM,...T,v.FIGHTER,v.ENCHANTER],goldPerTurn:{min:1e3,max:1e3},description:"A hollow of shimmering crystal veins that catch stray moonlight, bending it into spectral hues."},[A.MISTY_GLADES]:{alignment:P,unitsToRecruit:[...D,g.WARRIOR,g.GOLEM,...T,v.FIGHTER,v.DRUID,v.ENCHANTER,v.PYROMANCER],goldPerTurn:{min:500,max:600},description:"Cool lowlands veiled in drifting blue mist, where sound softens and time feels strangely thin."},[A.VOLCANO]:{alignment:_,unitsToRecruit:[...D,g.ORC,g.GARGOYLE,...T,v.OGR,v.PYROMANCER],goldPerTurn:{min:1e3,max:1e3},description:"A furious mountain whose molten heart roars beneath the world, hungry for offerings of stone."},[A.LAVA]:{alignment:_,unitsToRecruit:[...D,g.ORC,g.GARGOYLE,...T,v.OGR,v.ENCHANTER,v.PYROMANCER,v.NECROMANCER],goldPerTurn:{min:500,max:600},description:"A seething river of fire where earth's skin tears open, leaving only heat, ruin, and trembling air."},[A.SHADOW_MIRE]:{alignment:_,unitsToRecruit:[...D,g.ORC,g.GOLEM,...T,v.OGR,v.NECROMANCER],goldPerTurn:{min:1e3,max:1e3},description:"A stagnant bog where shadows cling to the water, feeding on fear as readily as decay."},[A.BLIGHTED_FEN]:{alignment:_,unitsToRecruit:[...D,g.ORC,g.GOLEM,...T,v.OGR,v.ENCHANTER,v.PYROMANCER,v.NECROMANCER],goldPerTurn:{min:500,max:600},description:"Rot-soaked marshland cursed by old sorcery, where every root and reed seems to wither in despair."},[A.NONE]:{alignment:P,unitsToRecruit:[],goldPerTurn:{min:0,max:0},description:""}},M=e=>L[e].alignment,I=e=>L[e].goldPerTurn,j=(e,t)=>{if(!t)return L[e].unitsToRecruit;const n=[g.ORC,...T,v.OGR,...N];return e===A.GREEN_FOREST&&(n.push(g.DARK_ELF),n.push(v.SHADOW_BLADE)),n},z={STRONGHOLD:"Stronghold",BARRACKS:"Barracks",MAGE_TOWER:"Mage Tower",WATCH_TOWER:"Watch Tower",OUTPOST:"Outpost",WALL:"Castle Wall",DEMOLITION:"Building Demolition"},H={[g.WARD_HANDS]:{attack:5,defense:3,health:20,speed:2},[g.WARRIOR]:{attack:8,defense:6,health:25,speed:2},[g.DWARF]:{attack:12,defense:20,health:40,speed:1},[g.GOLEM]:{attack:25,defense:50,health:10,speed:5},[g.GARGOYLE]:{attack:25,defense:50,health:10,speed:5},[g.DENDRITE]:{attack:25,defense:50,health:10,speed:5},[g.UNDEAD]:{attack:25,defense:50,health:10,speed:5},[g.ORC]:{attack:10,defense:15,health:30,speed:2},[g.HALFLING]:{attack:6,defense:3,range:15,rangeDamage:8,health:15,speed:4},[g.ELF]:{attack:15,defense:4,range:20,rangeDamage:15,health:20,speed:3},[g.DARK_ELF]:{attack:15,defense:4,range:20,rangeDamage:15,health:20,speed:3},[v.WARSMITH]:{attack:30,defense:3,range:2,rangeDamage:30,health:18,speed:4},[v.FIGHTER]:{attack:30,defense:3,range:2,rangeDamage:30,health:18,speed:4},[v.HAMMER_LORD]:{attack:40,defense:3,range:2,rangeDamage:40,health:25,speed:4},[v.OGR]:{attack:40,defense:4,range:2,rangeDamage:45,health:30,speed:3},[v.SHADOW_BLADE]:{attack:30,defense:3,range:30,rangeDamage:30,health:18,speed:5},[v.RANGER]:{attack:30,defense:3,range:30,rangeDamage:30,health:18,speed:5},[v.PYROMANCER]:{attack:30,defense:3,range:30,rangeDamage:30,health:18,speed:2},[v.CLERIC]:{attack:25,defense:5,range:2,rangeDamage:25,health:20,speed:2},[v.DRUID]:{attack:20,defense:4,range:2,rangeDamage:20,health:22,speed:3},[v.ENCHANTER]:{attack:15,defense:3,range:35,rangeDamage:15,health:16,speed:2},[v.NECROMANCER]:{attack:35,defense:2,range:25,rangeDamage:35,health:15,speed:2}},F={[g.DWARF]:C,[g.ELF]:C,[v.HAMMER_LORD]:C,[v.RANGER]:C,[v.CLERIC]:C,[v.DRUID]:C,[g.WARD_HANDS]:P,[g.HALFLING]:P,[g.WARRIOR]:P,[y.BALLISTA]:P,[y.CATAPULT]:P,[y.BATTERING_RAM]:P,[y.SIEGE_TOWER]:P,[v.FIGHTER]:P,[v.ENCHANTER]:P,[g.ORC]:_,[g.DARK_ELF]:_,[g.UNDEAD]:_,[v.WARSMITH]:_,[v.OGR]:_,[v.SHADOW_BLADE]:_,[v.PYROMANCER]:_,[v.NECROMANCER]:_},G={[g.WARD_HANDS]:"Local hands risen in necessity, their resolve rough but unbroken against Orrivane\u2019s growing dread.",[g.WARRIOR]:"Hardened veterans of countless skirmishes, these soldiers fight for gold, glory, or the fragile peace that follows both.",[g.DWARF]:"Clad in runed steel and bound by oath, Dwarves hold the line like mountains given form\u2014unyielding, proud, and slow to fall.",[g.UNDEAD]:"Raised beyond fear and freed from breath, the Undead march in silence\u2014enduring not by life, but refusal to fall.",[g.GOLEM]:"Hollowed of will and bound to command, Golems move only by the Warsmith\u2019s word\u2014where they tread, walls remember earth.",[g.GARGOYLE]:"Formed to endure and denied intent, Gargoyles remain stone without command\u2014wings folded in silence.",[g.DENDRITE]:"Awakened without desire, Dendrites obey alone the Warsmith\u2014rooted and still when the voice is gone.",[g.ORC]:"Forged in chaos and fire, Orcs live for the clash of steel\u2014each battle a hymn to their untamed hunger for conquest.",[g.HALFLING]:"Small in stature, stubborn in spirit\u2014halfling slingers pelt foes with stones and startling courage.",[g.ELF]:"Silent as moonlight and swift as wind through leaves, Elven archers strike before their foes even sense the bowstring\u2019s whisper.",[g.DARK_ELF]:"Born beneath shadowed groves, Dark Elves blend beauty with cruelty\u2014their arrows carry both poison and pride.",[y.BALLISTA]:"Ancient engines of precision death, Ballista pierce armor and arrogance alike with thunderous finality.",[y.CATAPULT]:"Stone-flingers of ruin, Catapults reduce fortresses to dust and kings to memory\u2014patient, implacable, and deaf to mercy.",[y.BATTERING_RAM]:"Crushing behemoths of war, Battering Rams smash through walls and armies alike, their charge a testament to brute force and determination.",[y.SIEGE_TOWER]:"Fortress crushers of war, Siege Towers breach defenses with relentless might, their siege engines a symbol of siege warfare\u2019s brutal efficiency.",[v.WARSMITH]:"Older than kingdoms, Warsmiths speak the language of command\u2014through them, the Driven move, endure, and unmake.",[v.FIGHTER]:"Champions of the common folk, Fighters carry the banners of law and honor into every battle, their courage as sharp as their blades.",[v.HAMMER_LORD]:"Bearing hammers that have shattered both stone and legend, Hammerlords are dwarven paragons of strength and unyielding resolve.",[v.OGR]:"Once feared as destroyers, the Ogr champions now fight with grim purpose\u2014seeking to silence all who dare wield the arcane.",[v.SHADOW_BLADE]:"A silent killer born of twilight, where loyalty is as thin as moonlight.",[v.RANGER]:"Keepers of forgotten groves, Rangers walk unseen between root and shadow, striking swiftly to preserve the wild balance of Orrivane.",[v.PYROMANCER]:"Born of embers and fury, Pyromancers command the flames of creation\u2014each spell a hymn to passion and ruin.",[v.CLERIC]:"Guided by celestial whispers, Clerics mend the wounds of body and spirit alike, their faith a shield against the growing dark.",[v.DRUID]:"Bound to the heartbeat of the wild, Druids channel Orrivane\u2019s living breath\u2014healing, nurturing, and unleashing nature\u2019s wrath.",[v.ENCHANTER]:"Masters of unseen threads, Enchanters weave illusions and insight from pure thought, bending truth like light through a prism.",[v.NECROMANCER]:"Whisperers of death\u2019s secrets, Necromancers blur the line between decay and command, binding restless souls to their grim will."},B=e=>(0,f.A)({},H[e]),W=e=>Object.entries(F).filter(t=>{let[n,r]=t;return r===e}).map(e=>{let[t]=e;return t}),U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.NONE;switch(e){case g.WARD_HANDS:return{maintainCost:2,recruitCost:300,recruitTime:1,recruitedIn:z.BARRACKS,recruitedUnits:30,description:G[e]};case g.WARRIOR:return{maintainCost:4,recruitCost:500,recruitTime:1,recruitedIn:z.BARRACKS,recruitedUnits:20,description:G[e]};case g.DWARF:return{maintainCost:5,recruitCost:800,recruitTime:1,recruitedIn:z.BARRACKS,recruitedUnits:20,description:G[e]};case g.GOLEM:case g.GARGOYLE:case g.DENDRITE:return{maintainCost:0,recruitCost:1e3,recruitTime:1,recruitedIn:z.BARRACKS,recruitedUnits:20,description:G[e]};case g.UNDEAD:return{maintainCost:7,recruitCost:800,recruitTime:1,recruitedIn:z.BARRACKS,recruitedUnits:20,description:G[e]};case g.ORC:return{maintainCost:4.5,recruitCost:600,recruitTime:1,recruitedIn:z.BARRACKS,recruitedUnits:20,description:G[e]};case g.HALFLING:return{maintainCost:3,recruitCost:700,recruitTime:2,recruitedIn:z.BARRACKS,recruitedUnits:25,description:G[e]};case g.ELF:case g.DARK_ELF:return{maintainCost:5,recruitCost:2500,recruitTime:2,recruitedIn:z.BARRACKS,recruitedUnits:20,description:G[e]};case y.BALLISTA:return{maintainCost:150,recruitCost:1500,recruitTime:3,recruitedIn:z.BARRACKS,recruitedUnits:1,description:G[e],durability:5};case y.CATAPULT:return{maintainCost:250,recruitCost:1e3,recruitTime:3,recruitedIn:z.BARRACKS,recruitedUnits:1,description:G[e],durability:3};case y.BATTERING_RAM:return{maintainCost:50,recruitCost:700,recruitTime:1,recruitedIn:z.BARRACKS,recruitedUnits:1,description:G[e],durability:7};case y.SIEGE_TOWER:return{maintainCost:250,recruitCost:1e3,recruitTime:2,recruitedIn:z.BARRACKS,recruitedUnits:1,description:G[e],durability:2};case v.FIGHTER:case v.WARSMITH:case v.HAMMER_LORD:case v.OGR:case v.SHADOW_BLADE:case v.RANGER:return{maintainCost:100,recruitCost:1500,recruitTime:3,recruitedIn:z.BARRACKS,recruitedUnits:1,description:G[e]};case v.CLERIC:case v.DRUID:case v.ENCHANTER:case v.PYROMANCER:case v.NECROMANCER:return{maintainCost:100,recruitCost:2500,recruitTime:K(e,t),recruitedIn:z.MAGE_TOWER,recruitedUnits:1,description:G[e]};default:throw new Error("getRecruitInfo: Unknown unit type ".concat(e))}},V={[v.CLERIC]:{[A.SUN_SPIRE_PEAKS]:1,[A.GOLDEN_PLAINS]:2,[A.VERDANT_GLADE]:2},[v.DRUID]:{[A.HEARTWOOD_GROVE]:1,[A.VERDANT_GLADE]:2,[A.GOLDEN_PLAINS]:2,[A.MISTY_GLADES]:2},[v.ENCHANTER]:{[A.CRISTAL_BASIN]:1,[A.MISTY_GLADES]:2,[A.VERDANT_GLADE]:2,[A.LAVA]:2},[v.PYROMANCER]:{[A.VOLCANO]:1,[A.LAVA]:2,[A.MISTY_GLADES]:2,[A.BLIGHTED_FEN]:2},[v.NECROMANCER]:{[A.SHADOW_MIRE]:1,[A.BLIGHTED_FEN]:2,[A.LAVA]:2}},K=(e,t)=>{var n;const r=V[e];return r&&null!==(n=r[t])&&void 0!==n?n:3},q="Human",Y="Elf",Q="Dwarf",$="Orc",X="Undead",Z="None",J="Melee",ee="Magic",te="Anti Magic",ne="Pure Magic",re="Undead",ae={WHITE:"white",BLACK:"black",GREEN:"green",BLUE:"blue",RED:"red"},ie=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{id:Object.freeze(e.id),playerType:Object.freeze(t),playerProfile:Object.freeze(e),traits:oe(e),landsOwned:new Set,diplomacy:{},empireTreasures:[],mana:{[ae.WHITE]:0,[ae.BLACK]:0,[ae.GREEN]:0,[ae.BLUE]:0,[ae.RED]:0},effects:[],quests:[],vault:n,color:e.color}},oe=e=>{const t=le(e);return{restrictedMagic:t,recruitedUnitsPerLand:ce(e,t),recruitmentSlots:ue(e,t)}},le=e=>{const t=new Set;switch(Object.values(ae).forEach(e=>t.add(e)),e.doctrine){case J:switch(e.type){case v.CLERIC:case v.HAMMER_LORD:t.delete(ae.WHITE);break;case v.DRUID:case v.RANGER:t.delete(ae.GREEN);break;case v.ENCHANTER:case v.FIGHTER:t.delete(ae.BLUE);break;case v.PYROMANCER:case v.OGR:t.delete(ae.RED);break;case v.NECROMANCER:case v.SHADOW_BLADE:t.delete(ae.BLACK)}break;case ee:switch(e.type){case v.CLERIC:case v.HAMMER_LORD:case v.DRUID:case v.RANGER:t.delete(ae.WHITE),t.delete(ae.GREEN),t.delete(ae.BLUE);break;case v.ENCHANTER:case v.FIGHTER:case v.OGR:t.delete(ae.GREEN),t.delete(ae.BLUE),t.delete(ae.RED);break;case v.PYROMANCER:case v.NECROMANCER:case v.SHADOW_BLADE:t.delete(ae.BLUE),t.delete(ae.RED),t.delete(ae.BLACK)}break;case ne:t.clear()}return t},se={[ae.WHITE]:v.CLERIC,[ae.GREEN]:v.DRUID,[ae.BLUE]:v.ENCHANTER,[ae.RED]:v.PYROMANCER,[ae.BLACK]:v.NECROMANCER},ce=(e,t)=>{const n=Object.fromEntries(Object.values(A).map(e=>[e,new Set])),r=W(_).filter(m(k)),a=W(C).filter(m(k));Object.values(A).filter(e=>e!==A.NONE).forEach(t=>{switch(t===A.DESERT?n[t].add(y.BATTERING_RAM):Object.values(y).forEach(e=>n[t].add(e)),e.doctrine){case re:j(t,!1).filter(x).forEach(e=>n[t].add(e));break;case te:j(t,!1).filter(m(x)).filter(m(k)).forEach(e=>{e!==g.HALFLING&&e!==g.WARD_HANDS&&n[t].add(e)});break;default:j(t,!1).filter(m(x)).forEach(e=>n[t].add(e)),e.alignment===_&&a.forEach(e=>n[t].delete(e)),e.alignment===C&&r.forEach(e=>n[t].delete(e))}switch(e.race){case Y:n[t].delete(g.ORC),n[t].delete(v.OGR),e.alignment===_&&(n[t].delete(g.ELF),n[t].delete(v.RANGER)),e.alignment===C&&(n[t].delete(g.DARK_ELF),n[t].delete(v.SHADOW_BLADE),r.forEach(e=>n[t].delete(e)));break;case $:n[t].delete(g.ELF),n[t].delete(g.DARK_ELF),n[t].delete(v.RANGER),n[t].delete(v.SHADOW_BLADE),e.alignment===_&&a.forEach(e=>n[t].delete(e))}});const i=Object.entries(se).filter(e=>{let[n]=e;return!t.has(n)}).map(e=>{let[,t]=e;return t});return Object.values(A).filter(e=>e!==A.NONE).forEach(e=>{i.forEach(t=>n[e].add(t))}),n},ue=(e,t)=>{const n={},r=Object.values(ae).filter(e=>!t.has(e)).map(e=>se[e]);r.length>0&&(n[z.MAGE_TOWER]={0:new Set(r)});const a=Object.values(g),i=Object.values(y),o=Object.values(v).filter(m(k));switch(e.doctrine){case re:n[z.BARRACKS]={0:new Set([...a.filter(x),...o.filter(x)]),1:new Set([...a.filter(x),...o.filter(x)]),2:new Set([...o.filter(x)])};break;case te:n[z.BARRACKS]={0:new Set([...a.filter(m(x))]),1:new Set([...i]),2:new Set([...o.filter(m(x))])};break;default:n[z.BARRACKS]={0:new Set([...a.filter(m(x)),...i,...o.filter(m(x))]),1:new Set([...a.filter(m(x)),...i,...o.filter(m(x))]),2:new Set([...a.filter(m(x)),...i,...o.filter(m(x))])}}return n},de={[z.STRONGHOLD]:{type:z.STRONGHOLD,buildCost:15e3,maintainCost:0,description:"Protect army and produce gold"},[z.BARRACKS]:{type:z.BARRACKS,buildCost:1e4,maintainCost:1e3,description:"Allows recruitment of military units"},[z.MAGE_TOWER]:{type:z.MAGE_TOWER,buildCost:15e3,maintainCost:2e3,description:"Allows recruitment of Mage units"},[z.WATCH_TOWER]:{type:z.WATCH_TOWER,buildCost:5e3,maintainCost:300,description:"Increases vision range and provides early warning"},[z.OUTPOST]:{type:z.OUTPOST,buildCost:1e4,maintainCost:1e3,description:"The army stationed at the outpost defend all lands within a radius of 4"},[z.WALL]:{type:z.WALL,buildCost:5e3,maintainCost:100,description:"Provides strong defensive bonuses"},[z.DEMOLITION]:{type:z.DEMOLITION,buildCost:2e3,maintainCost:-1,description:"Demolish building and prepare territory for a new construction"}},he=e=>de[e],pe="Boots of the Windstrider",fe="Gauntlets of the Ironheart",me="Amulet of Serenity",ge="Helm of Insight",ye="Ring of the Ascendant",ve="Cloak of Shadows",be="Wand of Turning",we="Orb of Storms",Se="Seed of Renewal",Ee="Aegis Shard",ke="Phoenix Feather",xe="Glyph of Severance",Ae="Compass of Dominion",Ce="Deed of Reclamation",Pe="Mercy of Orrivane",_e="Hourglass of Delay",Re="Mirror of Illusion",Te="Banner of Unity",Ne="Heartstone of Orrivane",Oe="Shard of the Silent Anvil",De="Crown of Dominion",Le="Scepter of Tempests",Me="Obsidian Chalice",Ie="Verdant Idol",je="Starwell Prism",ze="player",He="army",Fe="land",Ge="positive",Be="negative",We="permanent",Ue="player",Ve="opponent",Ke="all",qe=[{type:pe,lore:"Woven from feathers of sky-born eagles, they hum with the breath of dawn itself.",description:"Increase movement speed.",isConsumable:!1},{type:fe,lore:"Forged in molten stone by dwarven ancestors, they pulse with the rhythm of war.",description:"Increase attack",isConsumable:!0},{type:me,lore:"A crystal of purest calm, reflecting peace even in the heart of battle.",description:"Increase defense",isConsumable:!0},{type:ge,lore:"Bestowed by elven seers to those deemed worthy to see what others fear.",description:"Reveals terrain in radius 2",isConsumable:!1},{type:ye,lore:"Forged from starlight that fell into mortal hands; it awakens hidden potential but hungers for ambition.",description:"Hero gains +2 levels instead of +1",isConsumable:!1},{type:ve,lore:"Crafted by unseen hands in the dark between worlds; the air bends to its wearer\u2019s will.",description:"+20% chance to evade damage",isConsumable:!1}],Ye=[{type:be,lore:"Glows faintly when darkness rises, whispering the forgotten prayers of light.",description:"Turns undead on the selected land",target:Ve,isConsumable:!0},{type:we,lore:"Within its swirling mist sleeps the echo of a tempest god.",description:"Casts Tornado spell",target:Ve,isConsumable:!0},{type:Se,lore:"This seed sprouts overnight into a structure born of the world\u2019s memory.",description:"Restores one destroyed building. Even Stronghold on neutral land is restored",target:Ue,isConsumable:!0},{type:Ee,lore:"A dormant ward that shatters the moment true harm is attempted.",description:"Negates the next hostile spell on one land",target:Ue,isConsumable:!0,rules:{type:We,target:Fe,duration:0}},{type:ke,lore:"Burns with immortal fire; rebirth always comes with the scent of ash.",description:"Revives a fallen hero once",target:Ue,isConsumable:!0},{type:xe,lore:"Ancient and patient, it remembers how the land once was.",description:"Removes one negative effect from a land",target:Ue,isConsumable:!0},{type:Ae,lore:"Its needle bends toward power, not north.",description:"Reveals all lands owned by one player for 2 turns",target:Ve,isConsumable:!0,rules:{type:Ge,target:Fe,duration:2}},{type:Ce,lore:"An ancient charter granting fleeting dominion by forgotten law.",description:"Claim a neutral land for income and mana only",target:Ve,isConsumable:!0,rules:{type:We,target:Fe,duration:0}},{type:Pe,lore:"When fate turns cruel, Orrivane opens a hidden path home.",description:"First hero lost on a quest instead escapes to a stronghold",target:Ue,isConsumable:!1,rules:{type:We,target:ze,duration:0}},{type:_e,lore:"A timeless tool of the ancient gods; it delays the time of the world.",description:"All armies on land could not move for one turn",target:Ve,isConsumable:!0,rules:{type:Be,target:Fe,duration:1}}],Qe=[{type:Re,lore:"Once owned by Selene Duskwhisper; it reflects not truth but intention.",description:"Enemy sees false army information on your land",isConsumable:!1},{type:Te,lore:"An ancient symbol of peace that rallies hearts even in distant provinces.",description:"+25% income from all lands",isConsumable:!1},{type:Ne,lore:"Pulses with the rhythm of the living world \u2014 the first heartbeat of creation.",description:"+1 mana from the land\u2019s natural source for each controlled special land.",isConsumable:!1},{type:Oe,lore:"Forged in defiance of the arcane, this iron shard hums with a stillness that smothers spellcraft.",description:"Reduces enemy spell damage against you by 35% and increases army morale by 10%.",isConsumable:!1},{type:De,lore:"Worn by the first High King, its weight commands the land itself.",description:"-15% building and recruitment cost empire-wide",isConsumable:!1},{type:Le,lore:"The air crackles with the echo of thunder whenever it\u2019s raised.",description:"Increases spell damage by 25%",isConsumable:!1},{type:Me,lore:"Said to be carved from a meteor; it thirsts for both power and blood.",description:"Converts 10% of income into 0.1% of black mana",isConsumable:!1},{type:Ie,lore:"Covered in moss that never dies; druids whisper that it breathes.",description:"All Green Mana spells cost 15% less",isConsumable:!1},{type:je,lore:"Said to resonate with the afterglow of the first dawn, it repeats what has once been cast.",description:"Each offensive spell has a 15% chance to automatically repeat once its effect on a nearby enemy land.",isConsumable:!1}],$e=e=>Ye.some(t=>t.type===e.treasure.type),Xe=e=>Ye.find(t=>t.type===e),Ze=e=>e.slots.some(e=>!e.isOccupied),Je=(e,t,n)=>e.slots.some((e,r)=>{var a;return!e.isOccupied&&(null===(a=n[r])||void 0===a?void 0:a.has(t))}),et=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.slots.filter(e=>!e.isOccupied).length)&&void 0!==t?t:0},tt={id:"none",name:"none",alignment:P,race:q,type:v.FIGHTER,doctrine:Z,level:1,description:"None",color:"white"},nt=[{id:"alaric",name:"Alaric the Bold",alignment:C,race:q,type:v.FIGHTER,doctrine:J,level:8,description:"A noble paladin who has sworn to protect the innocent and uphold justice across the realm.",color:"blue"},{id:"morgana",name:"Morgana Shadowweaver",alignment:_,race:q,type:v.NECROMANCER,doctrine:ee,level:12,description:"A powerful sorceress who seeks forbidden knowledge and commands dark magic.",color:"purple"},{id:"thorin",name:"Thorin Ironforge",alignment:P,race:Q,type:v.HAMMER_LORD,doctrine:J,level:10,description:"A dwarven smith-warrior who values craftsmanship and honor above all else.",color:"orange"},{id:"kaer",name:"Kaer Dravane",alignment:P,race:X,type:v.WARSMITH,doctrine:re,level:28,description:"A tired soul of bone and will, seeking silence at the edge of eterni",color:"burgundy"},{id:"vex",name:"Vex the Cunning",alignment:C,race:Y,type:v.RANGER,doctrine:J,level:7,description:"An elven ranger dedicated to protecting the ancient forests and their secrets.",color:"green"},{id:"grimjaw",name:"Grimjaw the Destroyer",alignment:_,race:$,type:v.OGR,doctrine:J,level:15,description:"A brutal orc warlord who leads through fear and seeks to conquer all lands.",color:"red"},{id:"serena",name:"Serena Lightbringer",alignment:C,race:q,type:v.CLERIC,doctrine:ee,level:11,description:"A devout cleric who channels divine power to heal allies and smite evil.",color:"yellow"},{id:"kael",name:"Kael Stormwind",alignment:P,race:q,type:v.ENCHANTER,doctrine:ee,level:9,description:"A wandering mage who seeks to master all schools of magic through experimentation.",color:"blue"},{id:"elara",name:"Elara Starshot",alignment:_,race:Y,type:v.RANGER,doctrine:ee,level:6,description:"A sly rogue who uses wit and stealth to achieve goals through any means necessary.",color:"gray"},{id:"marcus",name:"Marcus the Divine",alignment:C,race:q,type:v.CLERIC,doctrine:ee,level:13,description:"A devoted priest who spreads hope and healing throughout the lands.",color:"yellow"},{id:"lydia",name:"Lydia Moonwhisper",alignment:P,race:q,type:v.CLERIC,doctrine:ee,level:9,description:"A compassionate healer who tends to the wounded with divine grace.",color:"purple"},{id:"selene",name:"Selene Moonwhisper",alignment:_,race:q,type:v.ENCHANTER,doctrine:J,level:9,description:"A manipulator of perception and dreams, weaving illusions that blur truth and deceit.",color:"darkSlateGray"},{id:"elderoak",name:"Elderoak the Wise",alignment:P,race:Y,type:v.DRUID,doctrine:ee,level:14,description:"An ancient druid who maintains the balance between civilization and nature.",color:"green"},{id:"valdris",name:"Valdris Bonecaller",alignment:_,race:q,type:v.NECROMANCER,doctrine:ee,level:16,description:"A sinister necromancer who commands the undead and delves into forbidden arts.",color:"purple"},{id:"ignatius",name:"Ignatius Flameforge",alignment:P,race:$,type:v.PYROMANCER,doctrine:ee,level:11,description:"A master of fire magic who forges spells as skillfully as weapons.",color:"orange"},{id:"ember",name:"Ember Fireheart",alignment:_,race:$,type:v.PYROMANCER,doctrine:J,level:10,description:"A fierce sorceress whose burning passion fuels her destructive fire magic.",color:"red"},{id:"nullwarden",name:"Thane Nullwarden",alignment:C,race:q,type:v.FIGHTER,doctrine:te,level:28,description:"A zealot of iron faith, sworn to purge magic from Orrivane.",color:"perl-white"},{id:"sereth",name:"Sereth Vael",alignment:_,race:Y,type:v.NECROMANCER,doctrine:ne,level:18,description:"A Shadow Elf sorceress who dark arts are unspeakable.",color:"obsidian"},{id:"zarhka",name:"Zarhka Cinder-Oath",alignment:_,race:$,type:v.PYROMANCER,doctrine:ne,level:21,description:"Orc pyromancer who abandoned clan and steel, trusting only flame and doctrine.",color:"cinderRust"},{id:"ilyra",name:"Ilyra von Caelorn",alignment:_,race:q,type:v.ENCHANTER,doctrine:ne,level:16,description:"Bound to Pure Magic, she weaves spells calm, precise with measured detachment.",color:"aetherSteel"},{id:"aelthir",name:"Aelthir Vaenor",alignment:_,race:Y,type:v.DRUID,doctrine:ne,level:14,description:"A quiet druid who walks with the forest, bound not to nature\u2019s will, but to its restraint.",color:"aetherSteel"},{id:"brunna",name:"Brunna Halvein",alignment:_,race:Q,type:v.CLERIC,doctrine:ne,level:27,description:"A quiet druid who walks with the forest, bound not to nature\u2019s will, but to its restraint.",color:"aetherSteel"}],rt="No Treaty",at="Peace",it="War",ot="Alliance",lt=ie(tt,"computer"),st=(e,t)=>{var n;return null!==(n=e.players.find(e=>e.id===t))&&void 0!==n?n:lt},ct=e=>st(e,e.turnOwner),ut=(e,t,n)=>(n?st(e,n):ct(e)).playerProfile.doctrine===t,dt=(e,t)=>e.effects.some(e=>e.sourceId===t&&(e.rules.duration>0||e.rules.type===We)),ht=(e,t)=>{var n;return null===(n=e.empireTreasures)||void 0===n?void 0:n.some(e=>e.treasure.type===t)},pt=(e,t)=>{var n;const r=null===(n=e.empireTreasures)||void 0===n?void 0:n.find(e=>e.id===t);if(r)return $e(r)?r:void 0},ft=e=>{const t=(n=e.traits,Object.values(n.recruitedUnitsPerLand).some(e=>Array.from(e).some(e=>k(e))));var n;return Object.values(z).filter(e=>e!==z.MAGE_TOWER||t).map(he).filter(t=>t.buildCost<=e.vault)},mt=(e,t,n)=>{var r;const a=j(t.type,t.corrupted),i=t.corrupted?(o=e.traits.recruitedUnitsPerLand,Object.values(o).reduce((e,t)=>(t.forEach(t=>e.add(t)),e),new Set)):null!==(r=e.traits.recruitedUnitsPerLand[t.type])&&void 0!==r?r:new Set;var o;const l=a.filter(e=>i.has(e));if(null==n)return l;const s=e.traits.recruitmentSlots[n.type];return Array.from(l).filter(e=>Je(n,e,s))},gt=(e,t,n)=>t===n||t===tt.id||n===tt.id?rt:st(e,t).diplomacy[n].status,yt=e=>"".concat(e.row,"-").concat(e.col),vt=(e,t)=>(0,f.A)((0,f.A)({},e),{},{turnOwner:t}),bt=(e,t,n)=>(0,f.A)((0,f.A)({},e),{},{players:e.players.map(e=>e.id===t?(0,f.A)((0,f.A)({},e),n):e)}),wt=(e,t,n)=>bt(e,t,{vault:st(e,t).vault+n}),St=(e,t,n,r)=>{const a=st(e,t),i=a.mana[n]+r,o=(0,f.A)((0,f.A)({},a.mana),{},{[n]:i>=200?200:i});return bt(e,t,{mana:o})},Et=(e,t,n)=>{const r=st(e,t),a=new Set(r.landsOwned);return a.add(yt(n)),bt(e,t,{landsOwned:a})},kt=(e,t,n)=>{const r=st(e,t),a=new Set(r.landsOwned);return a.delete(yt(n)),bt(e,t,{landsOwned:a})},xt=(e,t,n)=>bt(e,t,Lt(st(e,t),n)),At=(e,t,n)=>{const r=yt(t),a=n(e.map.lands[r]);return(0,f.A)((0,f.A)({},e),{},{map:(0,f.A)((0,f.A)({},e.map),{},{lands:(0,f.A)((0,f.A)({},e.map.lands),{},{[r]:a})})})},Ct=(e,t,n)=>At(e,t,e=>(0,f.A)((0,f.A)({},e),{},{effects:[...e.effects,n]})),Pt=(e,t,n)=>At(e,t,e=>(0,f.A)((0,f.A)({},e),{},{effects:e.effects.filter(e=>e.id!==n)})),_t=(e,t,n)=>At(e,t,e=>(0,f.A)((0,f.A)({},e),{},{buildings:e.buildings.map(n)})),Rt=(e,t,n)=>_t(e,t,e=>{if(0===e.slots.length)return e;const t=n(e.slots);return(0,f.A)((0,f.A)({},e),{},{slots:t})}),Tt=(e,t,n)=>At(e,t,e=>(0,f.A)((0,f.A)({},e),{},{buildings:[...e.buildings,n]})),Nt=(e,t,n)=>{const r=ie(t,n,15e3);let a=((e,t)=>(0,f.A)((0,f.A)({},e),{},{players:[...e.players,t]}))(e,r);e.turnOwner===tt.id&&(a=vt(a,r.id));const i=e.players.reduce((e,t)=>It(e,r.id,t.id,rt),a);Object.assign(e,i)},Ot=e=>{const{players:t,turnOwner:n}=e;if(0===t.length)return;const r=(t.findIndex(e=>e.id===n)+1)%t.length;Object.assign(e,vt(e,t[r].id)),0===r&&Object.assign(e,(e=>(0,f.A)((0,f.A)({},e),{},{turn:e.turn+1}))(e))},Dt=(e,t)=>e.landsOwned.has(yt(t)),Lt=(e,t)=>(0,f.A)((0,f.A)({},e),{},{empireTreasures:[...e.empireTreasures,t]}),Mt=(e,t)=>(0,f.A)((0,f.A)({},e),{},{empireTreasures:e.empireTreasures.filter(e=>e.id!==t.id)}),It=(e,t,n,r)=>{const a={status:r,lastUpdated:e.turn};return(0,f.A)((0,f.A)({},e),{},{players:e.players.map(e=>e.id===t?(0,f.A)((0,f.A)({},e),{},{diplomacy:(0,f.A)((0,f.A)({},e.diplomacy),{},{[n]:a})}):e.id===n?(0,f.A)((0,f.A)({},e),{},{diplomacy:(0,f.A)((0,f.A)({},e.diplomacy),{},{[t]:a})}):e)})},jt=e=>({heroes:e.heroes.map(e=>({name:e.name,type:e.type,level:e.level})),regulars:e.regulars.map(e=>({id:e.type,rank:e.rank,count:e.count})),warMachines:e.warMachines.map(e=>({type:e.type,count:e.count,durability:e.durability}))}),zt=e=>1!==e.movement.path.length,Ht=e=>e.movement.path[e.movement.progress],Ft=(e,t)=>e.armies.filter(e=>zt(e)?e.movement.path.length>e.movement.progress&&yt(e.movement.path[e.movement.progress])===yt(t):e.movement.path.length>0&&yt(e.movement.path[0])===yt(t)),Gt=(e,t,n)=>Ft(e,t).filter(e=>n.includes(e.controlledBy)),Bt=(e,t)=>e.armies.filter(n=>n.controlledBy===(null!==t&&void 0!==t?t:e.turnOwner)),Wt=(e,t)=>Math.max(...Bt(e).flatMap(e=>e.heroes.filter(e=>e.type===t).map(e=>e.level)),...ct(e).quests.filter(e=>e.hero.type===t).map(e=>e.hero.level),0),Ut=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Bt(e,null!==t&&void 0!==t?t:e.turnOwner).filter(e=>zt(e)===n).flatMap(e=>e.heroes.flatMap(t=>({hero:t,position:Ht(e)})))},Vt=(e,t)=>Ft(e,t).some(e=>e.heroes.some(e=>e.type===v.WARSMITH)),Kt=[{name:"blue",value:"#4A90E2",displayName:"Blue"},{name:"perl-white",value:"#BB9981",displayName:"Perl White"},{name:"red",value:"#C0392B",displayName:"Red"},{name:"green",value:"#27AE60",displayName:"Green"},{name:"orange",value:"#E67E22",displayName:"Orange"},{name:"purple",value:"#8B4A9C",displayName:"Purple"},{name:"yellow",value:"#F1C40F",displayName:"Yellow"},{name:"gray",value:"#95A5A6",displayName:"Gray"},{name:"burgundy",value:"#8B1538",displayName:"Bloody Burgundy"},{name:"darkSlateGray",value:"#2F4F4F",displayName:"Dark Slate Gray"},{name:"obsidian",value:"#3a2f41",displayName:"Black Obsidian"},{name:"cinderRust",value:"#7A2E1C",displayName:"Cinder Rust"},{name:"aetherSteel",value:"#4F6F8F",displayName:"Aether Steel"},{name:"verdantAsh",value:"#6F8F6A",displayName:"Verdant Ash"},{name:"sanctumLinen",value:"#D8CFAF",displayName:"Sanctum Linen"}],qt=e=>{const t=Kt.find(t=>t.name===e);return(null===t||void 0===t?void 0:t.value)||"#FFFFFF"},Yt=e=>e[Math.floor(Math.random()*e.length)],Qt=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,$t={TURN_UNDEAD:"Turn Undead",VIEW_TERRITORY:"View Territory",BLESSING:"Blessing Of Protection",HEAL:"Heal Wounded",ILLUSION:"Veil of Misdirection",TELEPORT:"Teleport",TORNADO:"Tornado",EXCHANGE:"Arcane Exchange",FERTILE_LAND:"Fertile Lands",ENTANGLING_ROOTS:"Entangling Roots",BEAST_ATTACK:"Beast Attack",EARTHQUAKE:"Earthquake",EMBER_RAID:"Ember Raid",FORGE_OF_WAR:"Forge Of War",FIRESTORM:"Firestorm",METEOR_SHOWER:"Meteor Shower",CORRUPTION:"Corruption",RAISE_DEAD_HERO:"Raise Dead Hero",SUMMON_UNDEAD:"Summon Undead",PLAGUE:"Plague"},Xt=(e,t)=>e.map.lands[yt(t)],Zt=(e,t)=>{var n,r;return null!==(n=null===(r=e.players.find(e=>e.landsOwned.has(yt(t))))||void 0===r?void 0:r.id)&&void 0!==n?n:tt.id},Jt=(e,t)=>e.buildings.find(e=>e.id===t),en=["Gaze too long, and the mirror gazes back","Look deeper, and the land begins reflects","What you seek - fades, leave only reflection","The truth recoils when watched too closely","The land does not show what it is","Your vision lingers\u2014and something notices","Sight finds no footing where mirrors rule","The land reflects intent, not presence","Focus breaks; the image stares back","Here, sight is a question, not an answer"],tn=(e,t,n)=>e.effects.some(e=>e.sourceId===t&&(e.rules.duration>0||e.rules.type===We)&&(void 0===n||e.appliedBy===n)),nn=(e,t)=>e.buildings.some(e=>e.type===t),rn=(e,t)=>st(e,null!==t&&void 0!==t?t:e.turnOwner).landsOwned.values().toArray().map(t=>e.map.lands[t]),an=e=>{const t=new Set,n=rn(e);n.forEach(e=>{tn(e,Ce)&&t.add(e)});return n.filter(e=>nn(e,z.STRONGHOLD)).forEach(n=>cn(e.map.dimensions,n.mapPos,1).forEach(n=>t.add(Xt(e,n)))),t.values().toArray()},on=e=>{const t=new Set,n=an(e).flatMap(e=>yt(e.mapPos));rn(e).filter(e=>!n.includes(yt(e.mapPos))).forEach(e=>t.add(e)),Bt(e).filter(e=>!n.includes(yt(Ht(e)))).map(t=>Xt(e,Ht(t))).forEach(e=>t.add(e));const r=((e,t)=>{const{turnOwner:n}=e;return e.players.filter(e=>e.id!==n&&null!=e.diplomacy[n]&&t.includes(e.diplomacy[n].status))})(e,[ot]).map(e=>e.id);return r.flatMap(t=>rn(e,t)).forEach(e=>t.delete(e)),t.values().toArray()},ln=(e,t,n)=>{if(!un(e,t)||!un(e,n))return[];if(t.row===n.row&&t.col===n.col)return[t];const r=new Set,a=[];for(r.add(yt(t)),a.push({pos:t,path:[t]});a.length>0;){const t=a.shift();if(t.pos.row===n.row&&t.pos.col===n.col)return t.path;const i=dn(e,t.pos);for(const e of i){const n=yt(e);if(!r.has(n)){const i=[...t.path,e];a.push({pos:e,path:i}),r.add(n)}}}return[]},sn=(e,t)=>e.filter(e=>!(e.row===t.row&&e.col===t.col)),cn=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!un(e,t)||n<0)return[];const a=[],i=[t];if(0===n)return i;if(1===n)return i.push(...dn(e,t)),r?sn(i,t):i;for(a.push({pos:t,dist:0});a.length>0;){const t=a.shift(),r=dn(e,t.pos);for(let e of r)!Array.from(i).some(t=>t.row===e.row&&t.col===e.col)&&t.dist+1<=n&&(a.push({pos:e,dist:t.dist+1}),i.push(e))}return r?sn(i,t):i},un=(e,t)=>{const{rows:n,cols:r}=e;if(t.row<0||t.row>=n)return!1;const a=t.row%2===0?r:r-1;return t.col>=0&&t.col<a},dn=(e,t)=>hn(t).filter(t=>un(e,t)),hn=e=>e.row%2===0?[{row:e.row-1,col:e.col-1},{row:e.row-1,col:e.col},{row:e.row,col:e.col+1},{row:e.row+1,col:e.col},{row:e.row+1,col:e.col-1},{row:e.row,col:e.col-1}]:[{row:e.row-1,col:e.col},{row:e.row-1,col:e.col+1},{row:e.row,col:e.col+1},{row:e.row+1,col:e.col+1},{row:e.row+1,col:e.col},{row:e.row,col:e.col-1}],pn=(e,t)=>e.map(e=>e.appliedBy===t||e.sourceId===$t.TURN_UNDEAD?e.rules.type===We?e:(0,f.A)((0,f.A)({},e),{},{rules:(0,f.A)((0,f.A)({},e.rules),{},{duration:Math.max(0,e.rules.duration-1)})}):e).filter(e=>e.appliedBy!==t&&e.sourceId!==$t.TURN_UNDEAD||(e.rules.type===We||e.rules.duration>0)),fn=e=>{const t=ct(e);if(1===e.turn)return 0;let n=(e=>{const t=ct(e),n=t.playerProfile.alignment,r=ut(e,ne);return an(e).reduce((e,a)=>{let i=a.goldPerTurn;const o=M(a.type);switch(n){case C:o!==C||a.corrupted||(i*=1.4),(o===_||a.corrupted)&&(i*=.8);break;case _:nn(a,z.STRONGHOLD)||(i*=r?1:.8),(o===_||a.corrupted)&&(i*=1.9),o!==C||a.corrupted||(i*=r?1.4:.5)}return tn(a,$t.FERTILE_LAND,t.id)&&(i*=1.5),Math.ceil(e+i)},0)})(e)-(e=>{const{turnOwner:t}=e,n=rn(e).filter(e=>e.buildings.length>0).reduce((e,t)=>e+t.buildings.reduce((e,t)=>e+he(t.type).maintainCost,0),0),r=Bt(e,t).reduce((e,t)=>e+t.heroes.reduce((e,t)=>e+t.cost,0)+t.regulars.reduce((e,t)=>e+t.cost*t.count,0)+t.warMachines.reduce((e,t)=>e+U(t.type).maintainCost*t.count,0),0);return Math.ceil(n+r)})(e);const r=ht(t,Me);return n=ht(t,Te)?Math.ceil(1.25*n):n,n=r?Math.ceil(.9*n):n,n},mn={REGULAR:"regular",VETERAN:"veteran",ELITE:"elite"},gn=e=>1+Math.log(e)*e*.3,yn=(e,t,n,r,a,i)=>{const o=Object.keys(e),l=(0,f.A)({},a);o.forEach(i=>{const o=e[i],s=n[i],c=r[i];void 0!==o&&void 0!==s&&void 0!==c&&void 0!==a[i]&&(l[i]=Math.floor(o+("speed"!==i?t:1)*s*c))});const s=void 0!==i?Math.floor(1+t*n.mana*r.mana):void 0;return(0,f.A)((0,f.A)({},l),{},{mana:s})},vn=(e,t)=>{if(e.level===b)return;((e,t)=>e.artifacts.some(e=>e.treasure.type===t))(e,ye)?e.level=31===e.level?b:e.level+2:e.level++;const n=yn(B(e.type),gn(e.level),bn(e.type),wn[t],e.combatStats,e.mana);e.combatStats=(0,f.A)({},n),e.mana=n.mana,e.cost=U(e.type).maintainCost*(Math.floor(e.level/4)+1)},bn=e=>{switch(e){case v.WARSMITH:case g.ORC:return{attack:2.7,defense:.6,health:6,rangeDamage:2.7,speed:1,mana:0};case v.FIGHTER:case v.OGR:case v.HAMMER_LORD:case v.DRUID:case v.CLERIC:case g.WARRIOR:case g.DWARF:return{attack:2.5,defense:.4,health:5,rangeDamage:2.5,speed:1,mana:.5};case v.RANGER:case v.SHADOW_BLADE:case g.HALFLING:case g.DARK_ELF:case g.ELF:case v.ENCHANTER:return{attack:1.5,defense:.4,health:3,rangeDamage:0,speed:1,mana:.8};case v.PYROMANCER:case v.NECROMANCER:return{attack:.5,defense:.4,health:2,rangeDamage:1.8,speed:1,mana:.5};case g.WARD_HANDS:return{attack:.5,defense:.4,health:.8,rangeDamage:0,speed:1,mana:0};default:return{attack:0,defense:0,health:0,rangeDamage:0,speed:1,mana:0}}},wn={[Z]:{attack:0,defense:0,health:0,rangeDamage:0,speed:0,mana:0},[J]:{attack:1.15,defense:1.1,health:1.1,rangeDamage:1,speed:1.00005,mana:.7},[ee]:{attack:.95,defense:1,health:1,rangeDamage:1,speed:1,mana:1.15},[te]:{attack:1.1,defense:1.25,health:1.2,rangeDamage:1,speed:1.005,mana:0},[ne]:{attack:.85,defense:.95,health:.95,rangeDamage:1,speed:1,mana:1.5},[re]:{attack:1,defense:.95,health:.95,rangeDamage:1,speed:1.0001,mana:1}},Sn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=U(e);return{type:Object.freeze(e),combatStats:(0,f.A)({},B(e)),rank:mn.REGULAR,count:null==t?n.recruitedUnits:t,cost:n.maintainCost}},En=(e,t)=>(0,f.A)((0,f.A)({},e),{},{heroes:[...e.heroes,t]}),kn=(e,t)=>{const n=e.heroes.findIndex(e=>e.name===t);if(-1===n)return;const r=e.heroes[n];return{updatedArmy:(0,f.A)((0,f.A)({},e),{},{heroes:e.heroes.filter(e=>e.name!==t)}),hero:r}},xn=(e,t)=>{const n=e.regulars.findIndex(e=>e.type===t.type&&e.rank===t.rank);return-1!==n?(0,f.A)((0,f.A)({},e),{},{regulars:e.regulars.map((e,r)=>r===n?(0,f.A)((0,f.A)({},e),{},{count:e.count+t.count}):e)}):(0,f.A)((0,f.A)({},e),{},{regulars:[...e.regulars,t]})},An=(e,t)=>{const n=e.warMachines.findIndex(e=>e.type===t.type);return-1!==n?(0,f.A)((0,f.A)({},e),{},{warMachines:e.warMachines.map((e,r)=>r===n?(0,f.A)((0,f.A)({},e),{},{count:e.count+t.count}):e)}):(0,f.A)((0,f.A)({},e),{},{warMachines:[...e.warMachines,t]})},Cn=(e,t,n,r)=>{const a=e.regulars.findIndex(e=>e.type===t&&e.rank===n&&e.count>=r);if(-1===a)return;const i=e.regulars[a];if(i.count===r){return{updatedArmy:(0,f.A)((0,f.A)({},e),{},{regulars:e.regulars.filter((e,t)=>t!==a)}),regulars:i}}return{updatedArmy:(0,f.A)((0,f.A)({},e),{},{regulars:e.regulars.map((e,t)=>t===a?(0,f.A)((0,f.A)({},e),{},{count:e.count-r}):e)}),regulars:(0,f.A)((0,f.A)({},Sn(i.type,r)),{},{rank:i.rank})}},Pn=(e,t)=>(0,f.A)((0,f.A)({},e),{},{armies:[...e.armies,t]}),_n=(e,t)=>(0,f.A)((0,f.A)({},e),{},{armies:e.armies.filter(e=>e.id!==t)}),Rn=e=>{const t=on(e).map(e=>yt(e.mapPos)),n=e.armies.filter(e=>e.regulars.length>0||e.heroes.length>0||e.warMachines.length>0&&!t.includes(yt(Ht(e))));return(0,f.A)((0,f.A)({},e),{},{armies:n})},Tn=(e,t)=>(0,f.A)((0,f.A)({},e),{},{armies:e.armies.map(e=>e.id===t.id?t:e)}),Nn=e=>({path:[e],progress:0}),On=function(e,t){let{hero:n,regular:r,warMachine:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{id:Object.freeze(c()),controlledBy:Object.freeze(e),heroes:n?[n]:[],regulars:r?[r]:[],warMachines:a?[a]:[],movement:Nn(t),effects:[]}},Dn=(e,t)=>({id:Object.freeze(c()),type:Object.freeze(e),name:Object.freeze(t),level:1,combatStats:(0,f.A)({},B(e)),artifacts:[],mana:k(e)?1:void 0,cost:U(e).maintainCost}),Ln=e=>({id:Object.freeze(c()),type:Object.freeze(e),slots:In(e)}),Mn=()=>({isOccupied:!1,unit:g.WARRIOR,turnsRemaining:0}),In=e=>e===z.BARRACKS?Array(3).fill(null).map(()=>Mn()):e===z.MAGE_TOWER?Array(1).fill(null).map(()=>Mn()):[],jn=1.1547,zn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{width:"undefined"!==typeof window?window.innerWidth:1920,height:"undefined"!==typeof window?window.innerHeight:1080};const r=n.width,a=n.height-300,i=(r-100)/(t.cols+.5),o=(a-100)/(t.rows+.25)/jn,l=Math.max(100,i,o),s=l*jn,{row:c,col:u}=e;let d;d=c%2===0?u*l+l/2:u*l+l+l/2;return{x:d+50,y:c*(s-.25*s)+s/2+300+50}},Hn=e=>e.map.dimensions||{rows:1,cols:1},Fn=(e,t)=>{const n=Zt(e,t),r=yt(t),a=nn(e.map.lands[r],z.STRONGHOLD);let i=((e,t)=>At(e,t,e=>(0,f.A)((0,f.A)({},e),{},{buildings:[]})))(e,t);if(a){cn(Hn(i),i.map.lands[r].mapPos,1,!1).forEach(e=>{const t=ct(i),r=Ft(i,e);if(r.length>0){if(!r.some(e=>e.controlledBy===n)){i=kt(i,t.id,e);const n=r[0].controlledBy;i=Et(i,n,e)}}else{const n=cn(Hn(i),e,1).filter(e=>nn(Xt(i,e),z.STRONGHOLD));if(n&&n.length>0){if(!n.some(e=>Dt(t,e))){const r=Zt(i,n[0]);i=Et(i,r,e),i=kt(i,t.id,e)}}else i=kt(i,t.id,e)}})}return i},Gn=(e,t,n)=>{const r=e.map,a=ct(e),i=he(t);if(e.turn>1){if(a.vault<i.buildCost)return;if(ut(e,re)&&!Vt(e,n))return}let o=e;switch(t){case z.DEMOLITION:o=Fn(o,n);break;case z.STRONGHOLD:o=Tt(o,n,Ln(t)),o=Et(o,a.id,n);cn(r.dimensions,n,1,!0).forEach(e=>{Zt(o,e)===tt.id&&(o=Et(o,a.id,e))});break;default:o=Tt(o,n,Ln(t))}const l=ht(a,De);if(e.turn>1){const e=l?Math.ceil(.85*i.buildCost):i.buildCost;o=wt(o,a.id,-e)}Object.assign(e,o)},Bn=(e,t)=>!e.startsWith("0-")&&!e.startsWith("1-")&&!e.startsWith("".concat(t.rows-1,"-"))&&!e.startsWith("".concat(t.rows-2,"-"))&&!e.endsWith("-0")&&!e.endsWith("-1")&&!e.endsWith("-".concat(t.cols-1))&&!e.endsWith("-".concat(t.cols-2)),Wn=e=>{const t=ct(e).playerProfile;let n;const r=e.players.flatMap(t=>rn(e,t.id)).filter(e=>nn(e,z.STRONGHOLD));let a=Object.keys(e.map.lands).filter(t=>Bn(t,Hn(e))&&!r.flatMap(t=>cn(Hn(e),t.mapPos,4,!1)).map(e=>yt(e)).includes(t));0===a.length&&(a=Object.keys(e.map.lands).filter(t=>Bn(t,Hn(e))&&!r.flatMap(t=>cn(Hn(e),t.mapPos,3,!1)).map(e=>yt(e)).includes(t)));let i=a.map(t=>e.map.lands[t]).filter(e=>M(e.type)===t.alignment);0===i.length&&(i=a.map(t=>e.map.lands[t]).filter(e=>M(e.type)===P)),n=null==i||0===i.length?0===a.length?Yt(Object.values(e.map.lands).filter(n=>e.players.every(e=>!Dt(e,n.mapPos))&&M(n.type)===t.alignment)):e.map.lands[Yt(a)]:Yt(i),Gn(e,z.STRONGHOLD,n.mapPos);let o=rn(e).filter(e=>M(e.type)===t.alignment&&0===e.buildings.length);0===o.length&&(o=rn(e).filter(e=>0===e.buildings.length)),Gn(e,ut(e,ne)?z.MAGE_TOWER:z.BARRACKS,Yt(o).mapPos),((e,t)=>{const n=ct(t),r=n.playerProfile,a=Dn(r.type,r.name);for(;a.level<r.level;)vn(a,r.doctrine);const i=On(n.id,e.mapPos,{hero:a});Object.assign(t,Pn(t,i))})(n,e)},Un=e=>{switch(e){case je:return P;case Ie:return C;case Me:return _;default:return R}},Vn=e=>{switch(e){case Se:case Ee:case ke:case Pe:return 1;case Ae:case Ce:case _e:return 2;case xe:return 3;default:return Qt(6,10)}},Kn=[{id:"The Echoing Ruins",level:1,length:4,description:"Whispers of lost ages linger among crumbling halls where the past refuses to rest."},{id:"The Whispering Grove",level:2,length:5,description:"Roots drink old blood as the wind recalls names the forest swore to forget."},{id:"The Abyssal Crypt",level:3,length:6,description:"Shadows coil beneath the earth, guarding the silence of those who should not wake."},{id:"The Shattered Sky",level:4,length:7,description:"The heavens cracked once, and from the wound still seeps the color of forgotten light."}],qn=e=>{var t;return(null===(t=Kn.find(t=>t.level===e))||void 0===t?void 0:t.id)||Kn[0].id},Yn=e=>Kn.find(t=>t.id===e)||Kn[0],Qn=e=>{const t=["Hero ".concat(e," ventured beyond the known paths of Orrivane and did not return."),"Hero ".concat(e," was lost to the mists of fate \u2014 their story ends where legends begin."),"Hero ".concat(e," vanished upon the quest, their fate whispered only by the winds."),"Hero ".concat(e," did not return from the quest; Orrivane itself has claimed their spirit."),"Hero ".concat(e," walked into the unknown and became one with the tales of old."),"Hero ".concat(e," has not returned. Some say the land remembers their name in silence."),"Hero ".concat(e," was swallowed by destiny\u2019s shadow \u2014 only echoes remain."),"Hero ".concat(e," set forth seeking glory, but the realm offered only silence in return.")];return Yt(t)},$n=(e,t)=>{const n="".concat(t.treasure.type).concat(t.level>0?" +".concat(t.level):""),r=["".concat(e," returns from the veil of peril, their hands clasping the fabled '").concat(n,"', as if Orrivane itself deemed them worthy."),"From shadow and ruin, ".concat(e," emerges bearing '").concat(n,"' \u2014 a token of power earned in silence and blood."),"Whispers spread through the realm: ".concat(e," has returned, carrying the '").concat(n,"', its glow still echoing the trials endured."),"The winds speak of ".concat(e,"\u2019s triumph \u2014 they have brought back '").concat(n,"', a relic once thought lost to myth."),"When all had forsaken hope, ".concat(e," stepped forth, clutching the '").concat(n,"', eyes alight with quiet victory."),"".concat(e," returns from lands beyond sight, their soul tempered and their prize \u2014 '").concat(n,"' \u2014 gleaming with otherworldly grace."),"The stars themselves seemed to bend as ".concat(e," emerged from the unknown, the '").concat(n,"' resting like a promise in their grasp."),"".concat(e,"\u2019s journey has scarred and sanctified them alike \u2014 now they bear '").concat(n,"', and the realm shall not forget."),"They said none would return, yet ".concat(e," walks again beneath the sun, the '").concat(n,"' singing softly of forgotten gods."),"From the mists of peril, ".concat(e," reappears. In their grasp, the '").concat(n,"' \u2014 proof that fate still honors the bold.")];return Yt(r)},Xn=(e,t)=>{const n=["From shadow and storm, ".concat(e," returns \u2014 the ").concat(t," glimmering faintly, as if it remembers its former master."),"".concat(e," emerges from the wilds, clutching the ").concat(t," \u2014 a relic humming softly with untamed power."),"The quest bore fruit: ".concat(e," now wields the ").concat(t,", a prize wrested from forgotten hands."),"".concat(e," walks back beneath dim skies, the ").concat(t," whispering secrets of ancient magic."),"Few have seen such fortune \u2014 ".concat(e," returns bearing the ").concat(t,", its glow a quiet promise of destiny."),"".concat(e," claims the ").concat(t,", a shard of Orrivane\u2019s hidden might reborn in mortal hands."),"The winds carried whispers of success before ".concat(e," appeared, the ").concat(t," gleaming like bottled lightning."),"".concat(e," returns from perilous lands, the ").concat(t," in hand \u2014 proof that the old powers still stir."),"By wit and will, ".concat(e," secured the ").concat(t,", a relic that hums in tune with Orrivane\u2019s forgotten heart."),"".concat(e," brings back the ").concat(t,", its surface alive with shifting runes that fade when mortal eyes draw near.")];return Yt(n)},Zn=(e,t)=>{const n=["The world itself seemed to hold its breath as ".concat(e," emerged, the ").concat(t," pulsing with a light not seen since the Age of Dawning."),"".concat(e," has returned bearing the ").concat(t," \u2014 a relic of such power that even the winds dared not speak its name aloud."),"In the silence between thunder and dawn, ".concat(e," raised the ").concat(t,"; Orrivane shuddered, remembering."),"".concat(e," brings forth the ").concat(t,", its radiance cutting through the veil of ages \u2014 a gift and a warning from the old gods."),"Legends stir anew: ".concat(e," has claimed the ").concat(t,", a relic once thought lost beyond time\u2019s reach."),"".concat(e," stands crowned by destiny, the ").concat(t," in hand \u2014 its presence alone warps the flow of mana around them."),"When ".concat(e," found the ").concat(t,", the stars blinked \u2014 as if startled to see their reflection returned to earth."),"".concat(e," returned from realms unknown, clutching the ").concat(t,"; whispers say even death bowed aside to let them pass."),"Songs will be sung of this day \u2014 ".concat(e," has unearthed the ").concat(t,", a relic whose name once shaped empires."),"The earth trembled in quiet reverence as ".concat(e," revealed the ").concat(t,", and Orrivane\u2019s ancient heart beat once more.")];return Yt(n)},Jn=e=>{const t=["".concat(e," returns weary and silent \u2014 no treasure in hand, yet the fire of resolve burns brighter in their eyes."),"The road yielded no relics, only scars and wisdom. Still, ".concat(e," walks with the calm of one who has glimpsed truth."),"".concat(e," returns with empty hands, but the weight of unseen battles clings to them like mist after rain."),"Though fate offered no reward, ".concat(e," bears the mark of survival \u2014 and in Orrivane, that is gift enough."),"The journey gave no gold nor glory, only echoes of what might have been \u2014 yet ".concat(e," endures, unbroken."),"".concat(e," brings no prize from their quest, but in their silence hums the quiet strength of those who defied despair."),"Not all journeys end in triumph. ".concat(e," returns without relic or tale, save the one their eyes can no longer tell."),"The gods were silent this time. ".concat(e," returns with nothing but the dust of distant roads and a heart made heavier."),"".concat(e," found no treasure in the ruins \u2014 only the understanding that some quests are meant to test, not reward."),"No artifact shines in their grasp, yet ".concat(e," carries something rarer \u2014 the unspoken courage to begin again.")];return Yt(t)},er="negative",tr="success",nr="neutral",rr="minor",ar="positive",ir="legendary",or=(e,t)=>{const n=Yt(qe),r=Yn(t).level,a=(i=n.type,o=n.isConsumable?Qt(r,r+2):0,{id:Object.freeze(c()),level:Object.freeze(o),treasure:Object.freeze(qe.find(e=>e.type===i))});var i,o;const l=(0,f.A)((0,f.A)({},e),{},{artifacts:[...e.artifacts,a]});return{outcome:{status:rr,message:$n(e.name,a)},updatedHero:l}},lr=(e,t)=>{const n=ct(e),r=Yt(Ye).type;return Object.assign(e,xt(e,n.id,(e=>{var t;const n=Ye.find(t=>t.type===e);return{id:Object.freeze(c()),charge:Vn(e),treasure:Object.freeze(n),target:Object.freeze(null!==(t=n.target)&&void 0!==t?t:Ke)}})(r))),{status:ar,message:Xn(t.name,r)}},sr=(e,t)=>{const n=e.players.flatMap(e=>e.empireTreasures),r=ct(e),a=Qe.filter(e=>Un(e.type)===R||Un(e.type)===r.playerProfile.alignment).filter(e=>!n.some(t=>t.treasure.type===e.type));if(a.length>0){const n=Yt(a).type;return Object.assign(e,xt(e,r.id,(i=n,{id:Object.freeze(c()),alignment:Object.freeze(Un(i)),treasure:Object.freeze(Qe.find(e=>e.type===i))}))),{status:ir,message:Zn(t.name,n)}}return lr(e,t);var i},cr=(e,t)=>{let n;const r=ct(e);if((e=>Math.random()<=.8+.05*(e.hero.level-1-5*(e.quest.level-1)))(t)&&Zt(e,t.land)===r.id){const a=((e,t)=>{if(Math.random()>.55-.05*(t.quest.level-1))return{outcome:{status:nr,message:Jn(t.hero.name)},updatedHero:t.hero};const n=Math.random();switch(t.quest.id){case"The Echoing Ruins":return or(t.hero,t.quest.id);case"The Whispering Grove":return n<=.3?{outcome:lr(e,t.hero),updatedHero:t.hero}:or(t.hero,t.quest.id);case"The Abyssal Crypt":return n<=.2?{outcome:sr(e,t.hero),updatedHero:t.hero}:n<=.55?{outcome:lr(e,t.hero),updatedHero:t.hero}:or(t.hero,t.quest.id);case"The Shattered Sky":return n<=.4?{outcome:sr(e,t.hero),updatedHero:t.hero}:{outcome:lr(e,t.hero),updatedHero:t.hero}}})(e,t);n=a.outcome;const i=(0,f.A)({},a.updatedHero);if(i.level<5*t.quest.level)do{vn(i,r.playerProfile.doctrine)}while(i.level<5*(t.quest.level-1));ur(e,i,t.land)}else ht(r,Pe)&&t.hero.level>=10?(n={status:tr,message:"".concat(Qn(t.hero.name)," Yet Orrivane remembered them, and the world bent so they might return.")},ur(e,t.hero,t.land),Object.assign(e,bt(e,r.id,Mt(r,((e,t)=>{var n;const r=null===(n=e.empireTreasures)||void 0===n?void 0:n.find(e=>e.treasure.type===t);if(r)return $e(r)?r:void 0})(r,Pe))))):n={status:er,message:Qn(t.hero.name)};return n},ur=(e,t,n)=>{const r=Ft(e,n).find(t=>!zt(t)&&t.controlledBy===e.turnOwner);if(r){const n=En(r,t);Object.assign(r,n),Object.assign(e,Tn(e,r))}else{const r=On(e.turnOwner,n,{hero:t});Object.assign(e,Pn(e,r))}},dr=e=>{const t=ct(e);Object.assign(e,((e,t)=>{const n=st(e,t).quests.map(e=>(0,f.A)((0,f.A)({},e),{},{remainTurnsInQuest:e.remainTurnsInQuest-1}));return bt(e,t,{quests:n})})(e,t.id));const n=ct(e).quests.filter(e=>0===e.remainTurnsInQuest).map(t=>cr(e,t));return Object.assign(e,((e,t)=>{const n=st(e,t).quests.filter(e=>e.remainTurnsInQuest>0);return bt(e,t,{quests:n})})(e,t.id)),n},hr=["Cedric","Rowan","Gareth","Edric","Thorne","Lucan","Daren","Corvin","Maelor","Roderic","Eamon","Halden","Tristam","Osric"],pr=["Isolde","Lyria","Maera","Aveline","Catrin","Elora","Brienne","Talia","Rowena","Lysandra","Miren","Elys","Serah","Adela"],fr=["Brightshield","Ashborne","Dawnhart","Valeon","Storme","Halewyn","Frostmere","Blackwood","Cinderval","Ironhall","Thorneveil","Goldmere","Fenwall","Duskmoor","Ravenfell"],mr=["Aelir","Thalor","Eryndor","Saelis","Loryn","Faelar","Calen","Tharion","Ilendil","Raevan","Sylir","Arannis","Vael","Lethar","Coren"],gr=["Lythiel","Aerya","Thalara","Eirwen","Maelira","Selis","Nyara","Ilanis","Faenra","Olyssia","Thaera","Liriel","Vaena","Essera","Myrra"],yr=["Silverbranch","Moonveil","Starleaf","Windwhisper","Thornsong","Suncrest","Faelora","Dewstride","Nightpetal","Riverlight","Shadowfern","Dawnroot","Lunevale","Whispergrove","Gladesong"],vr=["Balric","Grend","Durn","Korrim","Haldrik","Brom","Edran","Garrim","Rurik","Brann","Dolm","Keld","Orin","Sturgan"],br=["Brynja","Helda","Thrainna","Korga","Dilda","Merra","Astrid","Brunha","Torra","Eldra","Grena","Volda","Raga","Marn","Hilda"],wr=["Brightwood","Dawnwood","Frostwood","Moonwood","Starwood","Whisperwood","Frostleaf","Moonleaf","Starleaf","Stonebeard","Deepdelve","Emberhall","Runebreaker","Anvilmark","Goldgrip"],Sr=["Gor","Thrak","Uld","Brak","Mok","Zarg","Korr","Drok","Harg","Ugar","Varn","Rok","Dush","Grath","Zog"],Er=["Ulza","Kraga","Mura","Drasha","Vorna","Zura","Orsha","Garka","Lurn","Branna","Skara","Vorga","Narka","Trul","Ozma"],kr=["Bloodfang","Bonebreaker","Skarnash","Doomhide","Ironmaw","Goretusk","Warshard","Blackspine","Skullrend","Ashfang","Stormclaw","Brimhide","Firemaw","Helltide","Foeskull"],xr=()=>{const e=Yt(["male","female"]),t=Yt("male"===e?hr:pr),n=Yt(fr);return"".concat(t," ").concat(n)},Ar=()=>{const e=Yt(["male","female"]),t=Yt("male"===e?mr:gr),n=Yt(yr);return"".concat(t," ").concat(n)},Cr=()=>{const e=Yt(["male","female"]),t=Yt("male"===e?vr:br),n=Yt(wr);return"".concat(t," ").concat(n)},Pr=()=>{const e=Yt(["male","female"]),t=Yt("male"===e?Sr:Er),n=Yt(kr);return"".concat(t," ").concat(n)},_r=e=>{const t=["".concat(e.name,", the ").concat(e.type,", answers the call of fate once more."),"From distant roads comes ".concat(e.name,", a ").concat(e.type," bound by unseen oaths."),"The banners rise \u2014 ".concat(e.name,", the ").concat(e.type,", joins your cause."),"Whispers spread: ".concat(e.name,", ").concat(e.type," of renown, has returned to service."),"A shadow moves \u2014 ".concat(e.name,", ").concat(e.type," of legend, pledges allegiance."),"Steel and will converge as ".concat(e.name,", the ").concat(e.type,", takes the field."),"Ancient vows stir anew \u2014 ".concat(e.name,", ").concat(e.type,", stands beneath your banner."),"From the silence of old wars comes ".concat(e.name,", steadfast ").concat(e.type,"."),"The halls echo once more with the tread of ".concat(e.name,", ").concat(e.type," of honor."),"The realm shifts \u2014 ".concat(e.name,", ").concat(e.type,", answers destiny\u2019s quiet summons.")];return Yt(t)},Rr=e=>{const t=[],{turnOwner:n}=e;let r=((e,t)=>{const n=st(e,t);let r=e;return Array.from(n.landsOwned).forEach(t=>{var n;const a=null===(n=e.map.lands[t])||void 0===n?void 0:n.mapPos;a&&(r=Rt(r,a,e=>e.map(e=>e.isOccupied?(0,f.A)((0,f.A)({},e),{},{turnsRemaining:e.turnsRemaining-1}):e)))}),r})(e,n);const a=rn(r).filter(e=>e.buildings.length>0&&e.buildings.some(e=>e.slots.length>0)),i=new Map,o=[];return a.forEach(a=>a.buildings.forEach(l=>{if(l.slots.length>0){l.slots.filter(e=>e.isOccupied&&0===e.turnsRemaining).forEach(l=>{const s=Ft(r,a.mapPos).find(e=>!zt(e)&&e.controlledBy===n);if(w(l.unit)){const r=Dn(l.unit,(e=>{switch(e){case v.FIGHTER:return xr();case v.HAMMER_LORD:return Cr();case v.OGR:return Pr();case v.RANGER:return Ar();case v.PYROMANCER:return Pr();case v.CLERIC:return xr();case v.DRUID:return Math.random()<.5?xr():Ar();case v.ENCHANTER:return Math.random()<.5?xr():Cr();case v.NECROMANCER:switch(Yt(["human","elf","dwarf","ogr"])){case"human":return xr();case"elf":return Ar();case"dwarf":return Cr();case"ogr":return Pr()}}return Pr()})(l.unit));if(ut(e,ne))for(;r.level<10;)vn(r,ct(e).playerProfile.doctrine);if(t.push({status:tr,message:_r(r)}),s){const e=i.get(s.id)||s,t=En(e,r);i.set(s.id,t)}else{const e=On(n,a.mapPos,{hero:r});o.push(e)}}else if(S(l.unit)){const e=(c=l.unit,{type:Object.freeze(c),count:1,durability:U(c).durability});if(s){const t=i.get(s.id)||s,n=An(t,e);i.set(s.id,n)}else o.push(On(n,a.mapPos,{warMachine:e}))}else{const t=Sn(l.unit);if(ut(e,te)&&((e,t)=>{if(e.type===g.UNDEAD)return;if(e.rank===mn.VETERAN&&t===te)return;e.rank=e.rank===mn.REGULAR?mn.VETERAN:mn.ELITE;const n=B(e.type),r=bn(e.type),a=wn[t],i=gn(e.rank===mn.ELITE?7:3),o=yn(n,i,r,a,e.combatStats);e.combatStats=(0,f.A)({},o),e.cost=U(e.type).maintainCost*(e.rank===mn.VETERAN?1.5:2)})(t,ct(e).playerProfile.doctrine),s){const e=i.get(s.id)||s,n=xn(e,t);i.set(s.id,n)}else o.push(On(n,a.mapPos,{regular:t}))}var c})}})),r=(0,f.A)((0,f.A)({},r),{},{armies:[...r.armies.map(e=>i.get(e.id)||e),...o]}),r=((e,t)=>{const n=st(e,t);let r=e;return Array.from(n.landsOwned).forEach(t=>{var n;const a=null===(n=e.map.lands[t])||void 0===n?void 0:n.mapPos;a&&(r=Rt(r,a,e=>e.map(e=>e.isOccupied&&0===e.turnsRemaining?(0,f.A)((0,f.A)({},e),{},{isOccupied:!1}):e)))}),r})(r,n),Object.assign(e,r),t},Tr=e=>{const t=e.turnOwner,n=new Set;Bt(e,t).forEach(e=>n.add(Ht(e))),n.forEach(n=>{const r=Ft(e,n).filter(e=>!zt(e)&&e.controlledBy===t);if(r.length<2)return;let a=r.pop();r.forEach(t=>{a=((e,t)=>{const n=[...e.heroes,...t.heroes],r=[...e.regulars];t.regulars.forEach(e=>{const t=r.findIndex(t=>t.type===e.type&&t.rank===e.rank);-1!==t?r[t]=(0,f.A)((0,f.A)({},r[t]),{},{count:r[t].count+e.count}):r.push(e)});const a=[...e.warMachines];t.warMachines.forEach(e=>{const t=a.findIndex(t=>t.type===e.type);-1!==t?a[t]=(0,f.A)((0,f.A)({},a[t]),{},{count:a[t].count+e.count}):a.push(e)});const i=[...e.effects,...t.effects].filter(e=>e.rules.type===Be);return(0,f.A)((0,f.A)({},e),{},{heroes:n,regulars:r,warMachines:a,effects:i})})(a,t),Object.assign(e,_n(e,t.id))}),Object.assign(e,Tn(e,a))})},Nr=(e,t)=>{const n={[mn.REGULAR]:0,[mn.VETERAN]:0,[mn.ELITE]:0};return Object.values(mn).forEach(r=>{let a=e.filter(e=>e.rank===r);t&&t.length>0&&(a=a.filter(e=>t.includes(e.type))),n[r]=a.reduce((e,t)=>e+t.count,0)}),n},Or=(e,t,n)=>Math.ceil((n?.65:1)*(e*t.loss)/t.total),Dr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;const a=((e,t)=>{const n=e.reduce((e,t)=>e+t.regular,0),r=e.reduce((e,t)=>e+t.veteran,0),a=e.reduce((e,t)=>e+t.elite,0),i=(e,t,n,r,a)=>Math.max(Math.ceil(a*(Math.random()*(t-e)+e)),Math.ceil(Math.random()*(r-n)+n));return{regular:{total:n,loss:i(t.regular.minPct,t.regular.maxPct,t.regular.minAbs,t.regular.maxAbs,n)},veteran:{total:r,loss:i(t.veteran.minPct,t.veteran.maxPct,t.veteran.minAbs,t.veteran.maxAbs,r)},elite:{total:a,loss:i(t.elite.minPct,t.elite.maxPct,t.elite.minAbs,t.elite.maxAbs,a)}}})(e.map(e=>Nr(e.regulars,r)),t);return e.map(e=>{const t=Nr(e.regulars,r);return((e,t,n)=>{let r=e;return Object.values(mn).forEach(e=>{let a=r.regulars.filter(t=>t.rank===e);n&&n.length>0&&(a=a.filter(e=>n.includes(e.type)));let i=t[e];for(;i>0;)for(let e=0;e<a.length&&i>0;e++)if(i>0){const t=Math.min(a[e].count,i),n=Cn(r,a[e].type,a[e].rank,t);n&&(r=n.updatedArmy),i-=t}}),r})(e,{[mn.REGULAR]:0!==a.regular.total?Or(t.regular,a.regular,n):0,[mn.VETERAN]:0!==a.veteran.total?Or(t.veteran,a.veteran,n):0,[mn.ELITE]:0!==a.elite.total?Or(t.elite,a.elite,n):0},r)})},Lr={regular:{minPct:.08,maxPct:.1,minAbs:40,maxAbs:60},veteran:{minPct:.05,maxPct:.07,minAbs:20,maxAbs:40},elite:{minPct:.03,maxPct:.05,minAbs:10,maxAbs:20}},Mr=e=>{const t=ct(e);let n=e;on(e).forEach(e=>{const r=Zt(n,e.mapPos);if(r!==t.id&&r!==tt.id){n=kt(n,r,e.mapPos);const t=e.effects.find(e=>e.sourceId===Ce);null!=t&&(n=Pt(n,e.mapPos,t.id))}n=Et(n,t.id,e.mapPos)});const r=on(n).filter(e=>!((e,t,n)=>Gt(e,t,null!==n&&void 0!==n?n:[e.turnOwner]).length>0)(n,e.mapPos));r.forEach(e=>{n=kt(n,t.id,e.mapPos);const r=cn(Hn(n),e.mapPos,1).find(e=>nn(Xt(n,e),z.STRONGHOLD));if(r){const t=Zt(n,r);n=Et(n,t,e.mapPos)}}),Object.assign(e,n)},Ir=[{type:ae.BLACK,heroTypes:[v.NECROMANCER],landTypes:[A.SHADOW_MIRE,A.BLIGHTED_FEN]},{type:ae.RED,heroTypes:[v.PYROMANCER],landTypes:[A.VOLCANO,A.LAVA]},{type:ae.BLUE,heroTypes:[v.ENCHANTER],landTypes:[A.CRISTAL_BASIN,A.MISTY_GLADES]},{type:ae.GREEN,heroTypes:[v.DRUID],landTypes:[A.HEARTWOOD_GROVE,A.VERDANT_GLADE]},{type:ae.WHITE,heroTypes:[v.CLERIC],landTypes:[A.SUN_SPIRE_PEAKS,A.GOLDEN_PLAINS]}],jr=e=>{let{manaType:t,heroType:n,landKind:r}=e;return Ir.find(e=>null!=t&&e.type===t||null!=n&&e.heroTypes.includes(n)||null!=r&&e.landTypes.includes(r))},zr={[A.SUN_SPIRE_PEAKS]:[A.DARK_FOREST,A.HILLS],[A.HEARTWOOD_GROVE]:[A.SWAMP,A.GREEN_FOREST],[A.CRISTAL_BASIN]:[A.DESERT,A.HILLS],[A.VOLCANO]:[A.MOUNTAINS,A.DARK_FOREST],[A.SHADOW_MIRE]:[A.PLAINS,A.SWAMP]},Hr={[A.SUN_SPIRE_PEAKS]:A.GOLDEN_PLAINS,[A.HEARTWOOD_GROVE]:A.VERDANT_GLADE,[A.CRISTAL_BASIN]:A.MISTY_GLADES,[A.VOLCANO]:A.LAVA,[A.SHADOW_MIRE]:A.BLIGHTED_FEN},Fr=e=>{var t;return null!==(t=Hr[e])&&void 0!==t?t:A.NONE},Gr=()=>[A.PLAINS,A.MOUNTAINS,A.GREEN_FOREST,A.DARK_FOREST,A.HILLS,A.SWAMP,A.DESERT],Br=()=>[A.VOLCANO,A.SUN_SPIRE_PEAKS,A.HEARTWOOD_GROVE,A.CRISTAL_BASIN,A.SHADOW_MIRE],Wr=e=>{const t=ct(e),n=((e,t)=>{const n=ct(e),r=Ut(e).map(e=>e.hero);return r.push(...n.quests.flatMap(e=>e.hero)),r.filter(e=>null==t?e:t?k(e.type):!k(e.type))})(e,!0),r=ht(t,Ne);let a=e;return n.forEach(n=>{var r;const i=jr({heroType:n.type});a=St(a,t.id,i.type,null!==(r=n.mana)&&void 0!==r?r:0),ut(e,ne)&&Object.values(ae).filter(e=>e!==i.type).forEach(e=>{var r;a=St(a,t.id,e,.1*(null!==(r=n.mana)&&void 0!==r?r:0))})}),an(a).filter(e=>[A.VOLCANO,A.LAVA,A.SUN_SPIRE_PEAKS,A.GOLDEN_PLAINS,A.HEARTWOOD_GROVE,A.VERDANT_GLADE,A.CRISTAL_BASIN,A.MISTY_GLADES,A.SHADOW_MIRE,A.BLIGHTED_FEN].includes(e.type)).forEach(i=>{const o=jr({landKind:i.type});(ut(e,ne)||n.some(e=>o.heroTypes.includes(e.type)))&&(a=St(a,t.id,o.type,1)),r&&(a=St(a,t.id,o.type,1))}),a},Ur=(e,t)=>{if(1===e.turn)return void Wn(e);const n=ct(e),r=Rr(e);Tr(e),(e=>{const t=ct(e).id;on(e).forEach(n=>{const r=Gt(e,n.mapPos,[t]);0!==r.length&&Dr(r,Lr).forEach((t,n)=>{const a=r[n];Object.assign(a,t),0===a.regulars.length&&0===a.heroes.length?Object.assign(e,_n(e,a.id)):Object.assign(e,Tn(e,a))})})})(e),Mr(e);const a=dr(e);"human"===n.playerType&&(a.length>0||r.length>0)&&(null===t||void 0===t||t([...a,...r]));const i=fn(e);ht(n,Me)&&Object.assign(e,St(e,n.id,ae.BLACK,.001*i)),e.turn>2&&(Object.assign(e,wt(e,n.id,i)),Object.assign(e,Wr(e))),(e=>{const t=ct(e),n=t.id;t.effects=pn(t.effects,n),e.players.forEach(t=>{rn(e,t.id).forEach(e=>{e.effects=pn(e.effects,n)})}),Bt(e).forEach(e=>{e.effects=pn(e.effects,n)})})(e)},Vr=e=>{Object.assign(e,(e=>{const t=e.turnOwner,n=Bt(e,t).filter(t=>zt(t)&&!tn(Xt(e,Ht(t)),$t.ENTANGLING_ROOTS)&&!tn(Xt(e,Ht(t)),_e));let r=e;return n.forEach(e=>{(e=>{(e=>{if(e.progress<e.path.length-1&&e.progress++,e.progress===e.path.length-1){const t=e.path[e.progress];e.progress=0,e.path=[t]}})(e.movement)})(e),r=Tn(r,e)}),Tr(r),r})(e)),Mr(e),Ot(e)},Kr="START",qr="MAIN",Yr="END";class Qr{constructor(e){this.callbacks=void 0,this.activeTimers=new Set,this.callbacks=e}transitionToPhase(e,t){Object.assign(e,((e,t)=>(0,f.A)((0,f.A)({},e),{},{turnPhase:t}))(e,t)),this.callbacks.onTurnPhaseChange(e,t)}advanceToNextPhase(e){switch(e.turnPhase){case Kr:const t=1===e.turn?Yr:qr;this.transitionToPhase(e,t);break;case qr:this.transitionToPhase(e,Yr);break;case Yr:Ot(e),this.transitionToPhase(e,Kr)}}cleanup(){this.activeTimers.forEach(e=>clearTimeout(e)),this.activeTimers.clear()}startNewTurn(e){this.transitionToPhase(e,Kr);const t=ct(e);if(!t)return void this.callbacks.onGameOver("No valid player found for turn");const n=1===e.turn?"The banners of ".concat(t.playerProfile.name," rise over a new realm!"):"Player ".concat(t.playerProfile.name," turn");this.callbacks.onStartProgress(n);const r=setTimeout(()=>{this.activeTimers.delete(r),Ur(e,this.callbacks.onEmpireEventResult),1===e.turn?(this.advanceToNextPhase(e),this.endCurrentTurn(e)):(this.advanceToNextPhase(e),this.startMainPhase(e))},1e3);this.activeTimers.add(r)}startMainPhase(e){const t=ct(e);if(t)if("human"===t.playerType)this.callbacks.onHideProgress();else{this.callbacks.onComputerMainTurn(e),"undefined"!==typeof window&&console.log("mainAiTurn called - AI logic not yet implemented");const t=setTimeout(()=>{this.activeTimers.delete(t),this.endCurrentTurn(e)},2e3);this.activeTimers.add(t)}else this.callbacks.onGameOver("No valid player found for main phase")}endCurrentTurn(e){if(this.transitionToPhase(e,Yr),Vr(e),e.turn>1){const t=e.players.filter(e=>"human"===e.playerType),n=e.players.filter(e=>"computer"===e.playerType);if(0===t.length)return void this.callbacks.onGameOver("Game Over: No human players remaining");if(0===n.length)return void this.callbacks.onGameOver("Game Over: No computer players remaining")}const t=setTimeout(()=>{this.activeTimers.delete(t),this.transitionToPhase(e,Kr),this.startNewTurn(e)},500);this.activeTimers.add(t)}canEndTurn(e){return e.turnPhase===qr&&"human"===ct(e).playerType}}var $r=n(579);const Xr=(0,e.createContext)(void 0),Zr=t=>{let{children:n}=t;const[r,a]=(0,e.useState)(void 0),[i,o]=(0,e.useState)(void 0),l=(0,e.useRef)({}),s=(0,e.useCallback)(()=>({onTurnPhaseChange:(e,t)=>{a(e)},onGameOver:e=>{var t,n;null===(t=(n=l.current).onGameOver)||void 0===t||t.call(n,e)},onStartProgress:e=>{var t,n;null===(t=(n=l.current).onStartProgress)||void 0===t||t.call(n,e)},onHideProgress:()=>{var e,t;null===(e=(t=l.current).onHideProgress)||void 0===e||e.call(t)},onComputerMainTurn:e=>{var t,n;null===(t=(n=l.current).onComputerMainTurn)||void 0===t||t.call(n,e)},onEmpireEventResult:e=>{var t,n;null===(t=(n=l.current).onEmpireEventResult)||void 0===t||t.call(n,e)}}),[]),c=(0,e.useCallback)(e=>{if(a(e),!i&&e){const e=s(),t=new Qr(e);o(t)}},[i,s]),u=(0,e.useCallback)(e=>{if(i&&"function"===typeof i.cleanup&&i.cleanup(),a(e),e){const e=s(),t=new Qr(e);o(t)}},[i,s]),d=(0,e.useCallback)(()=>{i&&r&&i.startNewTurn(r)},[i,r]),h=(0,e.useCallback)(()=>{i&&r&&i.endCurrentTurn(r)},[i,r]),p=(0,e.useCallback)(e=>{l.current=(0,f.A)((0,f.A)({},l.current),e)},[]),m={gameState:r,updateGameState:c,startNewGame:u,startNewTurn:d,endCurrentTurn:h,setTurnManagerCallbacks:p};return(0,$r.jsx)(Xr.Provider,{value:m,children:n})},Jr=()=>{const t=(0,e.useContext)(Xr);if(void 0===t)throw new Error("useGame must be used within a GameProvider");return t},ea=(0,e.createContext)(void 0),ta=t=>{let{children:n}=t;const[r,a]=(0,e.useState)(null),[i,o]=(0,e.useState)(void 0),[l,s]=(0,e.useState)(void 0),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!0),[p,f]=(0,e.useState)(!1),[m,g]=(0,e.useState)(!1),[y,v]=(0,e.useState)(!1),[b,w]=(0,e.useState)(!1),[S,E]=(0,e.useState)(!1),[k,x]=(0,e.useState)(!1),[A,C]=(0,e.useState)(!1),[P,_]=(0,e.useState)(!1),[R,T]=(0,e.useState)(!1),[N,O]=(0,e.useState)(!1),[D,L]=(0,e.useState)([]),[M,I]=(0,e.useState)(void 0),[j,z]=(0,e.useState)(void 0),[H,F]=(0,e.useState)({x:0,y:0}),[G,B]=(0,e.useState)([]),[W,U]=(0,e.useState)(null),[V,K]=(0,e.useState)(!0),[q,Y]=(0,e.useState)(""),[Q,$]=(0,e.useState)(!1),[X,Z]=(0,e.useState)(""),[J,ee]=(0,e.useState)(void 0),[te,ne]=(0,e.useState)({x:0,y:0}),[re,ae]=(0,e.useState)(""),[ie,oe]=(0,e.useState)(!1),[le,se]=(0,e.useState)(new Set),[ce,ue]=(0,e.useState)(null),de=(0,e.useCallback)((e,t)=>{ee(e),ne(t)},[]),he=(0,e.useCallback)(()=>{ee(void 0)},[]),pe=(0,e.useCallback)(()=>{ae("")},[]),fe=(0,e.useCallback)((e,t)=>{I(e),F(t)},[]),me=(0,e.useCallback)(()=>{I(void 0)},[]),ge=(0,e.useCallback)(e=>{z(e),T(!0)},[]),ye=(0,e.useCallback)(()=>{z(void 0),T(!1)},[]),ve=(0,e.useCallback)(function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];B(e),U(()=>t),K(n),C(!0)},[]),be=(0,e.useCallback)(()=>{C(!1),U(null)},[]),we=(0,e.useCallback)(e=>{se(t=>new Set(t).add(e))},[]),Se=(0,e.useCallback)(()=>{se(new Set)},[]),Ee=(0,e.useCallback)(e=>{L(e),O(!0)},[]),ke=(0,e.useCallback)(()=>{O(!1),L([])},[]),xe=(0,e.useCallback)((e,t,n)=>{ue({manaType:e,battlefieldPosition:t,screenPosition:n})},[]),Ae=(0,e.useCallback)(()=>{ue(null)},[]);return(0,$r.jsx)(ea.Provider,{value:{selectedLandAction:r,setSelectedLandAction:a,actionLandPosition:i,setActionLandPosition:o,moveArmyPath:l,setMoveArmyPath:s,isArcaneExchangeMode:c,setIsArcaneExchangeMode:u,showStartWindow:d,showSaveDialog:p,showCastSpellDialog:m,showEmpireTreasureDialog:y,showConstructBuildingDialog:b,showRecruitArmyDialog:S,showSendHeroInQuestDialog:k,showSelectOpponentDialog:A,showProgressPopup:P,showDiplomacyContactDialog:R,showEmpireEventsPopup:N,setShowEmpireEventsPopup:O,empireEvents:D,setEmpireEvents:L,selectedOpponent:M,diplomacyContactOpponent:j,opponentScreenPosition:H,selectOpponentExcludedIds:G,selectOpponentCallback:W,allowEmptyPlayer:V,progressMessage:q,showErrorMessagePopup:Q,setShowErrorMessagePopup:$,errorMessagePopupMessage:X,setErrorMessagePopupMessage:Z,landPopupPosition:J,landPopupScreenPosition:te,saveGameName:re,gameStarted:ie,glowingTiles:le,spellAnimation:ce,setSpellAnimation:ue,showSpellAnimation:xe,hideSpellAnimation:Ae,setShowStartWindow:h,setShowSaveDialog:f,setShowCastSpellDialog:g,setShowEmpireTreasureDialog:v,setShowConstructBuildingDialog:w,setShowRecruitArmyDialog:E,setShowSendHeroInQuestDialog:x,setShowSelectOpponentDialog:C,setShowProgressPopup:_,setShowDiplomacyContactDialog:T,setSelectedOpponent:I,setDiplomacyContactOpponent:z,setOpponentScreenPosition:F,setSelectOpponentExcludedIds:B,setSelectOpponentCallback:U,setAllowEmptyPlayer:K,setProgressMessage:Y,setLandPopupPosition:ee,setLandPopupScreenPosition:ne,showLandPopup:de,hideLandPopup:he,setSaveGameName:ae,resetSaveGameDialog:pe,setGameStarted:oe,setGlowingTiles:se,addGlowingTile:we,clearAllGlow:Se,showOpponentInfo:fe,hideOpponentInfo:me,showDiplomacyContact:ge,hideDiplomacyContact:ye,showSelectOpponentDialogWithConfig:ve,hideSelectOpponentDialog:be,showEmpireEvents:Ee,hideEmpireEvents:ke},children:n})},na=()=>{const t=(0,e.useContext)(ea);if(void 0===t)throw new Error("useApplicationContext must be used within a ApplicationContextProvider");return t},ra=n.p+"static/media/CelticPatternCorner.7f5e78759ba8a80d09b9.png",aa=e=>{let{position:t,size:n,zIndex:r}=e;return(0,$r.jsx)("img",{src:ra,alt:"".concat(t," corner ornament"),style:{position:"absolute",width:n,height:n,pointerEvents:"none",top:t.includes("top")?0:void 0,bottom:t.includes("bottom")?0:void 0,left:t.includes("left")?0:void 0,right:t.includes("right")?0:void 0,zIndex:r}})},ia=n.p+"static/media/CelticPatternVertical.8f1fe8a5abcd3ac8d2e6.png",oa=e=>{let{side:t,tileDimensions:n,length:r,zIndex:a}=e;const i=Math.ceil(r/n.height),o=Array.from({length:i}).map((e,r)=>(0,$r.jsx)("img",{src:ia,alt:"".concat(t.charAt(0).toUpperCase()+t.slice(1)," Border"),style:{position:"absolute",[t]:"top"===t?0:n.width-n.height,left:r*n.height,width:n.width,height:n.height,transform:"rotate(270deg)",transformOrigin:"top right"}},"".concat(t,"-").concat(r))),l={position:"absolute",[t]:0,left:0,width:r,height:Math.min(n.width,n.height),display:"flex",flexDirection:"column",pointerEvents:"none",overflow:"hidden",zIndex:a};return(0,$r.jsx)("div",{style:l,children:o})},la=e=>{let{side:t,tileDimensions:n,length:r,zIndex:a}=e;const i=Math.ceil(r/n.height),o=Array.from({length:i}).map((e,r)=>(0,$r.jsx)("img",{src:ia,alt:"".concat(t.charAt(0).toUpperCase()+t.slice(1)," Border"),style:{position:"absolute",top:r*n.height,width:n.width,height:n.height}},"".concat(t,"-").concat(r))),l={position:"absolute",[t]:0,top:0,height:r,width:Math.min(n.width,n.height),display:"flex",flexDirection:"column",pointerEvents:"none",overflow:"hidden",zIndex:a};return(0,$r.jsx)("div",{style:l,children:o})},sa={width:50,height:180},ca=e=>Math.min(e.width,e.height),ua=e=>{let{screenPosition:t,frameSize:n,children:r,primaryButton:a,secondaryButton:i,tileDimensions:o=sa,zIndex:l=1e3,accessible:s=!1,flexibleSizing:c=!1}=e;const{x:u,y:d}=t,{width:h,height:p}=n;return(0,$r.jsxs)($r.Fragment,{children:[!s&&(0,$r.jsx)("div",{className:"fantasy-border-frame__backdrop",style:{zIndex:l-1}}),(0,$r.jsxs)("div",{className:"fantasy-border-frame__dialog",style:{left:u,top:d,width:h,height:p,zIndex:l},children:[(0,$r.jsx)(aa,{position:"top-left",size:ca(o),zIndex:l+1}),(0,$r.jsx)(aa,{position:"top-right",size:ca(o),zIndex:l+1}),(0,$r.jsx)(aa,{position:"bottom-left",size:ca(o),zIndex:l+1}),(0,$r.jsx)(aa,{position:"bottom-right",size:ca(o),zIndex:l+1}),(0,$r.jsx)(oa,{side:"top",tileDimensions:o,length:h,zIndex:l}),(0,$r.jsx)(oa,{side:"bottom",tileDimensions:o,length:h,zIndex:l}),(0,$r.jsx)(la,{side:"left",tileDimensions:o,length:p,zIndex:l}),(0,$r.jsx)(la,{side:"right",tileDimensions:o,length:p,zIndex:l}),(0,$r.jsx)("div",{className:"fantasy-border-frame__content ".concat(s?"":"fantasy-border-frame__content--not-accessible"," ").concat(c?"fantasy-border-frame__content--flexible":"fantasy-border-frame__content--fixed"),style:{left:ca(o),top:ca(o),width:h-2*ca(o),height:c?"auto":p-2*ca(o),maxHeight:c?p-2*ca(o):void 0,zIndex:l},children:r}),(a||i)&&(0,$r.jsxs)("div",{className:"fantasy-border-frame__button-area",style:{left:ca(o),width:h-2*ca(o),height:Math.min(Math.min(o.height,o.width),60),zIndex:l+2},children:[a&&(0,$r.jsx)("div",{children:a}),i&&(0,$r.jsx)("div",{children:i})]})]})]})},da="GameControl_gameControlContainer__m42vL",ha="GameButton_buttonContainer__N8Wyt",pa="GameButton_buttonImage__y42f4",fa="GameButton_buttonText__xOJQI",ma="GameButton_buttonTextSmall__jRUcP",ga=n.p+"static/media/Button.ab0d1487598af88733a1.png",ya={CANCEL:"Cancel",OK:"Ok",NEW:"New game",LOAD:"Load game",SAVE:"Save game",START:"Start game",BUILD:"Construct Buildings",CAST:"Cast spell",MOVE:"Move army",QUEST:"Hero quest",RECRUIT:"Recruit amy",TURN:"End of turn",ITEMS:"Use Item"},va=e=>{let{buttonName:t,onClick:n}=e;const r=Object.entries(ya).filter(e=>e[1]===t)[0][0],a=r.length>5?"".concat(fa," ").concat(ma):fa;return(0,$r.jsxs)("div",{className:ha,onClick:e=>{n?n(e):(console.log("".concat(t," clicked! onClick handler: 'not provided'")),"undefined"!==typeof window&&alert("".concat(t," clicked! onClick handler: 'not provided'")))},children:[(0,$r.jsx)("img",{src:ga,alt:t,className:pa}),(0,$r.jsx)("span",{className:a,children:r})]})},ba=()=>{const{setShowStartWindow:t,setShowSaveDialog:n}=na(),{gameState:r}=Jr(),a=(0,e.useCallback)(()=>{t(!0)},[t]),i=(0,e.useCallback)(()=>{n(!0)},[n]),o=!!r&&"human"===ct(r).playerType;return(0,$r.jsx)(e.Activity,{mode:o?"visible":"hidden",children:(0,$r.jsxs)("div",{className:da,children:[(0,$r.jsx)(va,{buttonName:ya.NEW,onClick:a}),(0,$r.jsx)(va,{buttonName:ya.LOAD}),(0,$r.jsx)(va,{buttonName:ya.SAVE,onClick:i})]})})},wa=(e,t,n,r)=>({regular:{minPct:e,maxPct:t,minAbs:n,maxAbs:r},veteran:{minPct:e/2,maxPct:t/2,minAbs:n/2,maxAbs:r/2},elite:{minPct:e/4,maxPct:t/4,minAbs:n/4,maxAbs:n/4}}),Sa=[...[{type:$t.TURN_UNDEAD,description:"Turns undead on the selected land",manaCost:0,target:Ve,manaType:ae.WHITE,rules:{type:Be,target:Fe,duration:1},penalty:wa(0,0,40,60)},{type:$t.VIEW_TERRITORY,description:"Reveals information about an opponent's territory",manaCost:25,target:Ve,manaType:ae.WHITE,rules:{type:Ge,target:Fe,duration:1}},{type:$t.BLESSING,description:"Increases defense of all units on a territory for 3 turns (+20%)",manaCost:40,target:Ue,manaType:ae.WHITE,rules:{type:Ge,target:Fe,duration:3}},{type:$t.HEAL,description:"Restores 20\u201330% of lost units after battle (cannot resurrect heroes)",manaCost:60,target:Ue,manaType:ae.WHITE,rules:{type:Ge,target:Fe,duration:0}}],...[{type:$t.ILLUSION,description:"Temporarily conceals territory information in and around the targeted land.",manaCost:25,target:Ue,manaType:ae.BLUE,rules:{type:Ge,target:Fe,duration:3}},{type:$t.TELEPORT,description:"Instantly move one army to a friendly stronghold",manaCost:45,target:Ue,manaType:ae.BLUE,rules:{type:Ge,target:He,duration:0}},{type:$t.TORNADO,description:"Kills 20\u201335% of all troops (heroes may be killed based on level)",manaCost:50,target:Ve,manaType:ae.BLUE,rules:{type:Be,target:Fe,duration:0},penalty:wa(.2,.35,5,5)},{type:$t.EXCHANGE,description:"Exchange 100 Blue mana into another mana source with penalty",manaCost:100,target:Ue,manaType:ae.BLUE}],...[{type:$t.FERTILE_LAND,description:"Increase gold production on lands in radius 1 by +50% for 2 turns",manaCost:40,target:Ue,manaType:ae.GREEN,rules:{type:Ge,target:Fe,duration:2}},{type:$t.ENTANGLING_ROOTS,description:"Enemy army on a territory cannot move for 1 turn",manaCost:60,target:Ve,manaType:ae.GREEN,rules:{type:Be,target:Fe,duration:1}},{type:$t.BEAST_ATTACK,description:"Kills 15\u201325% of all troops (heroes may be killed based on level)",manaCost:70,target:Ve,manaType:ae.GREEN,rules:{type:Be,target:Fe,duration:0},penalty:wa(.15,.25,5,5)},{type:$t.EARTHQUAKE,description:"Kills 10\u201320% of all troops, 40% chance to destroy a building (heroes may be killed based on level)",manaCost:100,target:Ve,manaType:ae.GREEN,rules:{type:Be,target:Fe,duration:0},penalty:wa(.1,.2,5,5)}],...[{type:$t.EMBER_RAID,description:"Sabotages enemy recruitment: adds +1 turn to ongoing unit training and prevents repeated casting on the same territory for 3 turns.",manaCost:30,target:Ve,manaType:ae.RED,rules:{type:Be,target:Fe,duration:3}},{type:$t.FORGE_OF_WAR,description:"Instantly recruits pack of uniq unit type available in a territory",manaCost:50,target:Ue,manaType:ae.RED},{type:$t.FIRESTORM,description:"Damages units in radius 1 lands at once (15\u201320% each)",manaCost:100,target:Ve,manaType:ae.RED,rules:{type:Be,target:Fe,duration:0},penalty:wa(.15,.2,5,5)},{type:$t.METEOR_SHOWER,description:"Kills 35\u201345% of all troops, 50% chance to destroy a building (heroes may be killed based on level)",manaCost:150,target:Ve,manaType:ae.RED,rules:{type:Be,target:Fe,duration:0},penalty:wa(.35,.45,20,20)}],...[{type:$t.SUMMON_UNDEAD,description:"Summons 30\u201360 undead troops depending on maximum Necromancer level",manaCost:25,target:Ue,manaType:ae.BLACK},{type:$t.PLAGUE,description:"Kills 25\u201340% of all troops (heroes may be killed based on level)",manaCost:75,target:Ve,manaType:ae.BLACK,rules:{type:Be,target:Fe,duration:0},penalty:wa(.25,.4,5,5)},{type:$t.RAISE_DEAD_HERO,description:"Revives fallen in battle or by magic Heroes as an Undead Hero (loses original alignment)",manaCost:100,target:Ue,manaType:ae.BLACK},{type:$t.CORRUPTION,description:"Converts neutral land into chaotic land (if no stronghold present, only 6 lands per game)",manaCost:150,target:Ke,manaType:ae.BLACK,rules:{type:Be,target:Fe,duration:0}}]],Ea=()=>{const{setShowCastSpellDialog:t,setShowConstructBuildingDialog:n,setShowEmpireTreasureDialog:r,setErrorMessagePopupMessage:a,setShowErrorMessagePopup:i}=na(),{gameState:o}=Jr(),l=(0,e.useCallback)(()=>{if(null==o)return;const e=ct(o);if(!e)return;const n=e.mana;Sa.some(e=>!(e.type===$t.TURN_UNDEAD&&0===n[e.manaType])&&e.manaCost<=n[e.manaType])?t(!0):"undefined"!==typeof window&&(a("Not enough mana to cast Spells!"),i(!0))},[o,a,t,i]),s=(0,e.useCallback)(()=>{if(null==o)return;const e=ct(o);e&&(ft(e).length>0?ut(o,re)&&0===rn(o).filter(e=>Vt(o,e.mapPos)&&!nn(e,z.STRONGHOLD)).length?"undefined"!==typeof window&&(a("No Lands under Warsmith control without buildings."),i(!0)):n(!0):"undefined"!==typeof window&&(a("Not enough money to construct a building!"),i(!0)))},[o,a,n,i]),c=(0,e.useCallback)(()=>{if(null==o)return;const e=ct(o);e&&(e.empireTreasures.length>0?r(!0):"undefined"!==typeof window&&(a("No treasures in your empire!"),i(!0)))},[o,a,r,i]),u=!!o&&"human"===ct(o).playerType;return(0,$r.jsx)(e.Activity,{mode:u?"visible":"hidden",children:(0,$r.jsxs)("div",{className:da,children:[(0,$r.jsx)(va,{buttonName:ya.BUILD,onClick:s}),(0,$r.jsx)(va,{buttonName:ya.CAST,onClick:l}),(0,$r.jsx)(va,{buttonName:ya.ITEMS,onClick:c})]})})},ka=()=>{const{addGlowingTile:t,clearAllGlow:n,setSelectedLandAction:r,setErrorMessagePopupMessage:a,setShowErrorMessagePopup:i}=na(),{gameState:o}=Jr(),l=(0,e.useCallback)(e=>{if(!o)return;n(),e.stopPropagation();const l=rn(o).filter(e=>e.buildings.some(e=>Ze(e)));0===l.length?"undefined"!==typeof window&&(a("No mustering grounds stand ready here."),i(!0)):(r("Recruit"),l.forEach(e=>{const n=yt(e.mapPos);t(n)}))},[o,n,a,i,r,t]),s=(0,e.useCallback)(e=>{if(!o)return;n(),e.stopPropagation();const l=Ut(o).map(e=>e.position);0===l.length?"undefined"!==typeof window&&(a("No Hero may be spared for Quest."),i(!0)):(r("Quest"),l.forEach(e=>t(yt(e))))},[o,n,a,i,r,t]),c=(0,e.useCallback)(e=>{if(!o)return;n(),e.stopPropagation();const l=Bt(o).filter(e=>!zt(e)).filter(e=>ct(o).playerProfile.doctrine!==re||e.heroes.length>0).flatMap(Ht);0===l.length?"undefined"!==typeof window&&(a("No armies are ready to march."),i(!0)):(r("MoveArmyFrom"),l.forEach(e=>t(yt(e))))},[t,n,o,a,r,i]),u=!!o&&"human"===ct(o).playerType;return(0,$r.jsx)(e.Activity,{mode:u?"visible":"hidden",children:(0,$r.jsxs)("div",{className:da,"data-testid":"game-control-container",children:[(0,$r.jsx)(va,{buttonName:ya.RECRUIT,onClick:l}),(0,$r.jsx)(va,{buttonName:ya.MOVE,onClick:c}),(0,$r.jsx)(va,{buttonName:ya.QUEST,onClick:s})]})})},xa="VialPanel_vialPanel__GPnlF",Aa="ManaVial_vialContainer__eqcMI",Ca="ManaVial_fillContainer__YpTAZ",Pa="ManaVial_fillContent__JdPPq",_a="ManaVial_fillBorder__B5QuN",Ra="ManaVial_vialImage__6Yncf",Ta=e=>({white:"#f5f1e8",black:"#3a2f41",green:"#30c46d",blue:"#2daefc",red:"#e64426"}[e]),Na=(e,t)=>{const n=(e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null})(e);if(!n)return e;const r=Math.max(0,Math.floor(n.r*t)),a=Math.max(0,Math.floor(n.g*t)),i=Math.max(0,Math.floor(n.b*t));return"#".concat(r.toString(16).padStart(2,"0")).concat(a.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0"))},Oa=n.p+"static/media/mana-vial.acdc30884558a3ecf7c0.png",Da=t=>{let{color:n,mana:r}=t;const{gameState:a}=Jr(),i=a&&r?((e,t,n)=>{if(n>=200)return 100;const r=Wt(e,jr({manaType:t}).heroTypes[0]);switch(Sa.reduce((e,r)=>e+(r.manaType===t&&r.manaCost<=n?1:0),0)){case 0:return r>0?10:0;case 1:return t===ae.WHITE&&0===r?0:27;case 2:return 45;case 3:return 62;default:return 80}})(a,n,r):0,[o,l]=(e=>{const t=Ta(e);return[t,Na(t,.25)]})(n),s={background:"linear-gradient(".concat(o,", ").concat(l,")"),boxShadow:"0 0 8px ".concat(Ta(n),"80"),height:"".concat(i,"%"),bottom:0,top:"auto"};return(0,$r.jsx)(e.Activity,{mode:a&&r&&i>0?"visible":"hidden",children:(0,$r.jsxs)("div",{className:Aa,"data-testid":n+"-filled-mana-vial",children:[(0,$r.jsxs)("div",{className:Ca,children:[(0,$r.jsx)("div",{className:Pa,style:s}),(0,$r.jsx)("div",{className:_a})]}),(0,$r.jsx)("img",{src:Oa,className:Ra,alt:"".concat(n," mana vial")})]})})},La=()=>{const{gameState:t}=Jr(),n=t?ct(t):void 0;return(0,$r.jsx)(e.Activity,{mode:t&&"human"===(null===n||void 0===n?void 0:n.playerType)?"visible":"hidden",children:(0,$r.jsx)("div",{className:xa,children:Object.values(ae).map(e=>{var t;return(0,$r.jsx)(Da,{color:e,mana:null===n||void 0===n||null===(t=n.mana)||void 0===t?void 0:t[e]},e)})})})};var Ma=n(8139),Ia=n.n(Ma);const ja="ExchangeManaVialPanel_exchangeVialContainer__aVzBJ",za="ExchangeManaVialPanel_exchangeTooltip__3UsKX",Ha="ExchangeManaVialPanel_vialPanel__ROBue",Fa=e=>Sa.find(t=>t.type===e),Ga=(e,t,n,r)=>{let a=e;return e.players.forEach(e=>{const i=Gt(a,n,[e.id]);Dr(i,t,ht(e,Oe),r).forEach(e=>{a=Tn(a,e)})}),Rn(a)},Ba=(e,t)=>{const n=(r=e,Object.values($t).includes(r)?Fa(e):Xe(e));var r;return{id:Object.freeze(c()),sourceId:Object.freeze(e),appliedBy:Object.freeze(t),rules:{type:n.rules.type,target:n.rules.target,duration:n.rules.duration}}},Wa=(e,t)=>{switch(e){case _:switch(t){case ae.BLACK:case ae.RED:return 90;case ae.GREEN:return 75;case ae.WHITE:return 50;default:return 0}case C:switch(t){case ae.WHITE:case ae.GREEN:return 90;case ae.RED:return 75;case ae.BLACK:return 50;default:return 0}case P:return 95;default:return 0}},Ua=(e,t)=>{const n=Object.values($t).includes(t)?Fa(t):Xe(t);if(n.type===$t.CORRUPTION){const t=new Set;return rn(e).filter(e=>nn(e,z.OUTPOST)||nn(e,z.STRONGHOLD)).forEach(n=>{const r=nn(n,z.STRONGHOLD);cn(Hn(e),n.mapPos,r?2:3,!1).forEach(n=>{Va(Xt(e,n))&&t.add(yt(n))})}),Array.from(t)}if(n.type===Ce){const t=new Set;return rn(e).filter(e=>nn(e,z.OUTPOST)||nn(e,z.STRONGHOLD)).forEach(n=>{cn(Hn(e),n.mapPos,3).forEach(n=>{Zt(e,n)===tt.id&&t.add(yt(n))})}),Array.from(t)}var r;if(n.target===Ue)return(null===(r=n.rules)||void 0===r?void 0:r.target)===He?Bt(e).filter(e=>!e.effects.some(e=>e.sourceId===t)).flatMap(e=>yt(Ht(e))):rn(e).filter(e=>!tn(e,t)).flatMap(e=>yt(e.mapPos));return(n.target===Ve?e.players.filter(t=>t.id!==e.turnOwner):e.players).filter(e=>!dt(e,t)).flatMap(t=>rn(e,t.id)).filter(e=>!tn(e,t)).flatMap(e=>yt(e.mapPos))},Va=e=>M(e.type)!==_&&e.type!==A.DESERT&&!e.corrupted&&Gr().includes(e.type),Ka=(e,t,n,r,a)=>{if(t===$t.EXCHANGE||Ua(e,t).includes(yt(n))){var i;const o=Fa(t),l=null!=n&&tn(Xt(e,n),Ee);if((null===(i=o.rules)||void 0===i?void 0:i.type)===Be&&l){const t=Xt(e,n).effects.find(e=>e.sourceId===Ee).id;let r=St(e,e.turnOwner,o.manaType,-o.manaCost);r=Pt(r,n,t),Object.assign(e,r)}else qa(e,o,n),Ya(e,o,n),Qa(e,o,n,r,a),$a(e,o,n),Xa(e,o,n)}},qa=(e,t,n)=>{let r=e;switch(t.type){case $t.TURN_UNDEAD:const a=st(r,Zt(e,n));if(dt(a,$t.TURN_UNDEAD))return;const i=Wt(e,v.CLERIC);r=((e,t,n)=>{const r=[...st(e,t).effects,n];return bt(e,t,{effects:r})})(r,a.id,Ba(t.type,e.turnOwner));const o=Ja(t.penalty,i);r=Ga(r,o,n,[g.UNDEAD]);break;case $t.VIEW_TERRITORY:r=Ct(r,n,Ba(t.type,e.turnOwner));break;case $t.BLESSING:cn(Hn(r),n,1,!1).filter(e=>Zt(r,e)===r.turnOwner).forEach(e=>{r=Ct(r,e,Ba(t.type,r.turnOwner))});break;case $t.HEAL:break;default:return}Object.assign(e,St(r,r.turnOwner,t.manaType,-t.manaCost))},Ya=(e,t,n)=>{let r=e,a=0;switch(t.type){case $t.FERTILE_LAND:a=Wt(r,v.DRUID),r=Za(r,t,n,a);break;case $t.ENTANGLING_ROOTS:r=Ct(r,n,Ba(t.type,r.turnOwner));break;case $t.BEAST_ATTACK:a=Wt(r,v.DRUID);const e=Ja(t.penalty,a);r=Ga(r,e,n);break;case $t.EARTHQUAKE:r=Ga(r,t.penalty,n),ut(r,re,Zt(r,n))&&Vt(r,n)||Math.random()<.4&&(r=Fn(r,n));break;default:return}const i=ht(ct(r),Ie);Object.assign(e,St(r,r.turnOwner,t.manaType,-Math.floor(t.manaCost*(t.manaType===ae.GREEN&&i?.85:1))))},Qa=(e,t,n,r,a)=>{let i=e;switch(t.type){case $t.ILLUSION:const e=Wt(i,v.ENCHANTER);i=Za(i,t,n,e);break;case $t.TELEPORT:if(null!=r&&Zt(i,r)===i.turnOwner){Gt(i,n,[i.turnOwner]).forEach(e=>{i=Tn(i,(0,f.A)((0,f.A)({},e),{},{movement:Nn(r)}))})}break;case $t.TORNADO:i=Ga(i,t.penalty,n);break;case $t.EXCHANGE:const o=ct(i),l=Wa(o.playerProfile.alignment,a);i=St(i,i.turnOwner,a,l);break;default:return}Object.assign(e,St(i,i.turnOwner,t.manaType,-t.manaCost))},$a=(e,t,n)=>{var r;let a=e;switch(t.type){case $t.EMBER_RAID:a=Ct(a,n,Ba(t.type,a.turnOwner)),a=Rt(a,n,e=>e.map(e=>(0,f.A)((0,f.A)({},e),{},{turnsRemaining:e.turnsRemaining+1})));break;case $t.FORGE_OF_WAR:const e=Xt(a,n),i=null!==(r=j(e.type,e.corrupted).filter(E).filter(m(x)).find(e=>e!==g.WARD_HANDS&&e!==g.WARRIOR))&&void 0!==r?r:g.WARRIOR,o=On(a.turnOwner,n,{regular:Sn(i,60)});a=Pn(a,o);break;case $t.FIRESTORM:const l=Wt(a,v.PYROMANCER),s=Ja(t.penalty,l);cn(Hn(a),n,1,!1).forEach(e=>{a=Ga(a,s,e)});break;case $t.METEOR_SHOWER:const c=Wt(a,v.PYROMANCER),u=Ja(t.penalty,c);a=Ga(a,u,n),ut(a,re,Zt(a,n))&&Vt(a,n)||Math.random()<.5+.1*c/b&&(a=Fn(a,n));break;default:return}Object.assign(e,St(a,a.turnOwner,t.manaType,-t.manaCost))},Xa=(e,t,n)=>{let r=e;switch(t.type){case $t.SUMMON_UNDEAD:const e=Wt(r,v.NECROMANCER),a=Sn(g.UNDEAD,Math.ceil(Qt(40,60)*(1+e/b))),i=Ft(r,n).find(e=>!zt(e)&&e.controlledBy===r.turnOwner);r=null!=i?Tn(r,xn(i,a)):Pn(r,On(r.turnOwner,n,{regular:a}));break;case $t.PLAGUE:r=Ga(r,t.penalty,n);break;case $t.CORRUPTION:const o=Xt(r,n),l=Zt(r,n)===r.turnOwner,s=I(o.type),c=l?s.max:s.min;r=((e,t,n)=>At(e,t,e=>(0,f.A)((0,f.A)((0,f.A)({},e),void 0!==n.corrupted&&{corrupted:n.corrupted}),void 0!==n.goldPerTurn&&{goldPerTurn:n.goldPerTurn})))(r,n,{corrupted:!0,goldPerTurn:c});break;case $t.RAISE_DEAD_HERO:break;default:return}Object.assign(e,St(r,r.turnOwner,t.manaType,-t.manaCost))},Za=(e,t,n,r)=>{const a=cn(Hn(e),n,1,!0).filter(t=>Zt(e,t)===e.turnOwner),i=Math.ceil(a.length*(r/b)),o=(s=i)>=(l=a).length?[...l]:[...l].sort(()=>.5-Math.random()).slice(0,s);var l,s;let c=e;return[n,...o].forEach(n=>{c=Ct(c,n,Ba(t.type,e.turnOwner))}),c},Ja=(e,t)=>{const n={regular:(0,f.A)({},e.regular),veteran:(0,f.A)({},e.veteran),elite:(0,f.A)({},e.elite)};return n.regular.maxPct+=t/b*.1,n.regular.minPct+=t/b*.1,n.regular.minAbs*=1+t/b,n.regular.maxAbs*=1+t/b,n.veteran.maxPct+=t/b*.1,n.veteran.minPct+=t/b*.1,n.veteran.minAbs*=1+t/b,n.veteran.maxAbs*=1+t/b,n.elite.maxPct+=t/b*.1,n.elite.minPct+=t/b*.1,n.elite.minAbs*=1+t/b,n.elite.maxAbs*=1+t/b,n},ei=t=>{let{color:n,conversionAmount:r,onExchange:a,isHovered:i,onHover:o}=t;const l=(0,e.useCallback)(()=>{a(n)},[n,a]),s=(0,e.useCallback)(()=>{o(n)},[n,o]),c=(0,e.useCallback)(()=>{o(null)},[o]);return(0,$r.jsxs)("div",{className:ja,onClick:l,onMouseEnter:s,onMouseLeave:c,title:"Exchange to ".concat(r," ").concat(n," mana"),"data-testid":"exchange-vial-".concat(n),children:[(0,$r.jsx)(Da,{color:n,mana:1e3}),i&&(0,$r.jsxs)("div",{className:za,children:["+",r," ",n]})]})},ti=()=>{const{gameState:t,updateGameState:n}=Jr(),{setIsArcaneExchangeMode:r}=na(),[a,i]=(0,e.useState)(null),o=(0,e.useCallback)(e=>{t&&(Ka(t,$t.EXCHANGE,void 0,void 0,e),n(t),r(!1))},[t,n,r]);if(!t)return null;const l=ct(t);if(!l||"human"!==l.playerType)return null;const s=Object.values(ae).filter(e=>e!==ae.BLUE);return(0,$r.jsx)("div",{className:Ia()(xa,Ha),"data-testid":"exchange-vial-panel",children:s.map(e=>(0,$r.jsx)(ei,{color:e,conversionAmount:Wa(l.playerProfile.alignment,e),onExchange:o,isHovered:a===e,onHover:i},e))})},ni="OpponentsPanel_opponentsPanelContainer__vCafk",ri="OpponentsPanel_opponentsGrid__H0ZX3",ai="OpponentsPanel_avatarRow__o04FN",ii="OpponentsPanel_avatarContainer__RFiqr",oi={container:"Avatar_container__8PuFP","container--circle":"Avatar_container--circle__0VqYQ","container--rectangle":"Avatar_container--rectangle__L+2Ia",image:"Avatar_image__3pwLb","empty-placeholder":"Avatar_empty-placeholder__zSa7r"},li=n.p+"static/media/alaric.7890a445d08a78626caa.png",si=n.p+"static/media/morgana.4de6575e279e16030476.png",ci=n.p+"static/media/thorin.dfd1fa7dc4df5926bb53.png",ui=n.p+"static/media/vex.3352b4553d07aa1e7029.png",di=n.p+"static/media/grimjaw.7ed076af27d0a660ca8d.png",hi=n.p+"static/media/serena.c56dd7a3ab323617689d.png",pi=n.p+"static/media/kael.020c79f3591fb99ef9d7.png",fi=n.p+"static/media/elara.7ef7537ca9be90c6af4d.png",mi=n.p+"static/media/marcus.6e0d80784b325526c2a4.png",gi=n.p+"static/media/lydia.306a7220b17918557110.png",yi=n.p+"static/media/elderoak.ef1f14b56b35c1d66e9d.png",vi=n.p+"static/media/valdris.c9c11d9da8fafab700ef.png",bi=n.p+"static/media/ignatius.9af98ba2f3c44fcc189a.png",wi=n.p+"static/media/ember.6e4123565bd294ae4beb.png",Si={alaric:li,morgana:si,thorin:ci,vex:ui,grimjaw:di,serena:hi,kael:pi,elara:fi,marcus:mi,lydia:gi,selene:n.p+"static/media/selene.d2650941895f96c00440.png",elderoak:yi,valdris:vi,ignatius:bi,ember:wi,kaer:n.p+"static/media/kaer.19b24aeb55daf7968145.png",nullwarden:n.p+"static/media/nullwarden.ff473a31ff7bec492548.png",sereth:n.p+"static/media/sereth.80edfad82bb3f52f8d59.png",zarhka:n.p+"static/media/zarhka.88cd6a464e2d53b6ecfb.png",ilyra:n.p+"static/media/ilyra.acf3c32737729407f6d3.png",aelthir:n.p+"static/media/aelthir.b68b56b178d1f4c991cd.png",brunna:n.p+"static/media/brunna.cc988a75a9b99dced91b.png"},Ei=e=>Si[e],ki=e=>{let{player:t,size:n=60,shape:r="circle",borderColor:a="#d4af37",className:i,style:o}=e;const l=(0,f.A)({width:"".concat(n,"px"),height:"".concat(n,"px"),borderColor:a},o),s="".concat(oi.container," ").concat(oi["container--".concat(r)]," ").concat(i||"");return null==t||t.id===tt.id?(0,$r.jsx)("div",{style:l,className:s,children:(0,$r.jsx)("div",{className:oi["empty-placeholder"],children:"EMPTY"})}):Ei(t.id)?(0,$r.jsx)("div",{style:l,className:s,children:(0,$r.jsx)("img",{src:Ei(t.id),alt:t.name,className:oi.image,onError:e=>{e.currentTarget.style.display="none"}})}):null},xi=()=>{const{gameState:t}=Jr(),{showOpponentInfo:n,addGlowingTile:r}=na(),a=(0,e.useCallback)((e,a)=>{n(e,a),setTimeout(()=>{rn(t,e.id).forEach(e=>r(yt(e.mapPos)))},0)},[n,r,t]);if(null==t)return null;const i=ct(t),o=t.players.filter(e=>e.id!==i.id),l=(e=>{if(e<=4)return{rows:[e]};{const t=Math.ceil(e/2);return{rows:[t,e-t]}}})(o.length);let s=0;const c=l.rows.map((e,t)=>{const n=o.slice(s,s+e);return s+=e,((e,t)=>(0,$r.jsx)("div",{className:ai,children:e.map((e,n)=>(0,$r.jsx)("div",{className:ii,onClick:t=>{const n=t.currentTarget.getBoundingClientRect(),r={x:n.left,y:n.top};a(e,r)},children:(0,$r.jsx)(ki,{player:e.playerProfile,size:o.length<=4?120:90,shape:"circle",borderColor:qt(e.color)})},"".concat(t,"-").concat(n,"-").concat(e.id)))},t))(n,t)});return(0,$r.jsx)("div",{className:ni,children:(0,$r.jsx)("div",{className:ri,children:c})})},Ai="Player_playerContainer__QmLJ5",Ci="Player_playerDetails__5owT4",Pi="Player_playerName__kbP9l",_i="Player_moneyInfo__DPZJO",Ri="Player_moneyItem__5-Qsv",Ti="Player_clickableAvatar__hsX0J",Ni=e=>{let{avatarSize:t}=e;const{addGlowingTile:n}=na(),{gameState:r}=Jr();if(null==r)return null;const a=ct(r),i=fn(r);return null==a?null:(0,$r.jsxs)("div",{className:Ai,children:[(0,$r.jsx)("div",{onClick:()=>{setTimeout(()=>{rn(r).forEach(e=>n(yt(e.mapPos)))},0)},className:Ti,children:(0,$r.jsx)(ki,{player:a.playerProfile,size:t,shape:"rectangle",borderColor:a.color})}),(0,$r.jsxs)("div",{className:Ci,children:[(0,$r.jsx)("div",{className:Pi,children:a.playerProfile.name}),(0,$r.jsxs)("div",{className:_i,children:[(0,$r.jsxs)("div",{className:Ri,children:["Gold: ",a.vault]}),(0,$r.jsxs)("div",{className:Ri,children:[i>0?"+".concat(i):i,"/turn"]})]})]})]})},Oi=e=>{let{height:t,tileDimensions:n}=e;const{endCurrentTurn:r}=Jr(),{isArcaneExchangeMode:a}=na(),i=t-2*Math.min(n.height,n.width)-10,o=(0,$r.jsx)(va,{buttonName:ya.TURN,onClick:r});return(0,$r.jsx)(ua,{screenPosition:{x:0,y:0},frameSize:{width:window.innerWidth,height:t},primaryButton:o,tileDimensions:n,accessible:!0,zIndex:100,children:(0,$r.jsx)("div",{id:"TopPanel","data-testid":"TopPanel",className:"".concat(d," ").concat(h," top-bar-panel"),children:(0,$r.jsxs)("div",{className:p,children:[(0,$r.jsx)(Ea,{}),(0,$r.jsx)(ka,{}),(0,$r.jsx)(Ni,{avatarSize:i}),a?(0,$r.jsx)(ti,{}):(0,$r.jsx)(La,{}),(0,$r.jsx)(xi,{}),(0,$r.jsx)(ba,{})]})})})},Di="Battlefield_mapContainer__UgN+j",Li="Battlefield_battlefieldContent__YANuD",Mi="Hexagonal_hexTile__fDouK",Ii="Hexagonal_hexTileImg__EGEgH",ji="Hexagonal_hex-row__KJ-VJ",zi="Hexagonal_hexTile--glowing__u+Je0",Hi="Hexagonal_hexTile--normal__5Yu3V",Fi="Popup_popupContent__VReLv",Gi="Popup_header__QO3iF",Bi="Popup_title__2vWw9",Wi="Popup_characteristics__RkcDO",Ui="Popup_row__CMWIK",Vi="Popup_label__wxl0L",Ki="Popup_value__3S-7Y",qi="Popup_message__buLwZ",Yi={header:"LandCharacteristicsPopup_header__xvLWf",title:"LandCharacteristicsPopup_title__Kaoi7",row:"LandCharacteristicsPopup_row__EUHHe",label:"LandCharacteristicsPopup_label__hf2z-",buildingsList:"LandCharacteristicsPopup_buildingsList__hd3Qo",building:"LandCharacteristicsPopup_building__9SAIJ",hero:"LandCharacteristicsPopup_hero__QOunp",regular:"LandCharacteristicsPopup_regular__Ns-Rl",veteran:"LandCharacteristicsPopup_veteran__SevQh",elite:"LandCharacteristicsPopup_elite__XMKOD"},Qi=t=>{let{screenPosition:n,dimensions:r,accessible:a=!0,children:i,onClose:o}=t;const l=(0,e.useRef)(null),{hideOpponentInfo:s,hideLandPopup:c,setShowErrorMessagePopup:u}=na();return(0,e.useEffect)(()=>{const e=()=>{o?o():(s(),c(),u(!1))},t=t=>{l.current&&!l.current.contains(t.target)&&e()},n=t=>{"Escape"===t.key&&e()};return document.addEventListener("mousedown",t),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",n)}},[s,c,o,u]),(0,$r.jsx)("div",{ref:l,children:(0,$r.jsx)(ua,{screenPosition:n,frameSize:r,tileDimensions:{width:20,height:70},accessible:a,flexibleSizing:!0,children:i})})},$i={[C]:"rgb(74, 144, 226)",[P]:"rgb(149, 165, 166)",[_]:"rgb(231, 76, 60)",[R]:"rgb(255, 255, 255)"},Xi=e=>$i[e],Zi=e=>{switch(e){case Ge:return"#4CAF50";case Be:return"#F44336";case We:return"#344ceb"}},Ji=e=>{let{landPos:t,screenPosition:n}=e;const{hideLandPopup:r}=na(),{gameState:a}=Jr();if(null==a)return null;const i=((e,t)=>{const n=Xt(e,t),r=st(e,Zt(e,t)),a=r.playerProfile.name,i=qt(r.color),o=ht(r,Re)||tn(n,$t.ILLUSION),l=tn(n,$t.VIEW_TERRITORY,e.turnOwner)||tn(n,Ae,e.turnOwner),s=mt(ct(e),n);if(a===tt.id||r.id!==e.turnOwner&&!l)return{owner:a,color:i,type:n.type,alignment:n.corrupted?_:M(n.type),isCorrupted:n.corrupted,goldPerTurn:n.goldPerTurn,recruit:s,effects:[],heroes:[],regulars:[],warMachines:[],buildings:a===tt.id?n.buildings.map(e=>e.type):[]};{if(o&&r.id!==e.turnOwner&&l)return{owner:a,color:i,type:n.type,alignment:n.corrupted?_:M(n.type),goldPerTurn:n.goldPerTurn,recruit:s,effects:[],heroes:[],regulars:[],warMachines:[],buildings:[],isCorrupted:n.corrupted,illusionMsg:Yt(en)};const c=Ft(e,t);return{owner:a,color:i,type:n.type,alignment:n.corrupted?_:M(n.type),isCorrupted:n.corrupted,goldPerTurn:n.goldPerTurn,recruit:s,effects:[...n.effects],heroes:c.flatMap(e=>e.heroes).map(e=>"".concat(e.name," lvl: ").concat(e.level)),regulars:c.flatMap(e=>e.regulars).map(e=>({rank:e.rank,info:"".concat(e.type," (").concat(e.count,") ").concat(e.rank.charAt(0).toUpperCase())})),warMachines:Object.entries(c.flatMap(e=>e.warMachines).reduce((e,t)=>(e[t.type]=(e[t.type]||0)+t.count,e),{})).map(e=>{let[t,n]=e;return"".concat(t," (").concat(n,")")}),buildings:n.buildings.map(e=>e.type)}}})(a,t);let o=133;i.illusionMsg?o+=21:(i.buildings.length>0&&(o+=24*i.buildings.length),i.effects.length>0&&(o+=21*i.effects.length),i.heroes.length>0&&(o+=21*i.heroes.length),i.regulars.length>0&&(o+=21*i.regulars.length),i.warMachines.length>0&&(o+=21*i.warMachines.length));const l=Math.min(o,270),s=window.innerWidth,c=window.innerHeight,u=l+30;let d=n.x+10,h=n.y+10;return d+320>s&&(d=n.x-320-10,d<0&&(d=s-320-10)),h+u>c&&(h=n.y-u-10,h<0&&(h=c-u-10)),d=Math.max(10,d),h=Math.max(10,h),(0,$r.jsx)(Qi,{screenPosition:{x:d,y:h},dimensions:{width:320,height:l+30},onClose:r,children:(0,$r.jsxs)("div",{className:Fi,children:[(0,$r.jsx)("div",{className:"".concat(Gi," ").concat(Yi.header),children:(0,$r.jsx)("h3",{className:"".concat(Bi," ").concat(Yi.title),children:(i.isCorrupted?"Corrupted ":"")+i.type})}),(0,$r.jsxs)("div",{className:Wi,children:[(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Yi.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Yi.label),children:"Alignment:"}),(0,$r.jsx)("span",{className:Ki,style:{color:Xi(i.alignment)},children:i.alignment})]}),(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Yi.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Yi.label),children:"Position:"}),(0,$r.jsxs)("span",{className:Ki,children:[t.row,", ",t.col]})]}),(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Yi.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Yi.label),children:"Gold per Turn:"}),(0,$r.jsx)("span",{className:Ki,children:i.goldPerTurn})]}),(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Yi.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Yi.label),children:"Controlled By:"}),(0,$r.jsx)("span",{className:Ki,style:{color:i.color},"data-testid":"owner",children:i.owner})]}),i.illusionMsg?(0,$r.jsx)("div",{className:"".concat(Ui," ").concat(Yi.row),children:(0,$r.jsx)("span",{className:Vi,style:{fontStyle:"italic",color:"#888"},children:i.illusionMsg})}):(0,$r.jsxs)($r.Fragment,{children:[i.buildings&&i.buildings.length>0&&(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Yi.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Yi.label),children:"Buildings:"}),(0,$r.jsx)("div",{className:Yi.buildingsList,children:i.buildings.map((e,t)=>(0,$r.jsx)("span",{className:Yi.building,children:e},t))})]}),i.effects.length>0&&(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Yi.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Yi.label),children:"Effects:"}),(0,$r.jsx)("div",{className:Yi.buildingsList,children:i.effects.map((e,t)=>(0,$r.jsxs)("span",{className:Yi.hero,style:{color:Zi(e.rules.type)},children:[e.sourceId," (",e.rules.duration,")"]},t))})]}),(i.heroes.length>0||i.regulars.length>0||i.warMachines.length>0)&&(0,$r.jsxs)($r.Fragment,{children:[i.heroes.length>0&&(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Yi.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Yi.label),children:"Heroes:"}),(0,$r.jsx)("div",{className:Yi.buildingsList,children:i.heroes.map((e,t)=>(0,$r.jsx)("span",{className:Yi.hero,children:e},t))})]}),i.regulars.length>0&&(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Yi.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Yi.label),children:"Units:"}),(0,$r.jsx)("div",{className:Yi.buildingsList,children:i.regulars.map((e,t)=>(0,$r.jsx)("span",{className:Yi[e.rank],children:e.info},t))})]}),i.warMachines.length>0&&(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Yi.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Yi.label),children:"War Machines:"}),(0,$r.jsx)("div",{className:Yi.buildingsList,children:i.warMachines.map((e,t)=>(0,$r.jsx)("span",{className:Ki,children:e},t))})]})]})]})]})]})})},eo=(e,t,n)=>{const r=ct(e),a=pt(r,t);if(!a)return;if(!Ua(e,a.treasure.type).includes(yt(n)))return;const i={regular:{minPct:0,maxPct:0,minAbs:30,maxAbs:60},veteran:{minPct:0,maxPct:0,minAbs:15,maxAbs:30},elite:{minPct:0,maxPct:0,minAbs:5,maxAbs:15}};if(0===a.charge)return void Object.assign(e,bt(e,r.id,Mt(r,a)));let o=e;switch(a.treasure.type){case be:o=Ga(o,i,n,[g.UNDEAD]);break;case we:o=Ga(o,i,n);break;case Se:break;case Ee:o=Ct(o,n,Ba(a.treasure.type,e.turnOwner));break;case ke:break;case xe:const t=Xt(o,n).effects.find(e=>e.rules.type===Be);t&&(o=Pt(o,n,t.id));break;case Ae:const r=Zt(o,n);cn(Hn(e),n,1,!1).filter(t=>Zt(e,t)===r).forEach(t=>{o=Ct(o,t,Ba(a.treasure.type,e.turnOwner))});break;case Ce:o=Et(o,o.turnOwner,n),o=Ct(o,n,Ba(a.treasure.type,o.turnOwner));break;case _e:o=Ct(o,n,Ba(_e,o.turnOwner))}o=bt(o,r.id,((e,t)=>(0,f.A)((0,f.A)({},e),{},{empireTreasures:e.empireTreasures.map(e=>e.id===t.id?(0,f.A)((0,f.A)({},e),{},{charge:t.charge-1}):e)}))(ct(o),a)),Object.assign(e,o)},to=(e,t)=>{switch(t){case mn.REGULAR:return Math.max(Math.ceil(.1*e),60);case mn.VETERAN:return Math.max(Math.ceil(.07*e),40);default:return Math.max(Math.ceil(.05*e),20)}},no=n.p+"static/media/darkforest.c7b5f337796d4a1b92a4.png",ro=n.p+"static/media/greenforest.00baf50e8af9fa011256.png",ao=n.p+"static/media/hills.ec6aa6dc4850e0c50708.png",io=n.p+"static/media/mountains.8e830c9ecad809d2deba.png",oo=n.p+"static/media/plains.3822373e507b0835d67e.png",lo=n.p+"static/media/swamp.388bc16e3d05124be12d.png",so=n.p+"static/media/desert.9934e6300b08c21eea52.png",co=n.p+"static/media/lava.c01031c21cb85214e71a.png",uo=n.p+"static/media/volcano.2414ea3c3519cefd6bb4.png",ho=n.p+"static/media/sunspire-peaks.69c07769d5731c35d40f.png",po=n.p+"static/media/golden-plains.2ff096b5b96f9b7ebe57.png",fo=n.p+"static/media/crystal-basin.6509eba19ee409a617df.png",mo=n.p+"static/media/misty-glades.8be8d136ebc16ba2062d.png",go=n.p+"static/media/shadow-mire.8f297da65b1f61c9dc2d.png",yo=n.p+"static/media/blighted-fen.616f5dffd74b5fb5aa22.png",vo=n.p+"static/media/heartwood-grove.60909c61e36663fcc28b.png",bo=n.p+"static/media/verdant-glade.1b3e48bc7f2bf829088a.png",wo=n.p+"static/media/hills-corrupted.65515f253d84c30e4b46.png",So=n.p+"static/media/mountains-corrupted.81b952f432d619f3f803.png",Eo=n.p+"static/media/plains-corrupted.90325e50c11d535342da.png",ko=n.p+"static/media/green-forest-corrupted.e2899427898f4562ed7e.png",xo={[A.PLAINS]:oo,[A.HILLS]:ao,[A.DESERT]:so,[A.MOUNTAINS]:io,[A.GREEN_FOREST]:ro,[A.SWAMP]:lo,[A.DARK_FOREST]:no,[A.VOLCANO]:uo,[A.LAVA]:co,[A.SUN_SPIRE_PEAKS]:ho,[A.GOLDEN_PLAINS]:po,[A.CRISTAL_BASIN]:fo,[A.MISTY_GLADES]:mo,[A.SHADOW_MIRE]:go,[A.BLIGHTED_FEN]:yo,[A.HEARTWOOD_GROVE]:vo,[A.VERDANT_GLADE]:bo},Ao={[A.PLAINS]:Eo,[A.HILLS]:wo,[A.MOUNTAINS]:So,[A.GREEN_FOREST]:ko},Co=(e,t,n,r)=>{const a=ct(e);if(ut(e,re)&&r.regulars.length>0&&0===r.heroes.length)return e;const i=Zt(e,n);if(i!==e.turnOwner&&i!==tt.id){const t=a.diplomacy[i];if(!t||t.status!==it&&t.status!==ot){if(a.playerProfile.alignment!==_)return e;e=It(e,a.id,i,it)}}const o=Ft(e,t).filter(t=>!zt(t)&&t.controlledBy===e.turnOwner);if(1!==o.length)return e;if(i!==e.turnOwner&&(0===r.regulars.length||0===o[0].regulars.length)){if(!(r.heroes.reduce((e,t)=>e+t.level,0)>=20))return e;const t=Hn(e);if(an(e).filter(n=>cn(t,n.mapPos,1,!0).some(t=>Zt(e,t)!==e.turnOwner)).every(e=>((e,t,n)=>{if(!un(e,t)||!un(e,n))return-1;let r=new Set,a=[];for(r.add(t),a.push({pos:t,dist:0});a.length>0;){const t=a.shift();if(t.pos.row===n.row&&t.pos.col===n.col)return t.dist;const i=dn(e,t.pos);for(let e of i)Array.from(r).some(t=>t.row===e.row&&t.col===e.col)||(a.push({pos:e,dist:t.dist+1}),r.add(e))}return-1})(t,n,e.mapPos)>4))return e}let l=o[0];for(let u=0;u<r.heroes.length;u++){const t=r.heroes[u];if(!l.heroes.some(e=>e.name===t.name))return e}for(let u=0;u<r.regulars.length;u++){const t=r.regulars[u];if(!l.regulars.some(e=>e.type===t.id&&e.rank===t.rank&&e.count>=t.count))return e}for(let u=0;u<r.warMachines.length;u++){const t=r.warMachines[u];if(!l.warMachines.some(e=>e.type===t.type&&e.count>=t.count))return e}let s=On(e.turnOwner,t);r.heroes.forEach(e=>{const t=kn(l,e.name);l=t.updatedArmy,s=En(s,t.hero)}),r.regulars.forEach(e=>{const t=Cn(l,e.id,e.rank,e.count);l=t.updatedArmy,s=xn(s,t.regulars)}),r.warMachines.forEach(e=>{const t=((e,t,n,r)=>{const a=e.warMachines.findIndex(e=>e.type===t&&e.count>=n);if(-1===a)return;const i=e.warMachines[a];if(i.count===n)return{updatedArmy:(0,f.A)((0,f.A)({},e),{},{warMachines:e.warMachines.filter((e,t)=>t!==a)}),warMachines:i};return{updatedArmy:(0,f.A)((0,f.A)({},e),{},{warMachines:e.warMachines.map((e,t)=>t===a?(0,f.A)((0,f.A)({},e),{},{count:e.count-n}):e)}),warMachines:{type:i.type,count:n,durability:r}}})(l,e.type,e.count,e.durability);l=t.updatedArmy,s=An(s,t.warMachines)}),s=(0,f.A)((0,f.A)({},s),{},{effects:[...l.effects],movement:(0,f.A)((0,f.A)({},s.movement),{},{path:ln(Hn(e),Ht(s),n)})});let c=e;return c=0===l.regulars.length&&0===l.heroes.length&&0===l.warMachines.length?_n(c,l.id):Tn(c,l),c=Pn(c,s),c},Po=e=>{let{mapPosition:t}=e;const{landPopupPosition:n,landPopupScreenPosition:r,showLandPopup:a,glowingTiles:i,clearAllGlow:o,selectedLandAction:l,setSelectedLandAction:s,setShowRecruitArmyDialog:c,setShowSendHeroInQuestDialog:u,setActionLandPosition:d,actionLandPosition:h,addGlowingTile:p,setMoveArmyPath:m,showSpellAnimation:g,showEmpireEvents:y}=na(),{gameState:v,updateGameState:b}=Jr(),w=(null===n||void 0===n?void 0:n.row)===t.row&&(null===n||void 0===n?void 0:n.col)===t.col,S=v.map.lands[yt(t)];if(!S)return(0,$r.jsx)("div",{className:Mi,title:"Empty Tile","data-testid":"land-tile"});const E=(k=S).corrupted?Ao[k.type]:xo[k.type];var k;const x=S.type,A=yt(t),C=i.has(A)||S.glow,P="".concat(Mi," ").concat(C?zi:Hi);return(0,$r.jsxs)($r.Fragment,{children:[(0,$r.jsx)("div",{className:P,onContextMenu:e=>{e.preventDefault(),a(t,{x:e.clientX,y:e.clientY})},onClick:e=>{if(v&&C){if(e.preventDefault(),e.stopPropagation(),null!==l&&void 0!==l&&l.startsWith("Spell: ")){if(null!==l&&void 0!==l&&l.includes($t.TELEPORT)){if(null!==l&&void 0!==l&&l.includes("TeleportTo")){const e=Fa($t.TELEPORT),n=zn(t,Hn(v));return g(e.manaType,t,n),Ka(v,$t.TELEPORT,h,t),o(),void s(null)}return o(),d(t),s("".concat(l,"To")),void rn(v).flatMap(e=>yt(e.mapPos)).filter(e=>e!==A).forEach(e=>p(e))}const e=Fa(null===l||void 0===l?void 0:l.substring(7));if(null===v||void 0===v?void 0:v.turnOwner){const n=Hn(v),r=zn(t,n);g(e.manaType,t,r),Ka(v,e.type,t),b(v)}}else if(null!==l&&void 0!==l&&l.startsWith("Item: ")){const e=null===l||void 0===l?void 0:l.substring(6);if(e){const n=pt(ct(v),e);eo(v,e,t),pt(ct(v),e)||y([{status:er,message:_o(n.treasure.type)}]),b(v)}}else if(null!==l&&void 0!==l&&l.startsWith("Building: ")){const e=null===l||void 0===l?void 0:l.substring(10),n=ct(v);n&&n.vault>=he(e).buildCost&&(Gn(v,e,t),b(v))}else if("Recruit"===l)d(t),c(!0);else if("Quest"===l)d(t),u(!0);else{if("MoveArmyFrom"===l){o(),d(t),s("MoveArmyTo");const e=an(v).map(e=>e.mapPos),n=Ft(v,t).filter(e=>!zt(e)),r=(e=>{if(0===e.length)return 0;const t=Object.values(mn).map(t=>{return{rank:t,num:(n=e.filter(e=>e.rank===t),n.reduce((e,t)=>e+t.count,0))};var n}),n=t.map(e=>(0,f.A)({},e));let r=1;for(;r<4&&(Object.values(mn).forEach(e=>{const t=n.find(t=>t.rank===e);t.num=Math.max(t.num-to(t.num,e),0)}),!n.every(e=>e.num<=.4*t.find(t=>t.rank===e.rank).num));)r++;return Math.max(r,1)})(n.flatMap(e=>e.regulars)),a=n.reduce((e,t)=>e+t.heroes.reduce((e,t)=>e+t.level,0),0),i=ct(v),l=i.playerProfile.alignment===_,c=cn(v.map.dimensions,t,a>=20?4:r).filter(e=>{if(l)return!0;const t=Zt(v,e);if(t===i.id||t===tt.id)return!0;const n=gt(v,v.turnOwner,t);return n===it||n===ot});return void Array.from(new Map([...e,...c].map(e=>["".concat(e.row,":").concat(e.col),e])).values()).forEach(e=>p(yt(e)))}"MoveArmyTo"===l?m({from:h,to:t}):alert("Unknown action for Land ".concat(A,". Action item: ").concat(JSON.stringify(l)))}o(),s(null)}},style:{backgroundColor:(()=>{var e;if(null==v)return"white";const t=st(v,Zt(v,S.mapPos));return qt(null!==(e=null===t||void 0===t?void 0:t.color)&&void 0!==e?e:"white")})()},"data-testid":"land-tile",children:E?(0,$r.jsx)("img",{src:E,alt:x,className:Ii}):(0,$r.jsx)("p",{children:"no image"})}),w&&(0,$r.jsx)(Ji,{landPos:t,screenPosition:r})]})},_o=e=>{const t=["With a final whisper, ".concat(e," crumbles into lifeless dust."),"The magic bound to ".concat(e," fades, leaving only ash behind."),"A hollow echo rings as ".concat(e," shatters into nothingness."),"The power within ".concat(e," collapses, undone by its own use."),"Orrivane reclaims what was borrowed\u2014".concat(e," is no more."),"Bound power disperses; ".concat(e," has served its final hour."),"".concat(e," breaks, spent beyond recovery."),"Nothing remains of ".concat(e," but scattered fragments.")];return Yt(t)},Ro=e=>{let{topPanelHeight:t,tileSize:n}=e;const{gameState:r}=Jr(),{rows:a,cols:i}=(null===r||void 0===r?void 0:r.map.dimensions)||{rows:1,cols:1},o={width:window.innerWidth,height:window.innerHeight-t},l=[],{width:s,height:c}=((e,t)=>{const n=1.1547,r=e.cols+.5,a=(t.width-100)/r,i=e.rows+.25,o=(t.height-100)/i/n,l=Math.max(100,a,o);return{width:l,height:l*n}})({rows:a,cols:i},o);for(let u=0;u<a;u++){const e=[],t=u%2===0?i:i-1;for(let n=0;n<t;n++){const t={row:u,col:n},r=yt(t);e.push((0,$r.jsx)(Po,{mapPosition:t},r))}l.push((0,$r.jsx)("div",{className:ji,"data-testid":"hex-row",children:e},"row-".concat(u)))}return(0,$r.jsx)(ua,{screenPosition:{x:0,y:t},frameSize:{width:window.innerWidth,height:window.innerHeight-t},tileDimensions:n,accessible:!0,zIndex:90,children:(0,$r.jsx)("div",{id:"Battlefield","data-testid":"Battlefield",className:Di,style:{"--hex-tile-width":"".concat(s,"px"),"--hex-tile-height":"".concat(c,"px"),"--hex-row-margin":"".concat(.25*-c,"px"),"--hex-row-offset":"".concat(.5*s,"px")},children:(null===r||void 0===r?void 0:r.turnOwner)&&(0,$r.jsx)("div",{className:Li,children:l})})})},To="NewGameDialog_content__mqxVg",No="NewGameDialog_section__0F9d3",Oo="NewGameDialog_label__+KQWe",Do="NewGameDialog_dropdown__KUREs",Lo="NewGameDialog_checkboxContainer__Es9j1",Mo="NewGameDialog_customCheckbox__By4F7",Io="NewGameDialog_checked__RR-ZH",jo="NewGameDialog_hiddenCheckbox__VHNyG",zo="NewGameDialog_title__2VPiR",Ho="NewGameDialog_opponentSelectionContainer__fRSLh",Fo="NewGameDialog_opponentControlsSection__Yxu7y",Go="NewGameDialog_mapSizeLabel__2Mm+g",Bo="NewGameDialog_checkboxLabel__WNUw-",Wo="NewGameDialog_opponentAvatarsContainer__4sbYC",Uo="NewGameDialog_opponentAvatarContainer__Y6KRf",Vo="NewGameDialog_opponentAvatarContainer--manual__ANN9b",Ko="NewGameDialog_opponentAvatarContainer--random__QRTB-",qo="NewGameDialog_randomOpponentCircle__G6me6",Yo="PlayerSelection_section__-MGnB",Qo="PlayerSelection_label__z2WiS",$o="PlayerSelection_playerSelection__hsmBh",Xo="PlayerSelection_playerListContainer__3gX84",Zo="PlayerSelection_playerList__kpodQ",Jo="PlayerSelection_playerListItem__UPk0k",el="PlayerSelection_selected__vySP1",tl="PlayerSelection_playerSummary__hmJYC",nl="PlayerSelection_playerDetailsContainer__xmCH2",rl="PlayerSelection_playerDetails__PMWi9",al="PlayerSelection_playerDetailHeader__TD0XX",il="PlayerSelection_selectedPlayerName__evjb-",ol="PlayerSelection_selectedPlayerClass__1Mrrs",ll="PlayerSelection_selectedAvatarContainer__NBU0R",sl="PlayerSelection_selectedPlayerDescription__MPeFc",cl="PlayerSelection_playerName__SHjqr",ul="PlayerSelection_playerClass__mROwv",dl="PlayerSelection_playerLevel__rK94G",hl=t=>{let{label:n="Choose Your Character:",selectedPlayer:r,onPlayerChange:a,availablePlayers:i=nt}=t;const[o,l]=(0,e.useState)(null),s=o||r;return(0,$r.jsxs)("div",{className:Yo,children:[(0,$r.jsx)("label",{className:Qo,children:n}),(0,$r.jsxs)("div",{className:$o,children:[(0,$r.jsx)("div",{className:Xo,children:(0,$r.jsx)("div",{className:Zo,children:i.map(e=>(0,$r.jsxs)("div",{className:"".concat(Jo," playerListItem ").concat(r.id===e.id?"".concat(el," selected"):""),role:"button","aria-label":e.name,onClick:()=>a(e),onMouseEnter:()=>l(e),onMouseLeave:()=>l(null),children:[(0,$r.jsx)("div",{className:cl,children:e.name}),(0,$r.jsxs)("div",{className:tl,children:[(0,$r.jsx)("span",{className:ul,style:{color:Xi(e.alignment)},children:e.race.toUpperCase()}),(0,$r.jsxs)("span",{className:dl,children:["Level ",e.level]})]})]},e.id))})}),(0,$r.jsx)("div",{className:nl,children:(0,$r.jsxs)("div",{className:rl,children:[(0,$r.jsxs)("div",{className:al,children:[(0,$r.jsx)("h3",{className:il,children:s.name}),(0,$r.jsxs)("div",{className:ol,style:{color:Xi(s.alignment)},children:[s.alignment.toUpperCase()," - ",s.type," - Level ",s.level]})]}),(0,$r.jsxs)("div",{style:{display:"flex",gap:"20px",alignItems:"flex-start"},children:[(0,$r.jsx)(ki,{player:s,size:120,shape:"circle",borderColor:qt(s.color),className:ll}),(0,$r.jsx)("div",{className:sl,children:s.description})]})]})})]})]})},pl=e=>{const t=Object.values(e).filter(e=>e.type===A.NONE);if(0!==t.length)return Yt(t)},fl=(e,t)=>cn(e.dimensions,t,1).map(t=>e.lands[yt(t)]).filter(e=>e.type===A.NONE),ml=(e,t)=>{const n=fl(e,t);if(0!==n.length)return Yt(n)},gl=e=>{const t={};for(let n=0;n<e.rows;n++){const r=n%2===0?e.cols:e.cols-1;for(let e=0;e<r;e++){const r={row:n,col:e};t[yt(r)]={mapPos:r,type:A.NONE,goldPerTurn:0,buildings:[],effects:[],corrupted:!1}}}return t},yl=(e,t)=>{const n=Object.values(e.lands).filter(e=>Br().includes(e.type));let r=Object.keys(e.lands).filter(t=>!n.flatMap(t=>cn(e.dimensions,t.mapPos,4,!1)).map(e=>yt(e)).includes(t));0===r.length&&(r=Object.values(e.lands).filter(e=>e.type===A.NONE).map(e=>yt(e.mapPos)));const a=Yt(r);e.lands[a].type=t;const i=e.lands[a].mapPos,o=Math.min(6,Math.floor(4*Math.random())+2),l=cn(e.dimensions,i,1,!0).sort(()=>Math.random()-.5);for(let u=0;u<o&&u<l.length;u++)e.lands[yt(l[u])].type=Fr(t);const s=Object.values(e.lands).filter(e=>[t,Fr(t)].includes(e.type)).flatMap(t=>fl(e,t.mapPos)),c=Math.max(s.length/2,6);s.forEach((e,n)=>{e.type=(e=>{var t;return null!==(t=zr[e])&&void 0!==t?t:[]})(t)[n<c?0:1]})},vl=e=>{const t={dimensions:e,lands:gl(e)};Br().forEach(e=>yl(t,e));const n=Gr(),r=Math.floor(Object.keys(t.lands).length/n.length);return n.forEach(e=>{for(;Object.values(t.lands).filter(t=>t.type===e).length<r;){let n=pl(t.lands);if(null==n)break;t.lands[yt(n.mapPos)].type=e;for(let a=0;a<5&&Object.values(t.lands).filter(t=>t.type===e).length<r;a++){const r=ml(t,n.mapPos);if(null==r)break;const a=yt(r.mapPos);t.lands[a].type=e,n=t.lands[a]}}}),Object.values(t.lands).filter(e=>e.type===A.NONE).forEach(e=>e.type=A.DESERT),Object.values(t.lands).forEach(e=>{e.goldPerTurn=(e=>{const{min:t,max:n}=I(e);return Math.floor(Math.random()*(n-t+1))+t})(e.type)}),t},bl={small:{rows:6,cols:13},medium:{rows:9,cols:18},large:{rows:11,cols:23},huge:{rows:15,cols:31}},wl={small:2,medium:4,large:6,huge:7},Sl=()=>{const{setShowStartWindow:t,setProgressMessage:n,setShowProgressPopup:r,setGameStarted:a,showSelectOpponentDialogWithConfig:i}=na(),{startNewGame:o,gameState:l}=Jr(),[s,c]=(0,e.useState)("medium"),[u,d]=(0,e.useState)(nt[0]),[h,p]=(0,e.useState)("manual"),[m,g]=(0,e.useState)([]);(0,e.useEffectEvent)(()=>{if(0===m.length){const e=nt.filter(e=>e.id!==u.id),t=[u.color],n=Kt.filter(e=>!t.includes(e.name)).map(e=>e.name).slice(0,wl[s]),r=new Array(wl[s]).fill(null),a=[...e].sort(()=>.5-Math.random());for(let i=0;i<Math.min(2,wl[s],a.length);i++)r[i]=(0,f.A)((0,f.A)({},a[i]),{},{color:n[i]||a[i].color});g(r)}});const y=(0,e.useCallback)(()=>{const e=[u.color];return Kt.filter(t=>!e.includes(t.name)).map(e=>e.name).slice(0,wl[s])},[s,u.color]),v=(0,e.useCallback)(e=>{const t=nt.filter(e=>e.id!==u.id),n=[u.color],r=Kt.filter(e=>!n.includes(e.name)).map(e=>e.name).slice(0,e);if("random"===h){const n=[...t].sort(()=>.5-Math.random()),a=[];for(let t=0;t<e&&t<n.length;t++)a.push((0,f.A)((0,f.A)({},n[t]),{},{color:r[t]||n[t].color}));for(;a.length<e;){const e=t[Math.floor(Math.random()*t.length)];a.push((0,f.A)((0,f.A)({},e),{},{color:r[a.length]||e.color}))}g(a)}else{const n=new Array(e).fill(null),a=[...t].sort(()=>.5-Math.random());for(let t=0;t<Math.min(2,e,a.length);t++)n[t]=(0,f.A)((0,f.A)({},a[t]),{},{color:r[t]||a[t].color});g(n)}},[u.color,u.id,h,g]),b=(0,e.useCallback)(()=>{v(wl[s])},[v,s]),w=(0,e.useCallback)(e=>{c(e);v(wl[e])},[v]),S=(0,e.useCallback)(e=>{p(e),b()},[b,p]);(0,e.useEffect)(()=>{b()},[b,h]);const E=(0,e.useCallback)(e=>{d(e)},[d]),k=(0,e.useCallback)(e=>{const t=[u.id,...m.filter(e=>null!==e).map(e=>e.id)],n=m.filter(e=>null!==e).length;i(t,t=>{const n=[...m],r=y();n[e]=(0,f.A)((0,f.A)({},t),{},{color:r[e]||t.color}),g(n)},n>2)},[u.id,m,i,y,g]),x=(0,e.useCallback)(()=>{const e="random"===h?m.filter(e=>null!=e):m.filter(e=>null!=e).filter(e=>e.id!==tt.id);t(!1),n("Creating new game..."),r(!0),setTimeout(()=>{const t=(e=>({map:e,players:[],armies:[],turnOwner:tt.id,turn:1,turnPhase:Kr}))(vl(bl[s]));Nt(t,u,"human"),e.forEach(e=>Nt(t,e,"computer")),o(t),a(!0),r(!1)},100)},[s,u,h,m,t,n,r,o,a]),A=(0,e.useCallback)(()=>{t(!1)},[t]),C=(0,e.useMemo)(()=>{const e=Math.min(900,"undefined"!==typeof window?.9*window.innerWidth:900),t=Math.min(650,"undefined"!==typeof window?.75*window.innerHeight:650);return{dialogWidth:e,dialogHeight:t,dialogX:"undefined"!==typeof window?(window.innerWidth-e)/2:0,dialogY:"undefined"!==typeof window?(window.innerHeight-t)/2:0}},[]);return(0,$r.jsx)(ua,{screenPosition:{x:C.dialogX,y:C.dialogY},frameSize:{width:C.dialogWidth,height:C.dialogHeight},primaryButton:(0,$r.jsx)(va,{buttonName:ya.START,onClick:x}),secondaryButton:null!=l?(0,$r.jsx)(va,{buttonName:ya.CANCEL,onClick:A}):void 0,zIndex:1005,children:(0,$r.jsxs)("div",{className:To,children:[(0,$r.jsx)("h1",{className:zo,children:"Start New Game"}),(0,$r.jsx)(hl,{label:"Choose Your Character:",selectedPlayer:u,onPlayerChange:E}),(0,$r.jsxs)("div",{className:No,children:[(0,$r.jsxs)("label",{className:Oo,children:["Opponents (","random"===h?wl[s]:m.filter(e=>null!==e).length," ","of ",wl[s],"):"]}),(0,$r.jsxs)("div",{className:Ho,children:[(0,$r.jsxs)("div",{className:Fo,children:[(0,$r.jsxs)("div",{children:[(0,$r.jsx)("label",{className:"".concat(Oo," ").concat(Go),children:"Map Size:"}),(0,$r.jsxs)("select",{className:Do,value:s,onChange:e=>w(e.target.value),children:[(0,$r.jsx)("option",{value:"small",children:"Small"}),(0,$r.jsx)("option",{value:"medium",children:"Medium"}),(0,$r.jsx)("option",{value:"large",children:"Large"}),(0,$r.jsx)("option",{value:"huge",children:"Huge"})]})]}),(0,$r.jsx)("div",{children:(0,$r.jsxs)("label",{className:"".concat(Oo," ").concat(Lo," ").concat(Bo),children:[(0,$r.jsx)("input",{type:"checkbox",checked:"random"===h,onChange:e=>S(e.target.checked?"random":"manual"),className:jo}),(0,$r.jsx)("div",{className:"".concat(Mo," ").concat("random"===h?Io:"")}),"Random Opponents"]})})]}),(0,$r.jsx)("div",{className:Wo,children:m.map((e,t)=>{var n;return(0,$r.jsx)("div",{onClick:()=>"manual"===h&&k(t),className:"".concat(Uo," ").concat("manual"===h?Vo:Ko),onMouseEnter:e=>{"manual"===h&&(e.currentTarget.style.transform="scale(1.05)")},onMouseLeave:e=>{"manual"===h&&(e.currentTarget.style.transform="scale(1)")},children:e?"random"===h?(0,$r.jsx)("div",{className:qo,style:{background:(null===(n=Kt.find(t=>t.name===e.color))||void 0===n?void 0:n.value)||"#8b7355"}}):(0,$r.jsx)(ki,{player:e,size:54,shape:"circle",borderColor:qt(e.color)}):(0,$r.jsx)(ki,{player:tt,size:54,shape:"circle",borderColor:"#8b7355"})},t)})})]})]})]})})},El="SaveGameDialog_container__JnRoi",kl="SaveGameDialog_title__zTHql",xl="SaveGameDialog_inputSection__mHi16",Al="SaveGameDialog_inputLabel__1XaDO",Cl="SaveGameDialog_saveInput__UKpOv",Pl="SaveGameDialog_helperText__786ym",_l=()=>{const{showSaveDialog:e,setShowSaveDialog:t,saveGameName:n,setSaveGameName:r,resetSaveGameDialog:a}=na();if(!e)return null;const i=()=>{n.trim()?(console.log("Saving game with name:",n.trim()),t(!1),a()):alert("Please enter a save name")},o=(window.innerWidth-730)/2,l=(window.innerHeight-500)/2;return(0,$r.jsx)("div",{"data-testid":"SaveGameDialog",children:(0,$r.jsx)(ua,{screenPosition:{x:o,y:l},frameSize:{width:730,height:500},primaryButton:(0,$r.jsx)(va,{buttonName:ya.SAVE,onClick:i}),secondaryButton:(0,$r.jsx)(va,{buttonName:ya.CANCEL,onClick:()=>{t(!1),a()}}),children:(0,$r.jsxs)("div",{className:El,children:[(0,$r.jsx)("h2",{className:kl,children:"Save Game"}),(0,$r.jsxs)("div",{className:xl,children:[(0,$r.jsx)("label",{htmlFor:"saveName",className:Al,children:"Enter save name:"}),(0,$r.jsx)("input",{id:"saveName",type:"text",value:n,onChange:e=>r(e.target.value),onKeyPress:e=>"Enter"===e.key&&i(),className:Cl,placeholder:"My Game Save",autoFocus:!0})]}),(0,$r.jsx)("div",{className:Pl,children:"Your game progress will be saved and can be loaded later."})]})})})};var Rl=n(4027);const Tl=e.forwardRef((t,n)=>{const r=(0,e.useRef)(null),a=(0,e.useRef)([]),i=(0,e.useRef)(),[o,l]=(0,e.useState)([]);(0,e.useImperativeHandle)(n,()=>({pageFlip:()=>i.current}));const s=(0,e.useCallback)(()=>{i.current&&i.current.clear()},[]),c=(0,e.useCallback)(()=>{const e=i.current;e&&(e.off("flip"),e.off("changeOrientation"),e.off("changeState"),e.off("init"),e.off("update"))},[]);return(0,e.useEffect)(()=>{if(a.current=[],t.children){const n=e.Children.map(t.children,t=>e.cloneElement(t,{ref:e=>{e&&a.current.push(e)}}));t.renderOnlyPageLengthChange&&o.length===n.length||(n.length<o.length&&s(),l(n))}},[t.children]),(0,e.useEffect)(()=>{o.length>0&&a.current.length>0&&(c(),r.current&&!i.current&&(i.current=new Rl.PageFlip(r.current,t)),i.current.getFlipController()?i.current.updateFromHtml(a.current):i.current.loadFromHTML(a.current),(()=>{const e=i.current;e&&(t.onFlip&&e.on("flip",e=>t.onFlip(e)),t.onChangeOrientation&&e.on("changeOrientation",e=>t.onChangeOrientation(e)),t.onChangeState&&e.on("changeState",e=>t.onChangeState(e)),t.onInit&&e.on("init",e=>t.onInit(e)),t.onUpdate&&e.on("update",e=>t.onUpdate(e)))})())},[o]),e.createElement("div",{ref:r,className:t.className,style:t.style},o)}),Nl=e.memo(Tl),Ol={flipbookContainer:"FlipBook_flipbookContainer__CWdoq",flipbook:"FlipBook_flipbook__0nG41"},Dl=e=>{let{width:t=333,height:n=429,children:r,className:a=Ol.flipbook,style:i={},minWidth:o,minHeight:l,maxWidth:s=860,maxHeight:c,maxShadowOpacity:u=0,showCover:d=!1,mobileScrollSupport:h=!0,startPage:p=0,drawShadow:f=!1,flippingTime:m=1e3,usePortrait:g=!1,startZIndex:y=1e3,autoSize:v=!1,clickEventForward:b=!0,useMouseEvents:w=!0,swipeDistance:S=30,showPageCorners:E=!0,disableFlipByClick:k=!1,size:x="fixed",onClickOutside:A}=e;return(0,$r.jsx)($r.Fragment,{children:(0,$r.jsx)("div",{"data-testid":"flipbook-backdrop",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:y-1,display:"flex",alignItems:"center",justifyContent:"center"},onClick:e=>{e.target===e.currentTarget&&A&&A()},children:(0,$r.jsx)("div",{"data-testid":"flipbook-container",className:Ol.flipbookContainer,onClick:e=>e.stopPropagation(),children:(0,$r.jsx)(Nl,{width:t,height:n,size:x,minWidth:o||t,minHeight:l||n,maxWidth:s||t,maxHeight:c||n,maxShadowOpacity:u,showCover:d,mobileScrollSupport:h,startPage:p,drawShadow:f,flippingTime:m,usePortrait:g,startZIndex:y,autoSize:v,clickEventForward:b,useMouseEvents:w,swipeDistance:S,showPageCorners:E,disableFlipByClick:k,className:a,style:i,children:r})})})})},Ll="FlipBookPage_caption__ek5qF",Ml="FlipBookPage_imageSlotContainer__hVAfC",Il="FlipBookPage_icon__nMi19",jl="FlipBookPage_slotsContainer__ggyny",zl="FlipBookPage_slotsScrollable__LWUuI",Hl="FlipBookPage_slotsVisible__8-LG6",Fl="FlipBookPage_slot__MJKX2",Gl="FlipBookPage_description__4q+DD",Bl="FlipBookPage_descriptionTitle__faZ-M",Wl="FlipBookPage_descriptionText__DlOTE",Ul="FlipBookPage_descriptionTextExpanded__tZrmG",Vl="FlipBookPage_costSection__GUrCB",Kl="FlipBookPage_costTitle__SrHuf",ql="FlipBookPage_pageNumber__CzEKO",Yl="FlipBookPage_costValue__Qlr-Y",Ql="FlipBookPage_pageStyle__H0mqf",$l="FlipBookPage_evenPage__Jj7em",Xl="FlipBookPage_oddPage__qjK9N";function Zl(e){if(e<=0)return"";const t=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"];let r="";for(let a=0;a<t.length;a++)for(;e>=t[a];)r+=n[a],e-=t[a];return r}const Jl="Spell",es="Item",ts="Building",ns=e.forwardRef((t,n)=>{let{pageNum:r,lorePage:a,header:i,iconPath:o,description:l,cost:s,costLabel:c="Cost",maintainCost:u,children:d,className:h,style:p,onClose:f,slots:m,onSlotClick:g,onIconClick:y,usedSlots:v}=t;const b=v||new Set,w=(null===m||void 0===m?void 0:m.filter(e=>!b.has(e.id)))||[];(0,e.useEffect)(()=>{m&&m.length>0&&b.size===m.length&&f&&f()},[m,b.size,f,y]);const S=(0,e.useCallback)((e,t)=>{e.stopPropagation(),g&&g(t)},[g]),E=r%2===1?$l:Xl,k=h?"".concat(E," ").concat(h):E;return(0,$r.jsx)("div",{"data-testid":"flipbook-page-"+i,className:"".concat(Ql," ").concat(k),ref:n,style:p,children:d||(0,$r.jsxs)($r.Fragment,{children:[(0,$r.jsx)("div",{className:Ll,children:i}),(0,$r.jsxs)("div",{className:Ml,children:[(0,$r.jsx)("img",{"data-testid":"flipbook-icon",src:o,alt:i,className:"".concat(Il," clickable-icon"),onClick:e=>{e.stopPropagation(),y&&y(w)},onMouseEnter:y?e=>{e.currentTarget.style.filter="brightness(1.2) drop-shadow(0 0 8px rgba(255, 215, 0, 0.6))",e.currentTarget.style.transform="scale(1.05)"}:void 0,onMouseLeave:y?e=>{e.currentTarget.style.filter="brightness(1)",e.currentTarget.style.transform="scale(1)"}:void 0,onError:e=>{e.currentTarget.style.display="none"}}),g&&w&&w.length>0&&(0,$r.jsx)("div",{"data-testid":"flipbook-slots",className:"".concat(jl," ").concat(w.length>3?zl:Hl),children:w.map(e=>(0,$r.jsx)("div",{"data-testid":"flipbook-slot-"+e.id,onClick:t=>S(t,e),onMouseDown:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation(),className:Fl,children:(0,$r.jsx)("span",{className:Wl,children:e.name})},e.id))})]}),(0,$r.jsxs)("div",{className:Gl,children:[(0,$r.jsx)("h4",{className:Bl,children:"Description:"}),(0,$r.jsx)("p",{"data-testid":"flipbook-description-text",className:null==u?Ul:Wl,children:l}),(0,$r.jsx)("br",{}),c&&null!=s&&s>=0&&(0,$r.jsx)("div",{className:Vl,children:(0,$r.jsxs)("h4",{className:Kl,children:[c,": ",(0,$r.jsx)("span",{className:Yl,children:s})]})}),null!=u&&u>=0&&(0,$r.jsx)("div",{className:Vl,children:(0,$r.jsxs)("h4",{className:Kl,children:["Maintain Cost: ",(0,$r.jsx)("span",{className:Yl,children:u})]})})]}),(0,$r.jsxs)("h4",{className:ql,"data-testid":"flipbook-page-number-"+r,children:["- ",Zl(a+r)," -"]})]})})}),rs=n.p+"static/media/blessing.fa33dd9719ac65d20285.png",as=n.p+"static/media/heal.98c05b2155127ce2dda7.png",is=n.p+"static/media/turn-undead.e4530239051f374bb15e.png",os=n.p+"static/media/view.87c989d47f940607d4b4.png",ls=n.p+"static/media/illusion.cce9f7949be7fe9e8b14.png",ss=n.p+"static/media/teleport.9d43cc2aa2bcbfb28c35.png",cs=n.p+"static/media/tornado.c520175ae5d4f8a5d548.png",us=n.p+"static/media/arcane-exchange.868bf0f1a7ddc6785820.png",ds=n.p+"static/media/fertile-lands.6f44c207024df0e10489.png",hs=n.p+"static/media/entangled-roots.08da1a8ace6f9f7874c6.png",ps=n.p+"static/media/beast-attack.42098b40bebee50cd447.png",fs=n.p+"static/media/earthquake.052dec20ff0979a55083.png",ms=n.p+"static/media/ember-raid.abeeb7bb7413d8679031.png",gs=n.p+"static/media/forge-of-war.3783537da41baafd1bb2.png",ys=n.p+"static/media/firestorm.4e5fe5c4d4dae980aa21.png",vs=n.p+"static/media/meteor-shower.e11e70a58b3d17bf0a80.png",bs=n.p+"static/media/summon-undead.3f911b70642e8b005e89.png",ws=n.p+"static/media/raise-dead-hero.dfb1671dafbd3adb616d.png",Ss=n.p+"static/media/plague.ba14cb2250f39cfc8dbc.png",Es=n.p+"static/media/corruption.1079c0ca9541fc57f577.png",ks=n.p+"static/media/white-end.32c4ca6494e12e4a1d54.png",xs=n.p+"static/media/black-end.dbdc5a450f592169fd9d.png",As=n.p+"static/media/green-end.cb5075f38ddf9dc79aee.png",Cs=n.p+"static/media/red-end.188bee9a153566f9222d.png",Ps=n.p+"static/media/blue-end.4aeb75ab6889a7c1cc91.png",_s={[$t.BLESSING]:rs,[$t.HEAL]:as,[$t.TURN_UNDEAD]:is,[$t.VIEW_TERRITORY]:os,[$t.FERTILE_LAND]:ds,[$t.ENTANGLING_ROOTS]:hs,[$t.BEAST_ATTACK]:ps,[$t.EARTHQUAKE]:fs,[$t.ILLUSION]:ls,[$t.TELEPORT]:ss,[$t.TORNADO]:cs,[$t.EXCHANGE]:us,[$t.EMBER_RAID]:ms,[$t.FORGE_OF_WAR]:gs,[$t.FIRESTORM]:ys,[$t.METEOR_SHOWER]:vs,[$t.SUMMON_UNDEAD]:bs,[$t.RAISE_DEAD_HERO]:ws,[$t.PLAGUE]:Ss,[$t.CORRUPTION]:Es},Rs={[ae.WHITE]:ks,[ae.GREEN]:As,[ae.BLUE]:Ps,[ae.RED]:Cs,[ae.BLACK]:xs},Ts=e=>_s[e.type],Ns=()=>{const{showCastSpellDialog:t,setShowCastSpellDialog:n,setSelectedLandAction:r,addGlowingTile:a,setIsArcaneExchangeMode:i}=na(),{gameState:o}=Jr(),l=(0,e.useCallback)(()=>{n(!1)},[n]),s=(0,e.useCallback)(()=>{n(!1),i(!1)},[n,i]),c=(0,e.useCallback)(e=>()=>{r("".concat(Jl,": ").concat(e));const t=Fa(e);e===$t.EXCHANGE?i(!0):Ua(o,t.type).forEach(e=>{a(e)}),l()},[o,r,a,l,i]);if(!t||null==o)return null;const u=ct(o),d=u.mana,h=u.mana.white>0&&o.players.some(e=>e.id!==o.turnOwner&&!dt(e,$t.TURN_UNDEAD)),p=d?Sa.filter(e=>e.manaCost<=d[e.manaType]&&(e.type!==$t.TURN_UNDEAD||h)):[];return p.length>0?(0,$r.jsx)(Dl,{onClickOutside:s,children:p.map((e,t)=>(0,$r.jsx)(ns,{pageNum:t,lorePage:1027,header:e.type,iconPath:Ts(e),description:e.description,cost:e.manaCost,costLabel:"Mana Cost",onClose:s,onIconClick:c(e.type)},e.type))}):null},Os=n.p+"static/media/turn-undead.3c9ca5b150ec9e13888f.png",Ds=n.p+"static/media/orb-of-storm.71d3509be18e4345da97.png",Ls=n.p+"static/media/seed-of-renewal.3109d5bba0f7172f3745.png",Ms=n.p+"static/media/aegis-shard.c6d1671f62cf441ad1e6.png",Is=n.p+"static/media/phoenix-feather.0a9c7b06ec61f4f10648.png",js=n.p+"static/media/glyph-of-severance.6937e33ecc5174980910.png",zs=n.p+"static/media/compass-of-dominion.d7d65dae82a0eeefeb06.png",Hs=n.p+"static/media/deed-of-reclamation.a4b75372345063df67fc.png",Fs=n.p+"static/media/mercy-of-orrivane.2d1db6572fa6cd6b1a43.png",Gs=n.p+"static/media/hourglass-of-delay.5661a992f4ce7b9eea56.png",Bs=n.p+"static/media/mirror-of-illusion.ef5a391442041cf80aeb.png",Ws=n.p+"static/media/banner-of-unity.c301778fbf70a4733bd4.png",Us=n.p+"static/media/heartstone-of-orrivane.d1926976495e9470c8c4.png",Vs=n.p+"static/media/shard-of-silent-avil.bc629cff7c5ea3c0e7f3.png",Ks=n.p+"static/media/crown-of-dominion.4a0d1b1a472d769b5d38.png",qs=n.p+"static/media/scepter-of-tempests.21655d5fd41dd97d8fb4.png",Ys=n.p+"static/media/obsidian-chalice.b350056793c386e31b4f.png",Qs=n.p+"static/media/verdant-idol.0b9f5d0c9c6b5b05c358.png",$s=n.p+"static/media/starwell-prism.e3b03b0ed060df8f16bb.png",Xs={[be]:Os,[we]:Ds,[Se]:Ls,[Ee]:Ms,[ke]:Is,[xe]:js,[Ae]:zs,[Ce]:Hs,[Pe]:Fs,[_e]:Gs,[Re]:Bs,[Te]:Ws,[Ne]:Us,[Oe]:Vs,[De]:Ks,[Le]:qs,[Me]:Ys,[Ie]:Qs,[je]:$s},Zs=e=>Xs[e.treasure.type],Js=()=>{const{showEmpireTreasureDialog:t,setShowEmpireTreasureDialog:n,setSelectedLandAction:r,addGlowingTile:a}=na(),i=(0,e.useCallback)(()=>{n(!1)},[n]),{gameState:o}=Jr(),l=(0,e.useCallback)(e=>()=>{r("".concat(es,": ").concat(e.id)),Ua(o,e.treasure.type).forEach(e=>{a(e)}),i()},[o,r,a,i]);if(!t||null==o)return null;const s=ct(o).empireTreasures.sort((e,t)=>Number(!$e(e))-Number(!$e(t)));return 0===s.length?null:(0,$r.jsx)(Dl,{onClickOutside:i,children:null===s||void 0===s?void 0:s.map((e,t)=>(0,$r.jsx)(ns,{pageNum:t,lorePage:913,header:e.treasure.type,iconPath:Zs(e),description:e.treasure.description,onClose:i,onIconClick:$e(e)&&e.treasure.isConsumable?l(e):void 0},e.treasure.type))})},ec=(e,t)=>{const{turnOwner:n}=e,r=rn(e,n);switch(t){case z.WALL:return r.filter(t=>(0===t.buildings.length||!nn(t,z.WALL))&&cn(Hn(e),t.mapPos,1,!0).some(t=>Zt(e,t)!==n)).map(e=>yt(e.mapPos));case z.STRONGHOLD:const t=e.players.flatMap(t=>rn(e,t.id).filter(e=>nn(e,z.STRONGHOLD))).flatMap(t=>cn(Hn(e),t.mapPos,1,!1).map(e=>yt(e)));return r.filter(e=>!t.includes(yt(e.mapPos))).map(e=>yt(e.mapPos));case z.DEMOLITION:return r.filter(e=>e.buildings.length>0).map(e=>yt(e.mapPos));default:return r.filter(e=>0===e.buildings.length||1===e.buildings.length&&nn(e,z.WALL)).map(e=>yt(e.mapPos))}},tc=n.p+"static/media/stronghold.8cb171bb15d7feea8144.png",nc=n.p+"static/media/barracks.f86079d41f568bd610a5.png",rc=n.p+"static/media/magic-tower.9b3c29d498f374b38c0f.png",ac=n.p+"static/media/watchtower.01657d8069800b12ece9.png",ic=n.p+"static/media/outpost.0366fa6ade6238faf9de.png",oc=n.p+"static/media/wall.745f192762ad2d7d5dc5.png",lc=n.p+"static/media/demolish.67037f98c240acd6e800.png",sc={[z.STRONGHOLD]:tc,[z.BARRACKS]:nc,[z.MAGE_TOWER]:rc,[z.OUTPOST]:ic,[z.WATCH_TOWER]:ac,[z.WALL]:oc,[z.DEMOLITION]:lc},cc=e=>sc[e],uc=()=>{const{showConstructBuildingDialog:t,setShowConstructBuildingDialog:n,setSelectedLandAction:r,addGlowingTile:a}=na(),{gameState:i}=Jr(),o=(0,e.useCallback)(()=>{n(!1)},[n]),l=(0,e.useCallback)(e=>()=>{r("".concat(ts,": ").concat(e));const t=ct(i);ec(i,e).forEach(e=>{(t.playerProfile.doctrine!==re||Vt(i,(e=>{const[t,n]=e.split("-").map(Number);return{row:t,col:n}})(e)))&&a(e)}),o()},[i,r,a,o]);if(!t||null==i)return null;const s=ct(i);if(0===rn(i).filter(e=>0===e.buildings.length).length&&0===ec(i,z.BARRACKS).length&&0===ec(i,z.WALL).length)return null;const c=ec(i,z.STRONGHOLD).length>0,u=ft(s).filter(e=>(e.type!==z.STRONGHOLD||c)&&(e.type!==z.BARRACKS||s.playerProfile.doctrine!==ne));return 0===u.length?null:(0,$r.jsx)(Dl,{onClickOutside:o,children:u.map((e,t)=>(0,$r.jsx)(ns,{pageNum:t,lorePage:2351,header:e.type,iconPath:cc(e.type),description:e.description,cost:e.buildCost,costLabel:"Build Cost",maintainCost:e.maintainCost,onClose:o,onIconClick:l(e.type)},e.type))})},dc=(e,t,n)=>{if(Zt(e,t)!==e.turnOwner)return;if(ut(e,re)&&(!x(n)||E(n)&&!Vt(e,t)))return;const r=Xt(e,t),a=ct(e),i=r.buildings.find(e=>Je(e,n,a.traits.recruitmentSlots[e.type])&&mt(a,r,e).includes(n));if(i){const a=ct(e),o=a.vault,l=U(n,r.type);if(o>=l.recruitCost){let o=e;const s=ht(a,De)?Math.ceil(.85*l.recruitCost):l.recruitCost,c=tn(r,$t.EMBER_RAID);o=wt(o,a.id,-s),o=((e,t,n,r,a)=>_t(e,t,t=>{if(t.id!==n.id)return t;const i=ct(e).traits.recruitmentSlots[n.type],o=t.slots.findIndex((e,t)=>{var n;return!e.isOccupied&&i&&(null===(n=i[t])||void 0===n?void 0:n.has(r))});if(-1===o)return t;const l=t.slots.map((e,t)=>t===o?{isOccupied:!0,unit:r,turnsRemaining:a}:e);return(0,f.A)((0,f.A)({},t),{},{slots:l})}))(o,t,i,n,l.recruitTime+(c?1:0)+(r.corrupted?1:0)),Object.assign(e,o)}}},hc=n.p+"static/media/ward-hands.2b224a9b90f7405555d9.png",pc=n.p+"static/media/warrior.9eb22cecb24f2c90be9a.png",fc=n.p+"static/media/dwarf.202e7d30d4e7f6ec1157.png",mc=n.p+"static/media/halflings.ea1f7845b74e7226e5ea.png",gc=n.p+"static/media/elf.b219593c4c6fe19f00c9.png",yc=n.p+"static/media/dark-elf.0b12a9ab5ba4d675d7a5.png",vc=n.p+"static/media/orc.7f76999ad74f2605f6ac.png",bc=n.p+"static/media/undead.a99de6154e015235f72a.png",wc=n.p+"static/media/elf.a55d91e09287ff17f29c.png",Sc=n.p+"static/media/orc.c77ac16dfafc67d9d69b.png",Ec=n.p+"static/media/warrior.e8928b9b9bf2bac0c4cd.png",kc=n.p+"static/media/dwarf.8f8886994b77ee59e568.png",xc=n.p+"static/media/fighter.3d8ca2b38ed4b42ffbba.png",Ac=n.p+"static/media/ogr.a28ac9f761ba523f0c32.png",Cc=n.p+"static/media/hammer-lord.48354ef4be681ec47e3d.png",Pc=n.p+"static/media/ranger.ae6f203dabf5dc175b95.png",_c=n.p+"static/media/golem.ab0bf53a31312f599d78.png",Rc=n.p+"static/media/gargoyle.8824f03a04de3ab06ad9.png",Tc=n.p+"static/media/dendrite.fa3ba585405060e45b86.png",Nc=n.p+"static/media/ballista.4e9af8fd8c18edf004b9.png",Oc=n.p+"static/media/catapult.220c4e9e2e003253e304.png",Dc=n.p+"static/media/battering-ram.28aa43c1175241cd5a18.png",Lc=n.p+"static/media/siege-tower.fb6f220e3105478935d8.png",Mc=n.p+"static/media/warsmith.eeb3f73bfbc85c1b8217.png",Ic=n.p+"static/media/fighter.5f745e0e16fe06b67c67.png",jc=n.p+"static/media/hammerlord.e4a2f875f35c50c27acb.png",zc=n.p+"static/media/ranger.de2064e008d5f616bd08.png",Hc=n.p+"static/media/shadowblade.5cbba8d688f9f1656e86.png",Fc=n.p+"static/media/ogr.e169617b5e8c19569f8a.png",Gc=n.p+"static/media/cleric.a2d54ef753af52a87e34.png",Bc=n.p+"static/media/druid.286013edc794808fcdd3.png",Wc=n.p+"static/media/enchanter.371e47bd348b9fd0b04f.png",Uc=n.p+"static/media/pyromancer.050674fe651fd200b5f4.png",Vc=n.p+"static/media/necromancer.39763fd46c5821f176ff.png",Kc={[g.WARD_HANDS]:hc,[g.WARRIOR]:pc,[g.DWARF]:fc,[g.HALFLING]:mc,[g.ELF]:gc,[g.DARK_ELF]:yc,[g.UNDEAD]:bc,[g.ORC]:vc,[g.GOLEM]:_c,[g.GARGOYLE]:Rc,[g.DENDRITE]:Tc,[y.BALLISTA]:Nc,[y.CATAPULT]:Oc,[y.BATTERING_RAM]:Dc,[y.SIEGE_TOWER]:Lc,[v.WARSMITH]:Mc,[v.FIGHTER]:Ic,[v.HAMMER_LORD]:jc,[v.RANGER]:zc,[v.SHADOW_BLADE]:Hc,[v.OGR]:Fc,[v.CLERIC]:Gc,[v.DRUID]:Bc,[v.ENCHANTER]:Wc,[v.PYROMANCER]:Uc,[v.NECROMANCER]:Vc},qc={[g.WARRIOR]:Ec,[g.ELF]:wc,[g.DARK_ELF]:wc,[g.ORC]:Sc,[g.DWARF]:kc,[y.BALLISTA]:Nc,[y.CATAPULT]:Oc,[y.BATTERING_RAM]:Dc,[y.SIEGE_TOWER]:Lc,[v.FIGHTER]:xc,[v.OGR]:Ac,[v.RANGER]:Pc,[v.SHADOW_BLADE]:Pc,[v.HAMMER_LORD]:Cc},Yc=(e,t)=>t===te?qc[e]:Kc[e],Qc=e=>e.type===g.WARD_HANDS?0:S(e.type)?2:w(e.type)?3:1,$c=()=>{const{showRecruitArmyDialog:t,setShowRecruitArmyDialog:n,actionLandPosition:r,setActionLandPosition:a,setSelectedLandAction:i,selectedLandAction:o}=na(),{gameState:l}=Jr(),[s,c]=(0,e.useState)(new Set),u=(0,e.useMemo)(()=>{if(!l||!r)return 0;const e=Xt(l,r).buildings.find(e=>Ze(e));return et(e)},[l,r]),d=(0,e.useCallback)(()=>{n(!1),c(new Set),a(void 0),"Recruit"===o&&i(null)},[n,a,i,o]);(0,e.useEffect)(()=>{if(!l||!t||!r)return;!Xt(l,r).buildings.find(e=>Ze(e))&&t&&d()},[l,t,r,d]);const h=(0,e.useCallback)((e,t)=>n=>{dc(l,t,e),c(e=>new Set(e).add(n.id))},[l]),p=(0,e.useCallback)((e,t)=>n=>{const r=Xt(l,t).buildings.find(e=>Ze(e)).id,a=Jt(Xt(l,t),r),i=et(a);for(let c=0;c<i;c++)dc(l,t,e);const o=Jt(Xt(l,t),r),s=i-et(o);c(e=>{const t=new Set(e);for(let r=0;r<s;r++)n&&null!=n[r]&&t.add(n[r].id);return t})},[l]);if(!l||!t||!r)return null;if(0===u)return n(!1),null;const f=Xt(l,r),m=f.buildings.find(e=>Ze(e));if(!m)return null;const g=ct(l),y=mt(g,f,m).filter(e=>g.playerProfile.doctrine!==re||Vt(l,f.mapPos)||w(e)).map(e=>(e=>{const t=U(e);return{type:e,recruitCost:t.recruitCost,description:t.description}})(e)).sort((e,t)=>Qc(e)-Qc(t)),v=[];for(let e=0;e<u;e++)v.push({id:"buildSlot".concat(e+1),name:"Available"});return(0,$r.jsx)(Dl,{onClickOutside:d,children:y.map((e,t)=>{return(0,$r.jsx)(ns,{pageNum:t,lorePage:617,header:(n=e.type,!S(n)&&ut(l,te)?"".concat(n," Nullwarden"):n),iconPath:Yc(e.type,g.playerProfile.doctrine),description:e.description,cost:e.recruitCost,onClose:d,slots:v,onSlotClick:h(e.type,r),onIconClick:p(e.type,r),usedSlots:s},e.type);var n})})},Xc="MoveArmyDialog_container__aT9bw",Zc="MoveArmyDialog_title__NzU8r",Jc="MoveArmyDialog_mainContent__8zyQa",eu="MoveArmyDialog_panel__yLcqZ",tu="MoveArmyDialog_panelTitle__Ne9pX",nu="MoveArmyDialog_panelContent__zcMPW",ru="MoveArmyDialog_emptyMessage__4uV97",au="MoveArmyDialog_transferButtons__FYZdn",iu="MoveArmyDialog_transferButton__8hN9q",ou="MoveArmyDialog_unitItem__Ot2dt",lu="MoveArmyDialog_unitName__Bwp0j",su="MoveArmyDialog_unitDetails__gn8kY",cu="MoveArmyDialog_heroUnit__czBsI",uu="MoveArmyDialog_regularUnit__SDJ0x",du="MoveArmyDialog_veteranUnit__q-bhH",hu="MoveArmyDialog_eliteUnit__VavfD",pu="MoveArmyDialog_warMachineUnit__ZcQBb",fu=e=>{const t=[...e.heroes],n=[];e.regulars.forEach(e=>{const t=n.findIndex(t=>t.id===e.id&&t.rank===e.rank);-1!==t?n[t]=(0,f.A)((0,f.A)({},n[t]),{},{count:n[t].count+e.count}):n.push((0,f.A)({},e))});const r=[];return e.warMachines.forEach(e=>{const t=r.findIndex(t=>t.type===e.type);-1!==t?r[t]=(0,f.A)((0,f.A)({},r[t]),{},{count:r[t].count+e.count}):r.push((0,f.A)({},e))}),{heroes:t,regulars:n,warMachines:r}},mu=()=>{const{setMoveArmyPath:t,moveArmyPath:n,showEmpireEvents:r}=na(),{gameState:a,updateGameState:i}=Jr(),o=(0,e.useRef)(void 0),l=(0,e.useRef)(void 0),[,s]=(0,e.useState)({}),c=()=>s(Math.random()),u=(0,e.useRef)(null);(0,e.useEffect)(()=>{if(!n||!a)return o.current=void 0,l.current=void 0,void c();const e=Ft(a,n.from).filter(e=>!zt(e));if(null==e||0===e.length)return o.current=void 0,l.current=void 0,void c();o.current={heroes:e.flatMap(e=>jt(e).heroes),regulars:e.flatMap(e=>jt(e).regulars),warMachines:e.flatMap(e=>jt(e).warMachines)},l.current=void 0,c()},[n,a]);const d=o.current,h=l.current,p=e=>{o.current=e,c()},m=e=>{l.current=e,c()};if((0,e.useEffect)(()=>()=>{u.current&&clearInterval(u.current)},[]),!n||!a)return null;const g=Ft(a,n.from).filter(e=>!zt(e));if(null==g||0===g.length)return null;const y=e=>{var t,n,r,a,i,o;const l={heroes:[...null!==(t=null===h||void 0===h?void 0:h.heroes)&&void 0!==t?t:[],...null!==(n=null===d||void 0===d?void 0:d.heroes)&&void 0!==n?n:[]],regulars:[...null!==(r=null===h||void 0===h?void 0:h.regulars)&&void 0!==r?r:[],...null!==(a=null===d||void 0===d?void 0:d.regulars)&&void 0!==a?a:[]],warMachines:[...null!==(i=null===h||void 0===h?void 0:h.warMachines)&&void 0!==i?i:[],...null!==(o=null===d||void 0===d?void 0:d.warMachines)&&void 0!==o?o:[]]},s=fu(l);m("right"===e?s:void 0),p("right"===e?void 0:s)},v=e=>{var t,n,r,a,i,o;const l="right"===e?d:h,s="right"===e?h:d,c={heroes:[...null!==(t=null===l||void 0===l?void 0:l.heroes)&&void 0!==t?t:[]],regulars:[],warMachines:[]},u={heroes:[],regulars:[],warMachines:[]};null===l||void 0===l||null===(n=l.regulars)||void 0===n||n.forEach(e=>{const t=Math.ceil(e.count/2);t===e.count?c.regulars.push(e):(c.regulars.push((0,f.A)((0,f.A)({},e),{},{count:t})),u.regulars.push((0,f.A)((0,f.A)({},e),{},{count:e.count-t})))}),null===l||void 0===l||null===(r=l.warMachines)||void 0===r||r.forEach(e=>{const t=Math.ceil(e.count/2);t===e.count?c.warMachines.push(e):(c.warMachines.push((0,f.A)((0,f.A)({},e),{},{count:t})),u.warMachines.push((0,f.A)((0,f.A)({},e),{},{count:e.count-t})))});const g={heroes:[...null!==(a=null===s||void 0===s?void 0:s.heroes)&&void 0!==a?a:[],...c.heroes],regulars:[...null!==(i=null===s||void 0===s?void 0:s.regulars)&&void 0!==i?i:[],...c.regulars],warMachines:[...null!==(o=null===s||void 0===s?void 0:s.warMachines)&&void 0!==o?o:[],...c.warMachines]},y=fu(g),v=fu(u);"right"===e?(p(v),m(y)):(m(v),p(y))},b=(e,t,n,r,a)=>{if("hero"===r){const r=e.heroes[n];if(!r)return;const i=e.heroes.filter((e,t)=>t!==n),o=[...t.heroes,r],l=(0,f.A)((0,f.A)({},e),{},{heroes:i}),s=(0,f.A)((0,f.A)({},t),{},{heroes:o});"right"===a?(p(l),m(s)):(m(l),p(s))}else if("regular"===r){const r=e.regulars[n];if(!r)return;let i;i=1===r.count?e.regulars.filter((e,t)=>t!==n):e.regulars.map((e,t)=>t===n?(0,f.A)((0,f.A)({},e),{},{count:e.count-1}):e);const o=t.regulars.findIndex(e=>e.id===r.id&&e.rank===r.rank);let l;l=o>=0?t.regulars.map((e,t)=>t===o?(0,f.A)((0,f.A)({},e),{},{count:e.count+1}):e):[...t.regulars,(0,f.A)((0,f.A)({},r),{},{count:1})];const s=(0,f.A)((0,f.A)({},e),{},{regulars:i}),c=(0,f.A)((0,f.A)({},t),{},{regulars:l});"right"===a?(p(s),m(c)):(m(s),p(c))}else if("warMachine"===r){const r=e.warMachines[n];if(!r)return;let i;i=1===r.count?e.warMachines.filter((e,t)=>t!==n):e.warMachines.map((e,t)=>t===n?(0,f.A)((0,f.A)({},e),{},{count:e.count-1}):e);const o=t.warMachines.findIndex(e=>e.type===r.type);let l;l=o>=0?t.warMachines.map((e,t)=>t===o?(0,f.A)((0,f.A)({},e),{},{count:e.count+1}):e):[...t.warMachines,(0,f.A)((0,f.A)({},r),{},{count:1})];const s=(0,f.A)((0,f.A)({},e),{},{warMachines:i}),c=(0,f.A)((0,f.A)({},t),{},{warMachines:l});"right"===a?(p(s),m(c)):(m(s),p(c))}},w=(e,t,n,r)=>{u.current&&clearInterval(u.current);const a="hero"===n?e.heroes[t]:"regular"===n?e.regulars[t]:e.warMachines[t];if(!a)return;"right"===r&&void 0===l.current?l.current={heroes:[],regulars:[],warMachines:[]}:"left"===r&&void 0===o.current&&(o.current={heroes:[],regulars:[],warMachines:[]});const i="right"===r?o.current:l.current,s="right"===r?l.current:o.current,c=()=>{const e="right"===r?o.current:l.current;if(!e)return-1;if("hero"===n){const t=a;return e.heroes.findIndex(e=>e.name===t.name&&e.type===t.type&&e.level===t.level)}if("regular"===n){const t=a;return e.regulars.findIndex(e=>e.id===t.id&&e.rank===t.rank)}{const t=a;return e.warMachines.findIndex(e=>e.type===t.type)}},d=c();null!=i&&null!=s&&d>=0&&b(i,s,d,n,r),u.current=setInterval(()=>{const e=c();if(e<0)return void(u.current&&(clearInterval(u.current),u.current=null));const t="right"===r?o.current:l.current,a="right"===r?l.current:o.current;t&&a&&b(t,a,e,n,r)},200)},S=()=>{u.current&&(clearInterval(u.current),u.current=null)},E=()=>{S()},k=(window.innerWidth-730)/2,x=(window.innerHeight-500)/2,A=(e,t,n,r)=>(0,$r.jsx)("div",{"data-testid":"".concat(e.name,"-").concat(t),className:"".concat(ou," ").concat(cu),onMouseDown:()=>w(n,t,"hero",r),onMouseUp:S,onMouseLeave:E,children:(0,$r.jsxs)("div",{children:[(0,$r.jsx)("div",{className:lu,children:e.name}),(0,$r.jsxs)("div",{className:su,children:[e.type," - Level ",e.level]})]})},"".concat(e.name,"-").concat(e.type,"-").concat(e.level,"-").concat(t)),C=(e,t,n,r)=>{const a=(e=>{switch(e){case mn.REGULAR:return uu;case mn.VETERAN:return du;case mn.ELITE:return hu}})(e.rank);return(0,$r.jsx)("div",{"data-testid":"".concat(e.id,"-").concat(t),className:"".concat(ou," ").concat(a),onMouseDown:()=>w(n,t,"regular",r),onMouseUp:S,onMouseLeave:E,children:(0,$r.jsxs)("div",{children:[(0,$r.jsx)("div",{className:lu,children:e.id}),(0,$r.jsxs)("div",{className:su,children:["Count: ",e.count," (",e.rank,")"]})]})},"".concat(e.id,"-").concat(t))},P=(e,t,n,r)=>(0,$r.jsx)("div",{"data-testid":"".concat(e.type,"-").concat(t),className:"".concat(ou," ").concat(pu),onMouseDown:()=>w(n,t,"warMachine",r),onMouseUp:S,onMouseLeave:E,children:(0,$r.jsxs)("div",{children:[(0,$r.jsx)("div",{className:lu,children:e.type}),(0,$r.jsxs)("div",{className:su,children:["Count: ",e.count]}),(0,$r.jsxs)("div",{className:su,children:["Durability: ",e.durability]})]})},"".concat(e.type,"-").concat(t));return(0,$r.jsx)("div",{"data-testid":"MoveArmyDialog",children:(0,$r.jsx)(ua,{screenPosition:{x:k,y:x},frameSize:{width:730,height:500},primaryButton:(0,$r.jsx)(va,{buttonName:ya.MOVE,onClick:()=>{if(!n||!h)return;const e=Zt(a,n.to),o=gt(a,a.turnOwner,e)===it,l=Co(a,n.from,n.to,h);var s;t(void 0),o||gt(l,null===l||void 0===l?void 0:l.turnOwner,e)!==it||r([{status:er,message:(s=st(l,e).playerProfile.name,"WAR Declared:\n".concat(Yt(["".concat(s," trusted you. That trust now bleeds across their borders."),"Oaths to ".concat(s," were worth less than ash."),"You betray ".concat(s," without warning. Chaos approves."),"The treaty with ".concat(s," shatters beneath marching boots."),"".concat(s," called you ally\u2014now they call for war."),"No honor binds you to ".concat(s,". Only conquest."),"".concat(s," was promised peace. You delivered war."),"A dagger in ".concat(s,"\u2019s back marks the birth of this war."),"Chaos laughs as you turn on ".concat(s,"."),"Your word to ".concat(s," dies as your armies cross their land.")])))}]),i(l)}}),secondaryButton:(0,$r.jsx)(va,{buttonName:ya.CANCEL,onClick:()=>{t(void 0)}}),children:(0,$r.jsxs)("div",{className:Xc,children:[(0,$r.jsx)("div",{className:Zc,children:"Move Army"}),(0,$r.jsxs)("div",{className:Jc,children:[(0,$r.jsxs)("div",{className:eu,"data-testid":"available-units-panel",children:[(0,$r.jsx)("div",{className:tu,children:"Available Units"}),(0,$r.jsx)("div",{className:nu,children:null==d?(0,$r.jsx)("div",{className:ru,children:"No units selected"}):(0,$r.jsxs)($r.Fragment,{children:[d.heroes.map((e,t)=>A(e,t,d,"right")),d.regulars.map((e,t)=>C(e,t,d,"right")),d.warMachines.map((e,t)=>P(e,t,d,"right"))]})})]}),(0,$r.jsxs)("div",{className:au,children:[(0,$r.jsx)("button",{className:iu,onClick:()=>y("right"),disabled:null==d,children:"Move All \u2192"}),(0,$r.jsx)("button",{className:iu,onClick:()=>v("right"),disabled:null==d,children:"Move Half \u2192"}),(0,$r.jsx)("button",{className:iu,onClick:()=>v("left"),disabled:null==h,children:"\u2190 Move Half"}),(0,$r.jsx)("button",{className:iu,onClick:()=>y("left"),disabled:null==h,children:"\u2190 Move All"})]}),(0,$r.jsxs)("div",{className:eu,"data-testid":"units-to-move-panel",children:[(0,$r.jsx)("div",{className:tu,children:"Units to Move"}),(0,$r.jsx)("div",{className:nu,children:null==h?(0,$r.jsx)("div",{className:ru,children:"No units selected"}):(0,$r.jsxs)($r.Fragment,{children:[h.heroes.map((e,t)=>A(e,t,h,"left")),h.regulars.map((e,t)=>C(e,t,h,"left")),h.warMachines.map((e,t)=>P(e,t,h,"left"))]})})]})]})]})})},"".concat(null===n||void 0===n?void 0:n.from.row,"-").concat(null===n||void 0===n?void 0:n.from.col,"-").concat(null===n||void 0===n?void 0:n.to.row,"-").concat(null===n||void 0===n?void 0:n.to.col))},gu=t=>{let{excludedPlayerIds:n,allowEmptyPlayer:r=!0,onSelect:a,onCancel:i}=t;const{selectOpponentCallback:o,hideSelectOpponentDialog:l}=na(),[s,c]=(0,e.useState)(nt[0]),u=(0,e.useMemo)(()=>[...r?[tt]:[],...nt.filter(e=>!n.includes(e.id))],[n,r]);(0,e.useEffect)(()=>{c(u[0]||nt[0])},[u]);const d=(0,e.useCallback)(e=>{a?a(e):o&&(o(e),l())},[a,o,l]),h=(0,e.useCallback)(()=>{i?i():l()},[i,l]),p="undefined"!==typeof window,f=Math.min(700,p?.7*window.innerWidth:700),m=Math.min(500,p?.6*window.innerHeight:500),g=p?(window.innerWidth-f)/2:0,y=p?(window.innerHeight-m)/2:0;return(0,$r.jsx)(ua,{screenPosition:{x:g,y:y},frameSize:{width:f,height:m},secondaryButton:(0,$r.jsx)(va,{buttonName:ya.CANCEL,onClick:h}),zIndex:1010,children:(0,$r.jsx)(hl,{label:"Select Opponent",selectedPlayer:s,onPlayerChange:e=>{c(e),d(e)},availablePlayers:u})})},yu=(e,t,n)=>{const r=((e,t,n)=>Bt(e,n).find(e=>e.heroes.some(e=>e.name===t)))(e,t);if(!r)return;const a=kn(r,t),i=Ht(a.updatedArmy),o=((e,t)=>{const n=ct(e);return bt(e,n.id,{quests:[...n.quests,t]})})(Rn(Tn(e,a.updatedArmy)),((e,t,n)=>{const r=Yn(e);return{quest:Object.freeze(r),hero:Object.freeze(t),land:Object.freeze(n),remainTurnsInQuest:r.length}})(n,a.hero,i));Object.assign(e,o)},vu={"The Echoing Ruins":n.p+"static/media/the-echoing-ruins.79c252214931562a6a67.png","The Whispering Grove":n.p+"static/media/the-whispering-grove.34264c637674a069fed7.png","The Abyssal Crypt":n.p+"static/media/the-abyssal-crypt.9bd0812aef13b9554d83.png","The Shattered Sky":n.p+"static/media/the-shattered-sky.5380e3609a0e4a812ba0.png"},bu=()=>{const{showSendHeroInQuestDialog:t,setShowSendHeroInQuestDialog:n,setActionLandPosition:r,actionLandPosition:a,setSelectedLandAction:i,selectedLandAction:o}=na(),{gameState:l}=Jr(),[s,c]=(0,e.useState)(new Set),u=(0,e.useCallback)(()=>{n(!1),c(new Set),r(void 0),"Quest"===o&&i(null)},[n,r,i,o]);(0,e.useEffect)(()=>{if(!l||!t||!a)return;const e=Ft(l,a);if(0===e.length)return void u();0===e.flatMap(e=>e.heroes).length&&u()},[l,t,a,u]);const d=(0,e.useCallback)(e=>t=>{yu(l,t.id,qn(e+1)),c(e=>new Set(e).add(t.id))},[l]),h=(0,e.useCallback)((e,t)=>()=>{t.forEach(t=>yu(l,t.name,qn(e+1))),u()},[l,u]);if(!t||null==a||null==l)return null;const p=Ft(l,a).flatMap(e=>e.heroes),f=p.map(e=>({id:e.name,name:"".concat(e.name.split(" ")[0]," Lvl: ").concat(e.level)}));return 0===f.length?null:(0,$r.jsx)(Dl,{onClickOutside:u,children:Kn.map((e,t)=>{return(0,$r.jsx)(ns,{pageNum:t,lorePage:1417,header:e.id,iconPath:(n=e.id,vu[n]),description:e.description,onClose:u,slots:f,onSlotClick:d(t),onIconClick:h(t,p),usedSlots:s},e.id);var n})})},wu="DiplomacyContactDialog_container__VI2zs",Su="DiplomacyContactDialog_title__WoXii",Eu="DiplomacyContactDialog_opponentInfo__bhB0t",ku="DiplomacyContactDialog_avatarSection__cGN+j",xu="DiplomacyContactDialog_avatar__V7HOv",Au="DiplomacyContactDialog_infoGrid__tmhmj",Cu="DiplomacyContactDialog_infoRow__cqma0",Pu="DiplomacyContactDialog_label__y0Asy",_u="DiplomacyContactDialog_value__exhYe",Ru="DiplomacyContactDialog_diplomacyStatus__XDP47",Tu="DiplomacyContactDialog_actionsSection__kqgNn",Nu="DiplomacyContactDialog_actionsTitle__FH2uR",Ou="DiplomacyContactDialog_actionButtons__EwkDR",Du="DiplomacyContactDialog_actionButton__8HaAp",Lu=()=>{var t,n,r,a,i,o;const{diplomacyContactOpponent:l,showDiplomacyContactDialog:s,hideDiplomacyContact:c}=na(),{gameState:u}=Jr();if(null==u)return null;const d=null!==(t=null===(n=ct(u).diplomacy[null!==(r=null===l||void 0===l?void 0:l.id)&&void 0!==r?r:tt.id])||void 0===n?void 0:n.status)&&void 0!==t?t:rt,h=null!==(a=null===l||void 0===l?void 0:l.landsOwned.size)&&void 0!==a?a:0,p=(window.innerWidth-760)/2,f=(window.innerHeight-500)/2;return(0,$r.jsx)(e.Activity,{mode:s?"visible":"hidden",children:(0,$r.jsx)(ua,{screenPosition:{x:p,y:f},frameSize:{width:760,height:500},secondaryButton:(0,$r.jsx)(va,{buttonName:ya.CANCEL,onClick:()=>{c()}}),zIndex:1010,children:(0,$r.jsxs)("div",{className:wu,children:[(0,$r.jsx)("h2",{className:Su,children:"Diplomatic Contact"}),(0,$r.jsxs)("div",{className:Eu,children:[(0,$r.jsx)("div",{className:ku,children:(0,$r.jsx)(ki,{player:null!==(i=null===l||void 0===l?void 0:l.playerProfile)&&void 0!==i?i:tt,size:170,shape:"rectangle",borderColor:null===l||void 0===l?void 0:l.color,className:xu})}),(0,$r.jsxs)("div",{className:Au,children:[(0,$r.jsxs)("div",{className:Cu,children:[(0,$r.jsx)("span",{className:Pu,children:"Name:"}),(0,$r.jsx)("span",{className:_u,children:null===l||void 0===l?void 0:l.playerProfile.name})]}),(0,$r.jsxs)("div",{className:Cu,children:[(0,$r.jsx)("span",{className:Pu,children:"Type:"}),(0,$r.jsx)("span",{className:_u,children:null===l||void 0===l?void 0:l.playerProfile.type})]}),(0,$r.jsxs)("div",{className:Cu,children:[(0,$r.jsx)("span",{className:Pu,children:"Alignment:"}),(0,$r.jsx)("span",{className:_u,style:{color:Xi(null!==(o=null===l||void 0===l?void 0:l.playerProfile.alignment)&&void 0!==o?o:tt.alignment)},children:null===l||void 0===l?void 0:l.playerProfile.alignment})]}),(0,$r.jsxs)("div",{className:Cu,children:[(0,$r.jsx)("span",{className:Pu,children:"Race:"}),(0,$r.jsx)("span",{className:_u,children:null===l||void 0===l?void 0:l.playerProfile.race})]}),(0,$r.jsxs)("div",{className:Cu,children:[(0,$r.jsx)("span",{className:Pu,children:"Diplomacy:"}),(0,$r.jsx)("span",{className:"".concat(_u," ").concat(Ru),children:d})]}),(0,$r.jsxs)("div",{className:Cu,children:[(0,$r.jsx)("span",{className:Pu,children:"Visible Lands:"}),(0,$r.jsx)("span",{className:_u,children:h})]})]})]}),(0,$r.jsxs)("div",{className:Tu,children:[(0,$r.jsx)("h3",{className:Nu,children:"Diplomatic Actions"}),(0,$r.jsxs)("div",{className:Ou,children:[(0,$r.jsx)("button",{className:Du,onClick:()=>{console.log("Declare War on",null===l||void 0===l?void 0:l.playerProfile.name)},disabled:d===it,children:"Declare War"}),(0,$r.jsx)("button",{className:Du,onClick:()=>{console.log("Ask for Peace with",null===l||void 0===l?void 0:l.playerProfile.name)},disabled:d===at,children:"Ask for Peace Treaty"}),(0,$r.jsx)("button",{className:Du,onClick:()=>{console.log("Ask for Alliance with",null===l||void 0===l?void 0:l.playerProfile.name)},disabled:d===ot,children:"Ask for Alliance"}),(0,$r.jsx)("button",{className:Du,onClick:()=>{console.log("Demand Money from",null===l||void 0===l?void 0:l.playerProfile.name)},children:"Demand Money per Turn"}),(0,$r.jsx)("button",{className:Du,onClick:()=>{console.log("Demand Territory from",null===l||void 0===l?void 0:l.playerProfile.name)},children:"Demand Territory"}),(0,$r.jsx)("button",{className:Du,onClick:()=>{console.log("Demand Surrender from",null===l||void 0===l?void 0:l.playerProfile.name)},children:"Demand Surrender"})]})]})]})})})},Mu={header:"OpponentInfoPopup_header__LDWyP",title:"OpponentInfoPopup_title__8J3gc",avatarSection:"OpponentInfoPopup_avatarSection__l5VTL",opponentAvatar:"OpponentInfoPopup_opponentAvatar__Cl0ZM",row:"OpponentInfoPopup_row__-Gofz",label:"OpponentInfoPopup_label__b9IIo",value:"OpponentInfoPopup_value__4mXc2",diplomacyStatus:"OpponentInfoPopup_diplomacyStatus__lhZM-",notreaty:"OpponentInfoPopup_notreaty__Z0o-7",peace:"OpponentInfoPopup_peace__MX6F8",war:"OpponentInfoPopup_war__uVBJ3",alliance:"OpponentInfoPopup_alliance__nH-ZO",contactButton:"OpponentInfoPopup_contactButton__ZlOg1"},Iu=e=>{var t,n;let{opponent:r,screenPosition:a}=e;const{hideOpponentInfo:i,clearAllGlow:o,showDiplomacyContact:l}=na(),{gameState:s}=Jr();if(null==r||null==s)return null;const c=ct(s),u=null!==(t=null===c||void 0===c||null===(n=c.diplomacy[r.id])||void 0===n?void 0:n.status)&&void 0!==t?t:rt;const d=Math.min(264,400);return(0,$r.jsx)(Qi,{screenPosition:{x:a.x-50,y:a.y+10},dimensions:{width:310,height:d},onClose:()=>{i(),o()},children:(0,$r.jsxs)("div",{className:Fi,children:[(0,$r.jsx)("div",{className:"".concat(Gi," ").concat(Mu.header),children:(0,$r.jsx)("h3",{className:"".concat(Bi," ").concat(Mu.title),children:r.playerProfile.name})}),(0,$r.jsxs)("div",{className:Wi,children:[(0,$r.jsxs)("div",{className:Mu.avatarSection,children:[(0,$r.jsx)(ki,{player:r.playerProfile,size:55,shape:"rectangle",borderColor:qt(r.color),className:Mu.opponentAvatar}),(0,$r.jsx)("button",{className:Mu.contactButton,onClick:()=>{l(r),i(),o()},title:"Open Diplomatic Contact",children:"Contact"})]}),(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Mu.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Mu.label),children:"Race:"}),(0,$r.jsx)("span",{className:"".concat(Ki," ").concat(Mu.value),children:r.playerProfile.race})]}),(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Mu.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Mu.label),children:"Alignment:"}),(0,$r.jsx)("span",{className:"".concat(Ki," ").concat(Mu.value),style:{color:Xi(r.playerProfile.alignment)},children:r.playerProfile.alignment})]}),(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Mu.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Mu.label),children:"Level:"}),(0,$r.jsx)("span",{className:"".concat(Ki," ").concat(Mu.value),children:r.playerProfile.level})]}),(0,$r.jsxs)("div",{className:"".concat(Ui," ").concat(Mu.row),children:[(0,$r.jsx)("span",{className:"".concat(Vi," ").concat(Mu.label),children:"Diplomatic Relations:"}),(0,$r.jsx)("span",{className:"".concat(Ki," ").concat(Mu.value," ").concat(Mu.diplomacyStatus," ").concat(Mu[u.toLowerCase().replace(" ","")]),children:u})]})]})]})})},ju="ProgressPopup_blockingOverlay__ea8ty",zu="ProgressPopup_content__Br7mM",Hu="ProgressPopup_progressBar__C8ca4",Fu="ProgressPopup_progressBarFill__OeQle",Gu="ProgressPopup_message__nx0yP",Bu=e=>{let{screenPosition:t,message:n}=e;return(0,$r.jsxs)($r.Fragment,{children:[(0,$r.jsx)("div",{className:ju,"data-testid":"progress-popup-overlay"}),(0,$r.jsx)(Qi,{screenPosition:t,dimensions:{width:400,height:200},accessible:!1,children:(0,$r.jsxs)("div",{className:zu,"data-testid":"progress-popup-content",children:[(0,$r.jsx)("div",{className:Hu,"data-testid":"progress-popup-bar",children:(0,$r.jsx)("div",{className:Fu,"data-testid":"progress-popup-fill"})}),(0,$r.jsx)("div",{className:Gu,"data-testid":"progress-popup-message",children:n})]})})]})},Wu=e=>{let{screenPosition:t}=e;const{errorMessagePopupMessage:n}=na();return(0,$r.jsx)(Qi,{screenPosition:t,dimensions:{width:400,height:100},accessible:!0,children:(0,$r.jsx)("div",{className:Fi,style:{height:"60px",justifyContent:"center"},"data-testid":"error-message-popup-content",children:(0,$r.jsx)("div",{className:qi,children:n})})})},Uu="HeroOutcomePopup_popupContent__Y8dBx",Vu="HeroOutcomePopup_header__gp16n",Ku="HeroOutcomePopup_title__uxKjy",qu="HeroOutcomePopup_results__52aMm",Yu="HeroOutcomePopup_resultMessage__iw2sK",Qu=e=>{switch(e){case"negative":return"#ff0000";case"success":return"#2fd700";case"neutral":return"#555555";case"minor":return"#ffa500";case"positive":return"#4169E1";case"legendary":return"#6A0DAD"}},$u=e=>{let{screenPosition:t}=e;const{empireEvents:n,hideEmpireEvents:r}=na();if(!n||0===n.length)return null;const a=n.reduce((e,t)=>{return e+(n=t.message,17*(Math.floor(n.length/64)+1)+30.5);var n},0),i=Math.max(150,82+Math.floor(a));return(0,$r.jsx)(Qi,{screenPosition:t,dimensions:{width:500,height:i>498?498:i},accessible:!0,onClose:r,children:(0,$r.jsxs)("div",{className:Uu,children:[(0,$r.jsx)("div",{className:Vu,children:(0,$r.jsx)("h3",{className:Ku,children:"Echoes of the Realm"})}),(0,$r.jsx)("div",{className:qu,children:n.map((e,t)=>(0,$r.jsx)("div",{className:Yu,style:{borderLeftColor:Qu(e.status)},children:e.message},t))})]})})},Xu="SpellCastAnimation_container__FVIUL",Zu="SpellCastAnimation_spellCastAnimation__0yewK",Ju="SpellCastAnimation_animationImage__a39xG",ed=t=>{var n,r;let{onAnimationComplete:a,duration:i=2e3}=t;const{spellAnimation:o,setSpellAnimation:l}=na();return(0,e.useEffect)(()=>{if(null==o)return;const e=setTimeout(()=>{l(null),null===a||void 0===a||a()},i);return()=>clearTimeout(e)},[o,i,a,l]),(0,$r.jsx)(e.Activity,{mode:null!=o?"visible":"hidden",children:(0,$r.jsx)("div",{className:Xu,style:{left:null!==(n=null===o||void 0===o?void 0:o.screenPosition.x)&&void 0!==n?n:0,top:null!==(r=null===o||void 0===o?void 0:o.screenPosition.y)&&void 0!==r?r:0,"--spell-animation-size":"".concat(200,"px")},children:(0,$r.jsx)("div",{className:Zu,children:(0,$r.jsx)("img",{src:null!=o?(s=o.manaType,Rs[s]):void 0,alt:"".concat(null===o||void 0===o?void 0:o.manaType," spell cast animation"),className:Ju})})})});var s},td=()=>{const{showStartWindow:t,selectedOpponent:n,opponentScreenPosition:r,showSelectOpponentDialog:a,selectOpponentExcludedIds:i,allowEmptyPlayer:o,showProgressPopup:l,progressMessage:s,showErrorMessagePopup:d,showEmpireEventsPopup:h,gameStarted:p,clearAllGlow:f,setSelectedLandAction:m,setIsArcaneExchangeMode:g,setProgressMessage:y,setShowProgressPopup:v,setErrorMessagePopupMessage:b,setShowErrorMessagePopup:w,showEmpireEvents:S,hideSpellAnimation:E}=na(),{gameState:k,startNewTurn:x,setTurnManagerCallbacks:A}=Jr(),C=sa,P=(0,e.useRef)(!1),_=(0,e.useRef)(null);(0,e.useEffect)(()=>{A({onStartProgress:e=>{y(e),v(!0)},onHideProgress:()=>{v(!1)},onGameOver:e=>{b(e),w(!0)},onComputerMainTurn:e=>{console.log("Computer player turn - AI not implemented yet")},onEmpireEventResult:e=>{S(e)}})},[y,v,b,w,A,S]),(0,e.useEffect)(()=>{if(p&&k&&1===k.turn){const e=c();_.current!==e&&(_.current=e,P.current=!1),P.current||(P.current=!0,x())}else p||(P.current=!1,_.current=null)},[p,k,x]);return(0,$r.jsxs)("main",{className:u,id:"MainCanvas",onClick:()=>{f(),m(null),g(!1)},children:[(0,$r.jsx)(Oi,{height:300,tileDimensions:C}),(0,$r.jsx)(Ro,{topPanelHeight:300-Math.min(C.height,C.width),tileSize:C},"map-".concat(p)),t&&(0,$r.jsx)(Sl,{}),a&&(0,$r.jsx)(gu,{excludedPlayerIds:i,allowEmptyPlayer:o}),(0,$r.jsx)(_l,{}),(0,$r.jsx)(Ns,{}),(0,$r.jsx)(Js,{}),(0,$r.jsx)(uc,{}),(0,$r.jsx)($c,{}),(0,$r.jsx)(bu,{}),(0,$r.jsx)(mu,{}),(0,$r.jsx)(Lu,{}),(0,$r.jsx)(Iu,{opponent:n,screenPosition:r}),(0,$r.jsx)(e.Activity,{mode:l?"visible":"hidden",children:(0,$r.jsx)(Bu,{screenPosition:{x:"undefined"!==typeof window?(window.innerWidth-400)/2:0,y:"undefined"!==typeof window?(window.innerHeight-200)/2:0},message:s})}),(0,$r.jsx)(e.Activity,{mode:d?"visible":"hidden",children:(0,$r.jsx)(Wu,{screenPosition:{x:"undefined"!==typeof window?(window.innerWidth-400)/2:0,y:"undefined"!==typeof window?(window.innerHeight-200)/2:0}})}),(0,$r.jsx)(e.Activity,{mode:h?"visible":"hidden",children:(0,$r.jsx)($u,{screenPosition:{x:"undefined"!==typeof window?(window.innerWidth-500)/2:0,y:"undefined"!==typeof window?(window.innerHeight-400)/2:0}})}),(0,$r.jsx)(ed,{onAnimationComplete:E})]})},nd=()=>(0,$r.jsx)(ta,{children:(0,$r.jsx)(Zr,{children:(0,$r.jsx)(td,{})})}),rd=e=>{e&&n.e(488).then(n.bind(n,2488)).then(t=>{let{onCLS:n,onINP:r,onFCP:a,onLCP:i,onTTFB:o}=t;n(e),r(e),a(e),i(e),o(e)})};t.createRoot(document.getElementById("root")).render((0,$r.jsx)(e.StrictMode,{children:(0,$r.jsx)(nd,{})})),rd()})()})();
//# sourceMappingURL=main.b83f8b6f.js.map